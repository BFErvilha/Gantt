import{r as U,p as ee,i as ve,s as ae,f as te,w as Ae,c as H,b as Qe,e as Te,g as Ce,h as yt,j as wt,k as Ct,l as St,m as Ye,n as It,o as qt,q as jt,t as je,u as r,v as O,x as o,y as e,A as v,B as Tt,C as ct,D as y,E as Se,F as Q,G as K,H as tt,I as E,J as B,K as z,L as ke,M as re,N as Je,O as Fe,P as Ie,Q as vt,T as $t,R as Et,S as Dt,U as Ot,V as At,W as Xe,X as Ke,Y as Vt,Z as Nt,$ as Ut}from"./vendor-Brm4ScKu.js";import{E as Rt,a as Pt,_ as Bt}from"./pdf-libs-BW75DGpH.js";import{u as _e,w as mt,r as zt}from"./excel-libs-CKN5doRT.js";(function(){const h=document.createElement("link").relList;if(h&&h.supports&&h.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))k(f);new MutationObserver(f=>{for(const x of f)if(x.type==="childList")for(const R of x.addedNodes)R.tagName==="LINK"&&R.rel==="modulepreload"&&k(R)}).observe(document,{childList:!0,subtree:!0});function S(f){const x={};return f.integrity&&(x.integrity=f.integrity),f.referrerPolicy&&(x.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?x.credentials="include":f.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function k(f){if(f.ep)return;f.ep=!0;const x=S(f);fetch(f.href,x)}})();const Ze=U([]);let Ft=0;function pt(){const F=(S,k="success",f=3e3)=>{const x=Ft++;Ze.value.push({id:x,message:S,type:k}),setTimeout(()=>{h(x)},f)},h=S=>{const k=Ze.value.findIndex(f=>f.id===S);k!==-1&&Ze.value.splice(k,1)};return{notifications:Ze,show:F,remove:h}}const Mt="gantt-pro-tasks",_t="gantt-pro-config",Lt=()=>{try{const F=localStorage.getItem(Mt);if(F)return JSON.parse(F).map(h=>({...h,isNotPlanned:h.isNotPlanned??!1,isCompleted:h.isCompleted??!1,isMilestone:h.isMilestone??!1,usType:h.usType||"item",classification:typeof h.classification=="number"?h.classification:0}))}catch(F){console.error("Erro ao carregar tarefas:",F)}return[]},Ht=()=>{const F={projectStartDate:te(new Date,"yyyy-MM-dd"),deadline:"",skipWeekends:!0,holidays:[],risks:[],teamMembers:[],sprints:[],squads:[]};try{const h=localStorage.getItem(_t);if(h){const S=JSON.parse(h);let k=[];Array.isArray(S.teamMembers)&&(k=S.teamMembers.map(x=>({name:x.name||"Sem Nome",capacity:typeof x.capacity=="number"?x.capacity:8,daysOff:Array.isArray(x.daysOff)?x.daysOff:[],sector:x.sector||"Outro",squadIds:Array.isArray(x.squadIds)?x.squadIds:[]})));let f=Array.isArray(S.squads)?S.squads:[];return f.length===0&&Array.isArray(S.sprints)&&S.sprints.length>0&&f.push({id:"default-squad",name:"Squad PadrÃ£o",color:"#3b82f6",startDate:S.projectStartDate||F.projectStartDate,deadline:S.deadline||"",skipWeekends:!0,holidays:[],sprints:S.sprints.map(x=>({...x,squadId:"default-squad"}))}),f=f.map(x=>({...x,sprints:Array.isArray(x.sprints)?x.sprints:[],holidays:Array.isArray(x.holidays)?x.holidays:[],startDate:x.startDate||F.projectStartDate,deadline:x.deadline||"",skipWeekends:x.skipWeekends??!0})),{...F,...S,projectStartDate:S.projectStartDate||F.projectStartDate,deadline:S.deadline||"",teamMembers:k,sprints:[],squads:f,holidays:Array.isArray(S.holidays)?S.holidays:[]}}}catch(h){console.error("Erro ao carregar configuraÃ§Ãµes:",h)}return F},ie=U(Lt()),$=U(Ht()),Ne=U(null),We=U(null),Be=U(!1),ze=U("project"),xt=ee($.value.projectStartDate),Oe=U(ve(xt)?ae(xt):ae(new Date)),gt=U(""),it=U(""),ut=U(""),et=U("");function Ue(){const F=pt();Ae([ie,$],()=>{localStorage.setItem(Mt,JSON.stringify(ie.value)),localStorage.setItem(_t,JSON.stringify($.value))},{deep:!0}),Ae(()=>$.value.projectStartDate,t=>{t&&ve(ee(t))&&(Oe.value=ae(new Date(t)))});const h=t=>{if($.value.squads){for(const s of $.value.squads)if(s.sprints&&Array.isArray(s.sprints)){const l=s.sprints.find(d=>d.id===t);if(l)return l}}},S=H(()=>{let t=ae(new Date($.value.projectStartDate));return ve(t)||(t=ae(new Date)),$.value.squads.forEach(s=>{s.sprints&&s.sprints.forEach(l=>{const d=ae(ee(l.endDate));ve(d)&&Qe(d,t)&&(t=d)})}),D.value.forEach(s=>{s.endDate&&ve(s.endDate)&&Qe(s.endDate,t)&&(t=s.endDate)}),t}),k=H(()=>{let t=S.value;if($.value.deadline){const s=ae(ee($.value.deadline));ve(s)&&Qe(s,t)&&(t=s)}return Te(t,7)}),f=(t,s,l)=>{var g;if(!ve(t))return!1;const d=te(t,"yyyy-MM-dd");if($.value.holidays.includes(d))return!0;if(l){const I=h(l);if(I&&([I.planningDate,I.refinementDate,I.reviewDate,I.retroDate].includes(d)||(I.skipWeekends??$.value.skipWeekends)&&Ye(t)))return!0}else if($.value.skipWeekends&&Ye(t))return!0;if(s){const I=$.value.teamMembers.find(V=>V.name===s);if((g=I==null?void 0:I.daysOff)!=null&&g.includes(d))return!0}return!1},x=(t,s,l,d)=>{if(!ve(t))return new Date;if(s===0)return t;let g=0,I=t;const V=Math.max(0,s-1);let q=0;for(;g<V&&q<1e3;)I=Te(I,1),f(I,l,d)||g++,q++;return I},R=(t,s,l)=>{if(!ve(t))return new Date;let d=t,g=0;for(;f(d,s,l)&&g<365;)d=Te(d,1),g++;return d},D=H(()=>{const t=ve(ee($.value.projectStartDate))?ae(ee($.value.projectStartDate)):ae(new Date),s=new Map,l=[...ie.value];let d=!0,g=0;const I=l.length*2;for(;d&&g<I;){d=!1,g++;for(const q of l){let Z=t;if(q.manualStartDate){let de=ee(q.manualStartDate);ve(de)&&(Z=R(de,q.responsible))}else if(q.dependencyId){const de=s.get(q.dependencyId);if(de){let Y=1;de.type==="backend"&&q.type==="frontend"&&(Y=3);let fe=Te(de.end,Y);Z=R(fe,q.responsible)}}else if(q.sprintId){const de=h(q.sprintId);if(de){const Y=ee(de.startDate);ve(Y)&&(Z=R(Y,q.responsible))}else Z=R(t,q.responsible)}else Z=R(t,q.responsible);const ue=x(Z,q.isMilestone?0:q.duration,q.responsible,q.sprintId),we=s.get(q.id);(!we||we.start.getTime()!==Z.getTime())&&(s.set(q.id,{start:Z,end:ue,type:q.type}),d=!0)}}const V=ve(ee($.value.projectStartDate))?ae(ee($.value.projectStartDate)):ae(new Date);return ie.value.map(q=>{const Z=s.get(q.id)||{start:V,end:V,type:q.type},ue=Ce(Z.end,Z.start)+1;return{...q,startDate:Z.start,endDate:Z.end,offsetDays:Ce(Z.start,V),calendarDuration:q.isMilestone?1:ue,formattedStartDate:te(Z.start,"dd/MM/yyyy"),formattedEndDate:te(Z.end,"dd/MM/yyyy")}})}),L=H(()=>D.value.filter(t=>{const s=t.name.toLowerCase().includes(gt.value.toLowerCase()),l=it.value?t.responsible===it.value:!0,d=ut.value?t.type===ut.value:!0;let g=!0;if(et.value)if(t.sprintId){const I=h(t.sprintId);g=(I==null?void 0:I.squadId)===et.value}else if(t.responsible){const I=$.value.teamMembers.find(V=>V.name===t.responsible);g=I?I.squadIds.includes(et.value):!1}else g=!1;return s&&l&&d&&g})),w=H(()=>{const t=ve(Oe.value)?ae(Oe.value):ae(new Date),s=ve(ee($.value.projectStartDate))?ae(ee($.value.projectStartDate)):ae(new Date),l=k.value;return ze.value==="week"?{start:wt(t,{weekStartsOn:0}),end:yt(t,{weekStartsOn:0})}:ze.value==="month"?{start:St(t),end:Ct(t)}:{start:s,end:l}}),m=t=>{const s=t==="next"?1:-1;ze.value==="week"?Oe.value=qt(Oe.value,s):ze.value==="month"&&(Oe.value=jt(Oe.value,s))},_=t=>{ze.value=t},P=t=>{ie.value=t.map(s=>({id:s.id||crypto.randomUUID(),usId:s.usId||"",customId:s.customId||"",name:s.name||"Sem nome",duration:s.duration||1,dependencyId:s.dependencyId||null,color:s.color||"#3b82f6",type:s.type||"other",responsible:s.responsible||"",effort:s.effort||0,sprintId:s.sprintId||void 0,isNotPlanned:!s.sprintId,isCompleted:!1,isMilestone:s.isMilestone||!1,usType:s.usType||"item",classification:typeof s.classification=="number"?s.classification:0}))},i=H(()=>Ce(w.value.end,w.value.start)+1),G=t=>{const s=t.id||crypto.randomUUID();ie.value.push({id:s,usId:t.usId||"",customId:t.customId||"",name:t.name||"Nova Tarefa",duration:t.duration||1,dependencyId:t.dependencyId||null,color:t.color||"#3b82f6",type:t.type||"other",responsible:t.responsible||"",effort:t.effort||0,sprintId:t.sprintId,isNotPlanned:!t.sprintId,isCompleted:!1,completedDate:void 0,isMilestone:t.isMilestone||!1,usType:t.usType||"item",classification:t.classification||0})},n=t=>{const s=ie.value.findIndex(l=>l.id===t.id);s!==-1&&(ie.value[s]={...t}),Ne.value=null,Be.value=!1},u=t=>{var s;ie.value=ie.value.filter(l=>l.id!==t),ie.value.forEach(l=>{l.dependencyId===t&&(l.dependencyId=null)}),((s=Ne.value)==null?void 0:s.id)===t&&(Ne.value=null,Be.value=!1)},b=t=>{const s=ie.value.find(l=>l.id===t);s&&(s.isCompleted=!s.isCompleted,s.isCompleted?s.completedDate=te(new Date,"yyyy-MM-dd"):s.completedDate=void 0)},A=t=>{Ne.value=JSON.parse(JSON.stringify(t)),Be.value=!0},J=()=>{Ne.value=null,Be.value=!0},se=()=>{Ne.value=null,Be.value=!1},he=(t,s)=>{const l=ie.value.find(d=>d.id===t);l&&(l.manualStartDate=te(s,"yyyy-MM-dd"))},me=()=>{const t=new Map;D.value.forEach(s=>{s.startDate&&s.endDate&&t.set(s.id,{start:te(s.startDate,"yyyy-MM-dd"),end:te(s.endDate,"yyyy-MM-dd")})}),ie.value.forEach(s=>{if(t.has(s.id)){const l=t.get(s.id);s.originalStartDate=l.start,s.originalEndDate=l.end}}),F.show("Linha de base salva!","success")},$e=()=>{We.value=JSON.stringify(ie.value)},xe=()=>{We.value&&(ie.value=JSON.parse(We.value),We.value=null,F.show("AlteraÃ§Ãµes desfeitas!","success"))},ye=t=>{$.value.holidays.includes(t)||$.value.holidays.push(t)},oe=t=>{$.value.holidays=$.value.holidays.filter(s=>s!==t)},ce=t=>{t&&!$.value.risks.includes(t)&&$.value.risks.push(t)},W=t=>{$.value.risks.splice(t,1)},M=(t,s=8,l="Outro",d=[])=>{t&&!$.value.teamMembers.some(g=>g.name===t)&&$.value.teamMembers.push({name:t,capacity:s,daysOff:[],sector:l,squadIds:d})},pe=(t,s,l,d,g)=>{const I=$.value.teamMembers[t].name;$.value.teamMembers[t].name=s,$.value.teamMembers[t].capacity=l,$.value.teamMembers[t].sector=d,$.value.teamMembers[t].squadIds=g,I!==s&&ie.value.forEach(V=>{V.responsible===I&&(V.responsible=s)})},j=t=>{$.value.teamMembers.splice(t,1)},T=(t,s,l)=>{const d=$.value.teamMembers[t];d.squadIds.includes(s)||d.squadIds.push(s),l!==void 0&&(d.capacity=l)},C=(t,s)=>{const l=$.value.teamMembers[t];l.squadIds=l.squadIds.filter(d=>d!==s)},De=(t,s)=>{const l=$.value.teamMembers[t];l&&!l.daysOff.includes(s)&&(l.daysOff.push(s),l.daysOff.sort())},p=(t,s)=>{const l=$.value.teamMembers[t];l&&(l.daysOff=l.daysOff.filter(d=>d!==s))},a=(t,s)=>{$.value.squads.push({id:crypto.randomUUID(),name:t,color:s,startDate:te(new Date,"yyyy-MM-dd"),deadline:"",skipWeekends:!0,holidays:[],sprints:[]})},X=(t,s,l)=>{const d=$.value.squads.findIndex(g=>g.id===t);d!==-1&&($.value.squads[d].name=s,$.value.squads[d].color=l)},le=t=>{$.value.squads=$.value.squads.filter(s=>s.id!==t),$.value.teamMembers.forEach(s=>{s.squadIds=s.squadIds.filter(l=>l!==t)})},be=(t,s,l,d)=>{$.value.sprints.push({id:crypto.randomUUID(),name:t,startDate:s,endDate:l,squadId:d}),$.value.sprints.sort((g,I)=>g.startDate.localeCompare(I.startDate))},ge=(t,s,l,d,g)=>{const I=$.value.sprints.findIndex(V=>V.id===t);I!==-1&&($.value.sprints[I]={...$.value.sprints[I],name:s,startDate:l,endDate:d,squadId:g},$.value.sprints.sort((V,q)=>V.startDate.localeCompare(q.startDate)))},ne=t=>{$.value.sprints=$.value.sprints.filter(s=>s.id!==t),ie.value.forEach(s=>{s.sprintId===t&&(s.sprintId=void 0)})},c=(t,s)=>{const l=$.value.squads.find(d=>d.id===t);l&&!l.holidays.includes(s)&&l.holidays.push(s)},He=(t,s)=>{const l=$.value.squads.find(d=>d.id===t);l&&(l.holidays=l.holidays.filter(d=>d!==s))},st=(t,s,l,d)=>{const g=$.value.squads.find(I=>I.id===t);g&&(g.sprints.push({id:crypto.randomUUID(),name:s,startDate:l,endDate:d,squadId:t}),g.sprints.sort((I,V)=>I.startDate.localeCompare(V.startDate)))},at=(t,s,l)=>{const d=$.value.squads.find(g=>g.id===t);if(d){const g=d.sprints.findIndex(I=>I.id===s);g!==-1&&(d.sprints[g]={...d.sprints[g],...l},d.sprints.sort((I,V)=>I.startDate.localeCompare(V.startDate)),F.show("ConfiguraÃ§Ãµes da Sprint salvas!","success"))}},Ee=(t,s)=>{const l=$.value.squads.find(d=>d.id===t);l&&(l.sprints=l.sprints.filter(d=>d.id!==s),ie.value.forEach(d=>{d.sprintId===s&&(d.sprintId=void 0)}))},lt=H(()=>{const t=ve(ee($.value.projectStartDate))?ae(ee($.value.projectStartDate)):ae(new Date);let s=k.value;if($.value.deadline){const q=ae(ee($.value.deadline));ve(q)&&(s=k.value)}const l=Ce(s,t)+1;let d=0,g=t;for(;g<=s;)f(g)||d++,g=Te(g,1);const I=$.value.teamMembers.map(q=>{let Z=0;q.daysOff&&q.daysOff.length>0&&q.daysOff.forEach(we=>{const de=ae(ee(we));de>=t&&de<=s&&($.value.holidays.includes(we)||$.value.skipWeekends&&Ye(de)||Z++)});const ue=Math.max(0,d-Z);return{name:q.name,capacityPerDay:q.capacity,totalCapacity:q.capacity*ue,sector:q.sector,effectiveDays:ue}}),V=I.reduce((q,Z)=>q+Z.totalCapacity,0);return{workingDays:d,calendarDays:l,totalTeamCapacity:V,memberStats:I}}),ot=H(()=>{const t=[];let s=0,l=0;if(D.value.forEach(d=>{if(d.isCompleted||(l+=d.effort||0,d.isNotPlanned&&(s+=d.effort||0)),!d.isCompleted){const g=$.value.teamMembers.find(V=>V.name===d.responsible),I=g?g.capacity:8;if(!d.isMilestone&&d.effort&&d.duration&&d.effort>d.duration*I&&t.push(`CAPACIDADE: "${d.name}" requer ${d.effort}h. Limite atual: ${d.duration*I}h.`),d.sprintId&&d.startDate&&d.endDate){const V=h(d.sprintId);if(V){const q=ae(ee(V.startDate)),Z=ae(ee(V.endDate));if(It(d.startDate,q)&&t.push(`SPRINT: "${d.name}" comeÃ§a antes da ${V.name} (${te(q,"dd/MM")}).`),Qe(d.endDate,Z)){const ue=Ce(d.endDate,Z);t.push(`SPRINT: "${d.name}" estourou a ${V.name} em ${ue} dia(s).`)}}}if(d.startDate&&d.endDate){let V=!1,q="";$.value.holidays.some(ue=>{const we=ae(ee(ue));return d.startDate<=we&&d.endDate>=we})&&(V=!0,q="feriado"),!V&&g&&g.daysOff.some(we=>{const de=ae(ee(we));return d.startDate<=de&&d.endDate>=de})&&(V=!0,q="folga pessoal"),V&&d.duration<3&&t.push(`CALENDÃRIO: Tarefa curta "${d.name}" coincide com ${q}.`)}}}),l>0&&s/l>.2){const d=Math.round(s/l*100);t.push(`CARRY-OVER: ${d}% do esforÃ§o ativo sÃ£o tarefas "NÃ£o Planejadas". Risco de atraso nas entregas planejadas.`)}return t}),rt=H(()=>{if(!D.value.length)return[];let t=0;D.value.forEach(g=>{!g.isCompleted&&g.endDate&&g.endDate.getTime()>t&&(t=g.endDate.getTime())});const s=new Set,l=D.value.filter(g=>!g.isCompleted&&g.endDate&&g.endDate.getTime()===t),d=g=>{s.add(g);const I=D.value.find(V=>V.id===g);I&&I.dependencyId&&d(I.dependencyId)};return l.forEach(g=>d(g.id)),Array.from(s)}),Ge=()=>{const t=[],s=new Map;return $.value.squads.forEach(l=>{l.sprints.forEach(d=>{s.set(d.id,[])})}),ie.value.forEach(l=>{var d;l.sprintId&&s.has(l.sprintId)&&((d=s.get(l.sprintId))==null||d.push(l))}),$.value.squads.forEach(l=>{l.sprints.forEach(d=>{const g=s.get(d.id)||[];if(g.length===0)return;const I=[...g].sort((Y,fe)=>{const qe=Y.startDate?new Date(Y.startDate).getTime():0,Me=fe.startDate?new Date(fe.startDate).getTime():0;return qe-Me});new Set(g.map(Y=>Y.responsible).filter(Boolean)).forEach(Y=>{const fe=I.filter(Me=>Me.responsible===Y);let qe=fe.findIndex(Me=>Me.usType==="goal");if(qe>0){const Me=fe[qe];for(let Ve=0;Ve<qe;Ve++){const Pe=fe[Ve];Pe.usType!=="goal"&&t.push(`PRIORIDADE (${l.name}): ${Y} estÃ¡ fazendo "${Pe.name}" (Item) antes de "${Me.name}" (Meta).`)}}for(let Me=0;Me<fe.length-1;Me++){const Ve=fe[Me],Pe=fe[Me+1];if(Ve.usType===Pe.usType){const bt=Ve.classification||999,ft=Pe.classification||999;ft<bt&&t.push(`SEQUÃŠNCIA (${l.name}): "${Pe.name}" (Classif. ${ft}) deveria ser feita antes de "${Ve.name}" (Classif. ${bt}).`)}}});const q=ee(d.startDate),Z=ee(d.endDate),ue=Ce(Z,q),de=$.value.teamMembers.filter(Y=>Y.squadIds.includes(l.id)).map(Y=>{const fe=ue*Y.capacity*.7;return{name:Y.name,limit:fe,used:0}});g.forEach(Y=>{if(Y.responsible&&Y.effort){const fe=de.find(qe=>qe.name===Y.responsible);fe&&(fe.used+=Y.effort)}}),de.forEach(Y=>{if(Y.used>Y.limit){const fe=Y.used-Y.limit,qe=g.filter(Me=>Me.responsible===Y.name&&Me.usType!=="goal");qe.length>0?t.push(`SOBRECARGA (${l.name}): ${Y.name} estourou a Sprint (+${fe.toFixed(1)}h). Mova "${qe[0].name}" para a prÃ³xima.`):t.push(`RISCO CRÃTICO (${l.name}): ${Y.name} nÃ£o entregarÃ¡ as Metas da Sprint.`)}})})}),t.length===0?["OTIMIZADO: O planejamento segue prioridades (Meta > Item), ClassificaÃ§Ã£o e respeita a capacidade."]:t},nt=t=>{const s=$.value.squads.find(ue=>ue.id===t);if(!s)return{calendarDays:0,workingDays:0,totalTeamCapacity:0};const l=ve(ee(s.startDate))?ae(ee(s.startDate)):ae(new Date);let d=s.deadline?ae(ee(s.deadline)):Te(l,30);const g=Ce(d,l)+1;let I=0,V=l;for(;V<=d;)f(V)||I++,V=Te(V,1);const Z=$.value.teamMembers.filter(ue=>ue.squadIds.includes(t)).reduce((ue,we)=>ue+I*we.capacity,0);return{calendarDays:g,workingDays:I,totalTeamCapacity:Z}},dt=H(()=>$.value.squads.flatMap(t=>t.sprints.map(s=>({...s,squadId:t.id}))));return{tasks:ie,config:$,computedTasks:D,filteredTasks:L,totalProjectDays:i,editingTask:Ne,viewMode:ze,visibleDateRange:w,currentViewDate:Oe,setViewMode:_,navigateView:m,addTask:G,updateTask:n,removeTask:u,toggleTaskCompletion:b,importTasks:P,setEditingTask:A,cancelEditing:se,addHoliday:ye,removeHoliday:oe,addRisk:ce,removeRisk:W,isNonWorkingDay:f,addMember:M,updateMember:pe,removeMember:j,addMemberDayOff:De,removeMemberDayOff:p,moveTask:he,isTaskModalOpen:Be,openCreateModal:J,automaticRisks:ot,criticalPathIds:rt,projectCapacityStats:lt,filterSearch:gt,filterResponsible:it,filterType:ut,filterSquad:et,addSprint:be,updateSprint:ge,removeSprint:ne,projectDeadlineComputed:k,saveBaseline:me,getOptimizationSuggestions:Ge,createSnapshot:$e,restoreSnapshot:xe,tasksSnapshot:We,addSquad:a,updateSquad:X,removeSquad:le,linkMemberToSquad:T,unlinkMemberFromSquad:C,suggestedEndDate:S,getSquadStats:nt,allSprints:dt,addHolidayToSquad:c,removeHolidayFromSquad:He,addSprintToSquad:st,updateSprintInSquad:at,removeSprintFromSquad:Ee,restoreFullBackup:(t,s)=>{try{t.squads&&($.value.squads=t.squads.map(l=>({...l,sprints:l.sprints||[],holidays:l.holidays||[],skipWeekends:l.skipWeekends??!0}))),t.teamMembers&&($.value.teamMembers=t.teamMembers),s&&(ie.value=s.map(l=>({id:l.id||crypto.randomUUID(),name:l.name||"Sem nome",duration:l.duration||1,dependencyId:l.dependencyId||null,color:l.color||"#3b82f6",type:l.type||"other",responsible:l.responsible||"",effort:l.effort||0,sprintId:l.sprintId,usType:l.usType||"item",isNotPlanned:!l.sprintId,isCompleted:l.isCompleted||!1,isMilestone:l.isMilestone||!1,classification:l.classification||0}))),F.show("Projeto restaurado com sucesso!","success")}catch(l){console.error("Erro ao restaurar backup:",l),F.show("Falha ao restaurar dados do Excel.","error")}}}}const Gt={key:0,class:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[60] flex items-center justify-center p-4"},Wt={class:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-sm overflow-hidden transform transition-all"},Qt={class:"p-4 border-b border-slate-100 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 flex justify-between items-center"},Yt={class:"font-bold text-slate-800 dark:text-slate-100"},Jt={class:"p-6"},Xt={class:"text-slate-600 dark:text-slate-300 text-sm"},Kt={class:"p-4 bg-slate-50 dark:bg-slate-900/50 flex justify-end gap-3"},kt=je({__name:"ConfirmationModal",props:{isOpen:{type:Boolean},title:{},message:{}},emits:["confirm","cancel"],setup(F,{emit:h}){const S=h;return(k,f)=>F.isOpen?(o(),r("div",Gt,[e("div",Wt,[e("div",Qt,[e("h3",Yt,v(F.title),1),e("button",{onClick:f[0]||(f[0]=x=>S("cancel")),class:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200"},[...f[3]||(f[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])])]),e("div",Jt,[e("p",Xt,v(F.message),1)]),e("div",Kt,[e("button",{onClick:f[1]||(f[1]=x=>S("cancel")),class:"px-4 py-2 rounded text-slate-600 dark:text-slate-300 text-sm font-bold hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors"},"Cancelar"),e("button",{onClick:f[2]||(f[2]=x=>S("confirm")),class:"bg-blue-600 text-white px-4 py-2 rounded text-sm font-bold hover:bg-blue-700 transition-colors shadow-sm"},"Confirmar")])])])):O("",!0)}}),Zt={key:0,class:"fixed inset-0 z-50 flex justify-end overflow-hidden"},es={class:"relative w-full max-w-xl h-full bg-white dark:bg-slate-900 shadow-2xl flex flex-col border-l border-slate-200 dark:border-slate-800 transition-all duration-300 ease-out transform"},ts={class:"flex-shrink-0 bg-slate-50 dark:bg-slate-950 border-b border-slate-200 dark:border-slate-800 px-6 py-4 flex items-center justify-between z-10"},ss={class:"text-xl font-bold text-slate-800 dark:text-slate-100 flex items-center gap-2"},as={key:0,class:"px-6 pt-4 bg-white dark:bg-slate-900 flex-shrink-0"},ls={class:"flex p-1 bg-slate-100 dark:bg-slate-800 rounded-lg"},os={class:"flex-1 overflow-y-auto custom-scrollbar p-6 bg-white dark:bg-slate-900"},rs={class:"bg-purple-50 dark:bg-purple-900/10 p-5 rounded-xl border border-purple-100 dark:border-purple-800/30"},ns={class:"grid grid-cols-2 gap-5"},ds={class:"col-span-2"},is=["value"],us={class:"col-span-2"},cs=["disabled"],ps=["value"],bs={key:0,class:"text-[10px] text-indigo-500 mt-1 font-medium"},fs={class:"col-span-2 bg-white dark:bg-slate-800/50 p-3 rounded-lg border border-slate-200 dark:border-slate-700 grid grid-cols-2 gap-4"},vs={class:"flex gap-2"},ms={class:"flex-1 cursor-pointer relative"},xs={class:"flex-1 cursor-pointer relative"},gs={class:"col-span-2 flex items-center gap-3 mt-1 p-3 bg-white dark:bg-slate-800 rounded-lg border border-purple-100 dark:border-purple-900/50 shadow-sm cursor-pointer hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-colors"},ks={class:"space-y-4"},hs={class:"pt-2"},ys={class:"flex-1 grid grid-cols-2 gap-3"},ws={class:"col-span-2 text-xs font-bold text-green-800 dark:text-green-400 uppercase tracking-wide"},$s=["disabled"],Ds=["value"],Ms=["disabled"],_s={class:"pt-2"},Cs={class:"flex-1 grid grid-cols-2 gap-3"},Ss=["disabled"],Is=["value"],qs=["disabled"],js={class:"pt-2"},Ts={class:"flex-1 grid grid-cols-2 gap-3"},Es={class:"col-span-2 text-xs font-bold text-purple-800 dark:text-purple-400 uppercase tracking-wide"},Os=["disabled"],As=["value"],Vs=["disabled"],Ns=["value"],Us={class:"grid grid-cols-2 gap-5"},Rs={class:"grid grid-cols-2 gap-5 p-4 bg-slate-50 dark:bg-slate-800/50 rounded-xl border border-slate-100 dark:border-slate-700"},Ps={class:"flex gap-2"},Bs={class:"flex-1 cursor-pointer relative"},zs={class:"flex-1 cursor-pointer relative"},Fs={class:"flex items-center gap-3 p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg border border-indigo-100 dark:border-indigo-900/30"},Ls={key:0,class:"grid grid-cols-2 gap-5"},Hs={class:"flex gap-2"},Gs=["onClick"],Ws={key:0,class:"w-4 h-4 text-white drop-shadow-md",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Qs=["disabled"],Ys=["value"],Js={key:0,class:"text-xs text-indigo-500 dark:text-indigo-400 mt-2 font-bold flex items-center gap-1.5 bg-indigo-50 dark:bg-indigo-900/20 p-2 rounded border border-indigo-100 dark:border-indigo-800"},Xs={class:"grid grid-cols-2 gap-5"},Ks={key:0},Zs=["disabled"],ea=["value"],ta={key:0,class:"text-[10px] text-red-400 mt-1"},sa={key:1},aa={class:"relative"},la={key:1,class:"grid grid-cols-2 gap-5"},oa={class:"relative"},ra=["value"],na={key:2},da=["value"],ia={key:3,class:"text-xs font-medium text-amber-800 dark:text-amber-200 bg-amber-50 dark:bg-amber-900/40 p-3 rounded-lg border border-amber-200 dark:border-amber-800 flex items-start gap-2"},ua={class:"flex-shrink-0 border-t border-slate-200 dark:border-slate-800 p-4 bg-white dark:bg-slate-950 z-20 flex flex-col gap-3"},ca={class:"flex gap-3"},pa=["form"],ba={key:0,class:"flex gap-3 pt-1 border-t border-slate-100 dark:border-slate-800/50 mt-1"},fa={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},va={key:1,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ma=je({__name:"TaskModal",setup(F){const{tasks:h,addTask:S,editingTask:k,updateTask:f,cancelEditing:x,removeTask:R,toggleTaskCompletion:D,config:L,isTaskModalOpen:w,allSprints:m}=Ue(),_=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899"],P={name:"",usId:"",customId:"",duration:1,dependencyId:"",color:"#3b82f6",type:"frontend",responsible:"",effort:0,sprintId:"",squadId:"",isMilestone:!1,usType:"item",classification:0},i=U({...P}),G=U(!1),n=U({featureName:"",usId:"",sprintId:"",squadId:"",isFullstack:!1,usType:"item",classification:0,backend:{responsible:"",effort:0,enabled:!0},frontend:{responsible:"",effort:0,enabled:!0},qa:{responsible:"",effort:0,enabled:!0}}),u=U(!1),b=U(!1);Ae(k,p=>{if(p){G.value=!1;let a="";if(p.sprintId){const X=m.value.find(le=>le.id===p.sprintId);X&&X.squadId&&(a=X.squadId)}i.value={name:p.name,usId:p.usId||"",customId:p.customId||"",duration:p.duration,dependencyId:p.dependencyId||"",color:p.color,type:p.type||"other",responsible:p.responsible||"",effort:p.effort||0,sprintId:p.sprintId||"",squadId:a,isMilestone:p.isMilestone||!1,usType:p.usType||"item",classification:p.classification||0}}else ce()});const A=H(()=>i.value.squadId?m.value.filter(p=>p.squadId===i.value.squadId):m.value),J=H(()=>n.value.squadId?m.value.filter(p=>p.squadId===n.value.squadId):m.value),se=H(()=>{if(!n.value.sprintId)return null;const p=m.value.find(a=>a.id===n.value.sprintId);return p&&p.squadId?L.value.squads.find(a=>a.id===p.squadId):null}),he=H(()=>{if(!i.value.sprintId)return null;const p=m.value.find(a=>a.id===i.value.sprintId);return p&&p.squadId?L.value.squads.find(a=>a.id===p.squadId):null}),me=H(()=>!k.value&&G.value?"flow-form":"simple-form");Ae(()=>i.value.sprintId,p=>{if(p){const a=m.value.find(X=>X.id===p);a&&a.squadId&&(i.value.squadId=a.squadId)}}),Ae(()=>n.value.sprintId,p=>{if(p){const a=m.value.find(X=>X.id===p);a&&a.squadId&&(n.value.squadId=a.squadId)}});const $e=(p,a)=>L.value.teamMembers.filter(X=>{if(a&&!X.squadIds.includes(a))return!1;const le=(X.sector||"").toLowerCase();return!!(le.includes("fullstack")||le.includes("full stack")||p==="backend"&&(le.includes("back")||le.includes("devops"))||p==="frontend"&&(le.includes("front")||le.includes("design"))||p==="qualidade"&&(le.includes("qa")||le.includes("qualidade"))||p==="other")}),xe=H(()=>{let p=L.value.teamMembers;return i.value.squadId&&(p=p.filter(a=>a.squadIds.includes(i.value.squadId))),!i.value.type||i.value.type==="other"?p:$e(i.value.type,i.value.squadId)});Ae(()=>i.value.type,()=>{const p=i.value.responsible;p&&xe.value.length>0&&(xe.value.some(X=>X.name===p)||(i.value.responsible=""))});const ye=p=>{if(!p)return 8;const a=L.value.teamMembers.find(X=>X.name===p);return a?a.capacity:8};Ae([()=>i.value.effort,()=>i.value.responsible],([p])=>{if(p&&p>0&&!i.value.isMilestone){const a=ye(i.value.responsible);i.value.duration=Math.max(1,Math.ceil(p/a))}});const oe=H(()=>{if(i.value.isMilestone)return null;const p=i.value.effort,a=i.value.duration,X=ye(i.value.responsible);return p>a*X?`AtenÃ§Ã£o: ${p}h excede a capacidade de ${a} dia(s).`:null}),ce=()=>{i.value={...P,color:_[Math.floor(Math.random()*_.length)]},n.value={featureName:"",usId:"",sprintId:"",squadId:"",isFullstack:!1,usType:"item",classification:0,backend:{responsible:"",effort:0,enabled:!0},frontend:{responsible:"",effort:0,enabled:!0},qa:{responsible:"",effort:0,enabled:!0}},u.value=!1,b.value=!1},W=()=>{i.value.name&&(k.value?f({...k.value,...i.value,dependencyId:i.value.dependencyId||null,sprintId:i.value.sprintId||void 0,isNotPlanned:!i.value.sprintId}):S({name:i.value.name,usId:i.value.usId,customId:i.value.customId,duration:i.value.isMilestone?0:i.value.duration,dependencyId:i.value.dependencyId||null,color:i.value.color,type:i.value.type,responsible:i.value.responsible,effort:i.value.effort,sprintId:i.value.sprintId||void 0,isMilestone:i.value.isMilestone,usType:i.value.usType,classification:i.value.classification}),x())},M=()=>{if(!n.value.featureName)return;const p=crypto.randomUUID(),a=crypto.randomUUID(),X=crypto.randomUUID(),le={usId:n.value.usId,sprintId:n.value.sprintId||void 0,isMilestone:!1,usType:n.value.usType,classification:n.value.classification};if(n.value.backend.enabled){const be=n.value.backend.effort,ge=ye(n.value.backend.responsible),ne=n.value.isFullstack?`${n.value.featureName} (Fullstack)`:`${n.value.featureName} (Back)`;S({id:p,name:ne,type:"backend",color:"#10b981",responsible:n.value.backend.responsible,effort:be,duration:Math.max(1,Math.ceil(be/ge)),dependencyId:null,...le})}if(!n.value.isFullstack&&n.value.frontend.enabled){const be=n.value.frontend.effort,ge=ye(n.value.frontend.responsible),ne=n.value.backend.enabled?p:null;S({id:a,name:`${n.value.featureName} (Front)`,type:"frontend",color:"#3b82f6",responsible:n.value.frontend.responsible,effort:be,duration:Math.max(1,Math.ceil(be/ge)),dependencyId:ne,...le})}if(n.value.qa.enabled){const be=n.value.qa.effort,ge=ye(n.value.qa.responsible);let ne=null;!n.value.isFullstack&&n.value.frontend.enabled?ne=a:n.value.backend.enabled&&(ne=p),S({id:X,name:`${n.value.featureName} (QA)`,type:"qualidade",color:"#8b5cf6",responsible:n.value.qa.responsible,effort:be,duration:Math.max(1,Math.ceil(be/ge)),dependencyId:ne,...le})}x()},pe=()=>{x(),ce()},j=()=>{k.value&&(u.value=!0)},T=()=>{k.value&&(R(k.value.id),u.value=!1)},C=()=>{k.value&&(b.value=!0)},De=()=>{k.value&&(D(k.value.id),b.value=!1,x())};return(p,a)=>(o(),Tt($t,{name:"slide"},{default:ct(()=>{var X,le,be,ge,ne;return[y(w)?(o(),r("div",Zt,[e("div",{class:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity",onClick:pe}),e("div",es,[e("div",ts,[e("h3",ss,v(y(k)?"âœï¸ Editar Tarefa":"âœ¨ Nova Tarefa"),1),e("button",{onClick:pe,class:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-800 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors"},[...a[36]||(a[36]=[e("svg",{class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),y(k)?O("",!0):(o(),r("div",as,[e("div",ls,[e("button",{onClick:a[0]||(a[0]=c=>G.value=!1),class:Q(["flex-1 py-2 text-sm font-bold rounded-md transition-all shadow-sm",G.value?"text-slate-500 hover:text-slate-700 dark:text-slate-400":"bg-white dark:bg-slate-700 text-blue-600 dark:text-blue-400 shadow"])}," Tarefa Simples ",2),e("button",{onClick:a[1]||(a[1]=c=>G.value=!0),class:Q(["flex-1 py-2 text-sm font-bold rounded-md transition-all flex items-center justify-center gap-2",G.value?"bg-white dark:bg-slate-700 text-purple-600 dark:text-purple-400 shadow":"text-slate-500 hover:text-slate-700 dark:text-slate-400"])},[...a[37]||(a[37]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1),K(" Fluxo Completo ",-1)])],2)])])),e("div",os,[G.value&&!y(k)?(o(),r("form",{key:0,id:"flow-form",onSubmit:tt(M,["prevent"]),class:"space-y-6"},[e("div",rs,[a[49]||(a[49]=e("h4",{class:"text-xs font-bold uppercase text-purple-800 dark:text-purple-300 mb-4 flex items-center gap-2"},"ConfiguraÃ§Ã£o do Fluxo",-1)),e("div",ns,[e("div",ds,[a[39]||(a[39]=e("label",{class:"block text-xs font-bold text-slate-600 dark:text-slate-400 mb-1.5 uppercase"},"Squad",-1)),E(e("select",{"onUpdate:modelValue":a[2]||(a[2]=c=>n.value.squadId=c),class:"w-full rounded-lg border-slate-300 dark:border-slate-600 p-2.5 text-sm dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-purple-500 shadow-sm font-medium"},[a[38]||(a[38]=e("option",{value:""},"-- Selecione a Squad --",-1)),(o(!0),r(B,null,z(y(L).squads,c=>(o(),r("option",{key:c.id,value:c.id},v(c.name),9,is))),128))],512),[[ke,n.value.squadId]])]),e("div",us,[a[40]||(a[40]=e("label",{class:"block text-xs font-bold text-slate-600 dark:text-slate-400 mb-1.5 uppercase"},"Nome da Feature (Base)",-1)),E(e("input",{"onUpdate:modelValue":a[3]||(a[3]=c=>n.value.featureName=c),type:"text",placeholder:"Ex: CriaÃ§Ã£o de Login",class:"w-full rounded-lg border-slate-300 dark:border-slate-600 p-2.5 text-sm font-medium focus:ring-2 focus:ring-purple-500 focus:border-transparent dark:bg-slate-800 dark:text-white transition-all shadow-sm placeholder-slate-400",required:"",autofocus:""},null,512),[[re,n.value.featureName]])]),e("div",null,[a[42]||(a[42]=e("label",{class:"block text-xs font-bold text-slate-600 dark:text-slate-400 mb-1.5 uppercase"},"Sprint",-1)),E(e("select",{"onUpdate:modelValue":a[4]||(a[4]=c=>n.value.sprintId=c),class:"w-full rounded-lg border-slate-300 dark:border-slate-600 p-2.5 text-sm dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-purple-500 shadow-sm font-medium",disabled:!n.value.squadId},[a[41]||(a[41]=e("option",{value:""},"-- NÃ£o Planejado --",-1)),(o(!0),r(B,null,z(J.value,c=>(o(),r("option",{key:c.id,value:c.id},v(c.name),9,ps))),128))],8,cs),[[ke,n.value.sprintId]]),se.value?(o(),r("div",bs,"Squad: "+v(se.value.name),1)):O("",!0)]),e("div",null,[a[43]||(a[43]=e("label",{class:"block text-xs font-bold text-slate-600 dark:text-slate-400 mb-1.5 uppercase"},"US ID",-1)),E(e("input",{"onUpdate:modelValue":a[5]||(a[5]=c=>n.value.usId=c),type:"text",placeholder:"Ex: US-200",class:"w-full rounded-lg border-slate-300 dark:border-slate-600 p-2.5 text-sm dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-purple-500 shadow-sm font-medium"},null,512),[[re,n.value.usId]])]),e("div",fs,[e("div",null,[a[46]||(a[46]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-1.5"},"Prioridade",-1)),e("div",vs,[e("label",ms,[E(e("input",{type:"radio","onUpdate:modelValue":a[6]||(a[6]=c=>n.value.usType=c),value:"goal",class:"peer sr-only"},null,512),[[Je,n.value.usType]]),a[44]||(a[44]=e("div",{class:"text-center py-2 px-2 rounded-md border border-slate-200 dark:border-slate-600 peer-checked:bg-amber-100 peer-checked:text-amber-800 peer-checked:border-amber-300 dark:peer-checked:bg-amber-900/40 dark:peer-checked:text-amber-200 dark:text-slate-300 transition-all text-xs font-bold shadow-sm hover:bg-slate-50 dark:hover:bg-slate-700"}," ðŸ† Meta ",-1))]),e("label",xs,[E(e("input",{type:"radio","onUpdate:modelValue":a[7]||(a[7]=c=>n.value.usType=c),value:"item",class:"peer sr-only"},null,512),[[Je,n.value.usType]]),a[45]||(a[45]=e("div",{class:"text-center py-2 px-2 rounded-md border border-slate-200 dark:border-slate-600 peer-checked:bg-slate-200 peer-checked:text-slate-800 dark:peer-checked:bg-slate-600 dark:peer-checked:text-white dark:text-slate-300 transition-all text-xs font-bold shadow-sm hover:bg-slate-50 dark:hover:bg-slate-700"}," ðŸ“ Item ",-1))])])]),e("div",null,[a[47]||(a[47]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-1.5"},"ClassificaÃ§Ã£o",-1)),E(e("input",{"onUpdate:modelValue":a[8]||(a[8]=c=>n.value.classification=c),type:"number",class:"w-full rounded-md border-slate-300 dark:border-slate-600 p-2 text-sm dark:bg-slate-700 dark:text-white focus:ring-2 focus:ring-purple-500 shadow-sm font-medium",placeholder:"0"},null,512),[[re,n.value.classification,void 0,{number:!0}]])])]),e("div",gs,[E(e("input",{type:"checkbox",id:"isFullstack","onUpdate:modelValue":a[9]||(a[9]=c=>n.value.isFullstack=c),class:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500 border-slate-300"},null,512),[[Fe,n.value.isFullstack]]),a[48]||(a[48]=e("label",{for:"isFullstack",class:"text-sm font-bold text-slate-700 dark:text-slate-300 cursor-pointer select-none"},"Feature Fullstack (Remove etapa de Frontend)",-1))])])]),e("div",ks,[e("div",{class:Q(["flex gap-3 items-start p-3 rounded-lg border transition-all shadow-sm",n.value.backend.enabled?"border-green-200 bg-green-50/50 dark:border-green-900/30 dark:bg-green-900/10":"border-slate-100 bg-slate-50 opacity-60"])},[e("div",hs,[E(e("input",{type:"checkbox","onUpdate:modelValue":a[10]||(a[10]=c=>n.value.backend.enabled=c),class:"rounded text-green-600 focus:ring-green-500 w-4 h-4"},null,512),[[Fe,n.value.backend.enabled]])]),e("div",ys,[e("div",ws,"1. "+v(n.value.isFullstack?"Fullstack":"Backend"),1),e("div",null,[E(e("select",{"onUpdate:modelValue":a[11]||(a[11]=c=>n.value.backend.responsible=c),disabled:!n.value.backend.enabled||!n.value.squadId,class:"w-full rounded-md border-slate-300 dark:border-slate-600 p-2 text-xs dark:bg-slate-800 dark:text-white font-medium"},[a[50]||(a[50]=e("option",{value:""},"ResponsÃ¡vel",-1)),(o(!0),r(B,null,z($e("backend",n.value.squadId),c=>(o(),r("option",{key:c.name,value:c.name},v(c.name),9,Ds))),128))],8,$s),[[ke,n.value.backend.responsible]])]),e("div",null,[E(e("input",{"onUpdate:modelValue":a[12]||(a[12]=c=>n.value.backend.effort=c),type:"number",placeholder:"Horas",disabled:!n.value.backend.enabled,class:"w-full rounded-md border-slate-300 dark:border-slate-600 p-2 text-xs dark:bg-slate-800 dark:text-white font-medium"},null,8,Ms),[[re,n.value.backend.effort,void 0,{number:!0}]])])])],2),n.value.isFullstack?O("",!0):(o(),r("div",{key:0,class:Q(["flex gap-3 items-start p-3 rounded-lg border transition-all shadow-sm",n.value.frontend.enabled?"border-blue-200 bg-blue-50/50 dark:border-blue-900/30 dark:bg-blue-900/10":"border-slate-100 bg-slate-50 opacity-60"])},[e("div",_s,[E(e("input",{type:"checkbox","onUpdate:modelValue":a[13]||(a[13]=c=>n.value.frontend.enabled=c),class:"rounded text-blue-600 focus:ring-blue-500 w-4 h-4"},null,512),[[Fe,n.value.frontend.enabled]])]),e("div",Cs,[a[52]||(a[52]=e("div",{class:"col-span-2 text-xs font-bold text-blue-800 dark:text-blue-400 uppercase tracking-wide"},"2. Frontend",-1)),e("div",null,[E(e("select",{"onUpdate:modelValue":a[14]||(a[14]=c=>n.value.frontend.responsible=c),disabled:!n.value.frontend.enabled||!n.value.squadId,class:"w-full rounded-md border-slate-300 dark:border-slate-600 p-2 text-xs dark:bg-slate-800 dark:text-white font-medium"},[a[51]||(a[51]=e("option",{value:""},"ResponsÃ¡vel",-1)),(o(!0),r(B,null,z($e("frontend",n.value.squadId),c=>(o(),r("option",{key:c.name,value:c.name},v(c.name),9,Is))),128))],8,Ss),[[ke,n.value.frontend.responsible]])]),e("div",null,[E(e("input",{"onUpdate:modelValue":a[15]||(a[15]=c=>n.value.frontend.effort=c),type:"number",placeholder:"Horas",disabled:!n.value.frontend.enabled,class:"w-full rounded-md border-slate-300 dark:border-slate-600 p-2 text-xs dark:bg-slate-800 dark:text-white font-medium"},null,8,qs),[[re,n.value.frontend.effort,void 0,{number:!0}]])])])],2)),e("div",{class:Q(["flex gap-3 items-start p-3 rounded-lg border transition-all shadow-sm",n.value.qa.enabled?"border-purple-200 bg-purple-50/50 dark:border-purple-900/30 dark:bg-purple-900/10":"border-slate-100 bg-slate-50 opacity-60"])},[e("div",js,[E(e("input",{type:"checkbox","onUpdate:modelValue":a[16]||(a[16]=c=>n.value.qa.enabled=c),class:"rounded text-purple-600 focus:ring-purple-500 w-4 h-4"},null,512),[[Fe,n.value.qa.enabled]])]),e("div",Ts,[e("div",Es,v(n.value.isFullstack?"2.":"3.")+" QA / Teste",1),e("div",null,[E(e("select",{"onUpdate:modelValue":a[17]||(a[17]=c=>n.value.qa.responsible=c),disabled:!n.value.qa.enabled||!n.value.squadId,class:"w-full rounded-md border-slate-300 dark:border-slate-600 p-2 text-xs dark:bg-slate-800 dark:text-white font-medium"},[a[53]||(a[53]=e("option",{value:""},"ResponsÃ¡vel",-1)),(o(!0),r(B,null,z($e("qualidade",n.value.squadId),c=>(o(),r("option",{key:c.name,value:c.name},v(c.name),9,As))),128))],8,Os),[[ke,n.value.qa.responsible]])]),e("div",null,[E(e("input",{"onUpdate:modelValue":a[18]||(a[18]=c=>n.value.qa.effort=c),type:"number",placeholder:"Horas",disabled:!n.value.qa.enabled,class:"w-full rounded-md border-slate-300 dark:border-slate-600 p-2 text-xs dark:bg-slate-800 dark:text-white font-medium"},null,8,Vs),[[re,n.value.qa.effort,void 0,{number:!0}]])])])],2)])],32)):(o(),r("form",{key:1,id:"simple-form",onSubmit:tt(W,["prevent"]),class:"space-y-6 animate-fade-in"},[e("div",null,[a[55]||(a[55]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-1.5 uppercase"},"Squad",-1)),E(e("select",{"onUpdate:modelValue":a[19]||(a[19]=c=>i.value.squadId=c),class:"w-full rounded-lg border-slate-300 dark:border-slate-600 shadow-sm p-2.5 text-sm dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"},[a[54]||(a[54]=e("option",{value:""},"-- Selecione a Squad --",-1)),(o(!0),r(B,null,z(y(L).squads,c=>(o(),r("option",{key:c.id,value:c.id},v(c.name),9,Ns))),128))],512),[[ke,i.value.squadId]])]),e("div",Us,[e("div",null,[a[56]||(a[56]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-1.5 uppercase"},"ID da US",-1)),E(e("input",{"onUpdate:modelValue":a[20]||(a[20]=c=>i.value.usId=c),type:"text",placeholder:"Ex: US-104",class:"w-full rounded-lg border-slate-300 dark:border-slate-600 shadow-sm p-2.5 border focus:ring-2 focus:ring-blue-500 focus:outline-none text-sm bg-white dark:bg-slate-800 text-slate-900 dark:text-white font-medium transition-colors"},null,512),[[re,i.value.usId]])]),e("div",null,[a[57]||(a[57]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-1.5 uppercase"},"ID da Tarefa",-1)),E(e("input",{"onUpdate:modelValue":a[21]||(a[21]=c=>i.value.customId=c),type:"text",placeholder:"Ex: T-01",class:"w-full rounded-lg border-slate-300 dark:border-slate-600 shadow-sm p-2.5 border focus:ring-2 focus:ring-blue-500 focus:outline-none text-sm bg-white dark:bg-slate-800 text-slate-900 dark:text-white font-medium transition-colors"},null,512),[[re,i.value.customId]])])]),e("div",null,[a[58]||(a[58]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-1.5 uppercase"},"Nome da Tarefa",-1)),E(e("input",{"onUpdate:modelValue":a[22]||(a[22]=c=>i.value.name=c),type:"text",placeholder:"Ex: Desenvolver API...",class:"w-full rounded-lg border-slate-300 dark:border-slate-600 shadow-sm p-2.5 border focus:ring-2 focus:ring-blue-500 focus:outline-none text-sm bg-white dark:bg-slate-800 text-slate-900 dark:text-white font-medium transition-colors placeholder-slate-400",required:"",autofocus:""},null,512),[[re,i.value.name]])]),e("div",Rs,[e("div",null,[a[61]||(a[61]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-1.5"},"Prioridade da US",-1)),e("div",Ps,[e("label",Bs,[E(e("input",{type:"radio","onUpdate:modelValue":a[23]||(a[23]=c=>i.value.usType=c),value:"goal",class:"peer sr-only"},null,512),[[Je,i.value.usType]]),a[59]||(a[59]=e("div",{class:"text-center py-2.5 px-3 rounded-lg border border-slate-200 dark:border-slate-600 peer-checked:bg-amber-100 peer-checked:text-amber-800 peer-checked:border-amber-300 dark:peer-checked:bg-amber-900/40 dark:peer-checked:text-amber-200 dark:text-slate-300 transition-all text-sm font-bold shadow-sm hover:bg-slate-50 dark:hover:bg-slate-700"}," ðŸ† Meta ",-1))]),e("label",zs,[E(e("input",{type:"radio","onUpdate:modelValue":a[24]||(a[24]=c=>i.value.usType=c),value:"item",class:"peer sr-only"},null,512),[[Je,i.value.usType]]),a[60]||(a[60]=e("div",{class:"text-center py-2.5 px-3 rounded-lg border border-slate-200 dark:border-slate-600 peer-checked:bg-slate-200 peer-checked:text-slate-800 dark:peer-checked:bg-slate-600 dark:peer-checked:text-white dark:text-slate-300 transition-all text-sm font-bold shadow-sm hover:bg-slate-50 dark:hover:bg-slate-700"}," ðŸ“ Item ",-1))])])]),e("div",null,[a[62]||(a[62]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-1.5"},"ClassificaÃ§Ã£o",-1)),E(e("input",{"onUpdate:modelValue":a[25]||(a[25]=c=>i.value.classification=c),type:"number",placeholder:"0",class:"w-full rounded-lg border-slate-300 dark:border-slate-600 shadow-sm p-2.5 border focus:ring-2 focus:ring-blue-500 focus:outline-none text-sm bg-white dark:bg-slate-800 text-slate-900 dark:text-white font-medium transition-colors"},null,512),[[re,i.value.classification,void 0,{number:!0}]])])]),e("div",Fs,[E(e("input",{type:"checkbox",id:"isMilestone","onUpdate:modelValue":a[26]||(a[26]=c=>i.value.isMilestone=c),class:"w-5 h-5 rounded text-indigo-600 focus:ring-indigo-500 border-indigo-200"},null,512),[[Fe,i.value.isMilestone]]),a[63]||(a[63]=e("label",{for:"isMilestone",class:"text-sm font-bold text-indigo-800 dark:text-indigo-200 cursor-pointer select-none"}," ðŸš© Ã‰ um Marco (Milestone)?",-1))]),i.value.isMilestone?O("",!0):(o(),r("div",Ls,[e("div",null,[a[65]||(a[65]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-1.5 uppercase"},"Tipo da Tarefa",-1)),E(e("select",{"onUpdate:modelValue":a[27]||(a[27]=c=>i.value.type=c),class:"w-full rounded-lg border-slate-300 dark:border-slate-600 shadow-sm p-2.5 border focus:ring-2 focus:ring-blue-500 focus:outline-none text-sm bg-white dark:bg-slate-800 text-slate-900 dark:text-white font-medium transition-colors"},[...a[64]||(a[64]=[e("option",{value:"frontend"},"Front-end",-1),e("option",{value:"backend"},"Back-end",-1),e("option",{value:"qualidade"},"Qualidade",-1),e("option",{value:"other"},"Outro",-1)])],512),[[ke,i.value.type]])]),e("div",null,[a[67]||(a[67]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-2 uppercase"},"Cor da Barra",-1)),e("div",Hs,[(o(),r(B,null,z(_,c=>e("button",{type:"button",key:c,onClick:He=>i.value.color=c,class:Q(["w-9 h-9 rounded-full border-2 transition-transform hover:scale-110 shadow-sm flex items-center justify-center",i.value.color===c?"border-slate-800 dark:border-white scale-110 ring-2 ring-offset-2 ring-offset-white dark:ring-offset-slate-900 ring-slate-300":"border-transparent"]),style:Ie({backgroundColor:c})},[i.value.color===c?(o(),r("svg",Ws,[...a[66]||(a[66]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):O("",!0)],14,Gs)),64))])])])),a[82]||(a[82]=e("hr",{class:"border-slate-100 dark:border-slate-700"},null,-1)),e("div",null,[a[70]||(a[70]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-1.5 uppercase"},"Sprint (Opcional)",-1)),E(e("select",{"onUpdate:modelValue":a[28]||(a[28]=c=>i.value.sprintId=c),class:"w-full rounded-lg border-slate-300 dark:border-slate-600 shadow-sm p-2.5 border focus:ring-2 focus:ring-purple-500 focus:outline-none text-sm bg-white dark:bg-slate-800 text-slate-900 dark:text-white font-medium transition-colors",disabled:!i.value.squadId},[a[68]||(a[68]=e("option",{value:""},"-- Sem Sprint (NÃ£o Planejado) --",-1)),(o(!0),r(B,null,z(A.value,c=>(o(),r("option",{key:c.id,value:c.id},v(c.name),9,Ys))),128))],8,Qs),[[ke,i.value.sprintId]]),he.value?(o(),r("div",Js,[a[69]||(a[69]=e("span",{class:"w-2 h-2 rounded-full bg-indigo-500"},null,-1)),K(" Restrito Ã  Squad: "+v(he.value.name),1)])):O("",!0)]),e("div",Xs,[i.value.isMilestone?O("",!0):(o(),r("div",Ks,[a[72]||(a[72]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-1.5 uppercase"},"ResponsÃ¡vel",-1)),E(e("select",{"onUpdate:modelValue":a[29]||(a[29]=c=>i.value.responsible=c),class:"w-full rounded-lg border-slate-300 dark:border-slate-600 shadow-sm p-2.5 border focus:ring-2 focus:ring-blue-500 focus:outline-none text-sm bg-white dark:bg-slate-800 text-slate-900 dark:text-white font-medium transition-colors",disabled:!i.value.squadId},[a[71]||(a[71]=e("option",{value:""},"-- Selecione --",-1)),(o(!0),r(B,null,z(xe.value,c=>(o(),r("option",{key:c.name,value:c.name},v(c.name)+" ("+v(c.sector||"Geral")+")",9,ea))),128))],8,Zs),[[ke,i.value.responsible]]),i.value.squadId?O("",!0):(o(),r("div",ta,"Selecione uma Squad primeiro"))])),i.value.isMilestone?O("",!0):(o(),r("div",sa,[a[74]||(a[74]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-1.5 uppercase"},"EsforÃ§o Estimado",-1)),e("div",aa,[E(e("input",{"onUpdate:modelValue":a[30]||(a[30]=c=>i.value.effort=c),type:"number",min:"0",class:"w-full rounded-lg border-slate-300 dark:border-slate-600 shadow-sm p-2.5 border focus:ring-2 focus:ring-blue-500 focus:outline-none text-sm pr-12 bg-white dark:bg-slate-800 text-slate-900 dark:text-white font-medium transition-colors"},null,512),[[re,i.value.effort,void 0,{number:!0}]]),a[73]||(a[73]=e("span",{class:"absolute right-3 top-2.5 text-xs text-slate-400 dark:text-slate-500 font-bold"},"HORAS",-1))])]))]),i.value.isMilestone?(o(),r("div",na,[a[80]||(a[80]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-1.5 uppercase"},"DependÃªncia (Define a data do Marco)",-1)),E(e("select",{"onUpdate:modelValue":a[33]||(a[33]=c=>i.value.dependencyId=c),class:"w-full rounded-lg border-slate-300 dark:border-slate-600 shadow-sm p-2.5 border focus:ring-2 focus:ring-blue-500 focus:outline-none text-sm bg-white dark:bg-slate-800 text-slate-900 dark:text-white font-medium transition-colors"},[a[79]||(a[79]=e("option",{value:""},"Nenhuma (InÃ­cio do Projeto)",-1)),(o(!0),r(B,null,z(y(h),c=>E((o(),r("option",{key:c.id,value:c.id},v(c.name),9,da)),[[vt,!y(k)||c.id!==y(k).id]])),128))],512),[[ke,i.value.dependencyId]])])):(o(),r("div",la,[e("div",null,[a[76]||(a[76]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-1.5 uppercase"},"DuraÃ§Ã£o (Dias)",-1)),e("div",oa,[E(e("input",{"onUpdate:modelValue":a[31]||(a[31]=c=>i.value.duration=c),type:"number",min:"1",class:"w-full rounded-lg border-slate-300 dark:border-slate-600 shadow-sm p-2.5 border focus:ring-2 focus:ring-blue-500 focus:outline-none bg-slate-50 dark:bg-slate-700 text-slate-600 dark:text-slate-200 text-sm pr-10 transition-colors font-medium cursor-not-allowed",title:"Calculado automaticamente baseado no esforÃ§o e capacidade",readonly:""},null,512),[[re,i.value.duration,void 0,{number:!0}]]),a[75]||(a[75]=e("span",{class:"absolute right-3 top-2.5 text-xs text-slate-400 dark:text-slate-400 font-bold"},"DIAS",-1))])]),e("div",null,[a[78]||(a[78]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-1.5 uppercase"},"DependÃªncia",-1)),E(e("select",{"onUpdate:modelValue":a[32]||(a[32]=c=>i.value.dependencyId=c),class:"w-full rounded-lg border-slate-300 dark:border-slate-600 shadow-sm p-2.5 border focus:ring-2 focus:ring-blue-500 focus:outline-none text-sm bg-white dark:bg-slate-800 text-slate-900 dark:text-white font-medium transition-colors"},[a[77]||(a[77]=e("option",{value:""},"Nenhuma",-1)),(o(!0),r(B,null,z(y(h),c=>E((o(),r("option",{key:c.id,value:c.id},v(c.name),9,ra)),[[vt,!y(k)||c.id!==y(k).id]])),128))],512),[[ke,i.value.dependencyId]])])])),oe.value?(o(),r("div",ia,[a[81]||(a[81]=e("svg",{class:"h-5 w-5 flex-shrink-0 text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),e("span",null,v(oe.value),1)])):O("",!0)],32))]),e("div",ua,[e("div",ca,[e("button",{type:"button",onClick:pe,class:"px-5 py-3 rounded-lg border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 font-bold hover:bg-slate-50 dark:hover:bg-slate-700 transition text-sm w-1/3"},"Cancelar"),e("button",{type:"submit",form:me.value,class:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-lg font-bold shadow-lg shadow-blue-200 dark:shadow-none text-sm transition-colors"},v(y(k)?"Salvar AlteraÃ§Ãµes":"Criar Tarefa"),9,pa)]),y(k)?(o(),r("div",ba,[e("button",{type:"button",onClick:j,class:"flex-1 text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 py-2 text-xs font-bold flex items-center justify-center gap-1 transition-colors border border-transparent hover:border-red-100 dark:hover:border-red-900 rounded"},[...a[83]||(a[83]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),K(" Excluir ",-1)])]),e("button",{type:"button",onClick:C,class:Q(["flex-1 py-2 text-xs font-bold flex items-center justify-center gap-1 transition-colors border border-transparent rounded",y(k).isCompleted?"text-slate-500 hover:text-slate-700 hover:bg-slate-100 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:bg-slate-700":"text-green-600 hover:text-green-700 hover:bg-green-50 dark:text-green-400 dark:hover:text-green-300 dark:hover:bg-green-900/30"])},[y(k).isCompleted?(o(),r("svg",va,[...a[85]||(a[85]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):(o(),r("svg",fa,[...a[84]||(a[84]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])),K(" "+v(y(k).isCompleted?"Reabrir":"Concluir"),1)],2)])):O("",!0)])]),Se(kt,{"is-open":u.value,title:"Excluir Tarefa",message:`Tem a certeza que deseja excluir a tarefa '${(X=y(k))==null?void 0:X.name}'?`,onConfirm:T,onCancel:a[34]||(a[34]=c=>u.value=!1)},null,8,["is-open","message"]),Se(kt,{"is-open":b.value,title:(le=y(k))!=null&&le.isCompleted?"Reabrir Tarefa":"Concluir Tarefa",message:(be=y(k))!=null&&be.isCompleted?`Deseja marcar '${(ge=y(k))==null?void 0:ge.name}' como em andamento novamente?`:`Confirmar a conclusÃ£o da tarefa '${(ne=y(k))==null?void 0:ne.name}'?`,onConfirm:De,onCancel:a[35]||(a[35]=c=>b.value=!1)},null,8,["is-open","title","message"])])):O("",!0)]}),_:1}))}}),Re=(F,h)=>{const S=F.__vccOpts||F;for(const[k,f]of h)S[k]=f;return S},xa=Re(ma,[["__scopeId","data-v-0023a999"]]),ga={class:"space-y-6 animate-fade-in pb-10"},ka={class:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col md:flex-row gap-6"},ha={class:"flex-1"},ya=["value"],wa=["value"],$a={key:0,class:"bg-slate-50 dark:bg-slate-800/50 border-2 border-dashed border-slate-200 dark:border-slate-700 rounded-2xl p-20 text-center transition-colors"},Da={key:1,class:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-start"},Ma={class:"space-y-6"},_a={class:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700"},Ca={class:"grid grid-cols-2 gap-6 mb-8"},Sa={class:"space-y-4 mb-8"},Ia={class:"text-sm font-semibold text-slate-700 dark:text-slate-300"},qa=["onUpdate:modelValue"],ja={class:"flex items-center gap-4 pt-6 border-t border-slate-100 dark:border-slate-700"},Ta={class:"bg-slate-900 dark:bg-indigo-950 text-white p-6 rounded-xl shadow-lg border border-slate-800 dark:border-indigo-900 transition-colors"},Ea={class:"grid grid-cols-2 gap-8"},Oa={class:"border-r border-slate-700 dark:border-indigo-900"},Aa={class:"block text-4xl font-black mb-1"},Va={class:"text-emerald-400"},Na={class:"block text-4xl font-black mb-1"},Ua={class:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700"},Ra={class:"bg-slate-50 dark:bg-slate-900/50 p-1 rounded-xl border border-slate-100 dark:border-slate-700"},Pa={class:"space-y-1 max-h-56 overflow-y-auto p-2"},Ba={key:0,class:"text-sm text-green-600 dark:text-green-400 flex items-center gap-2 p-3 font-semibold bg-white dark:bg-slate-800 rounded-lg shadow-sm"},za={class:"space-y-6"},Fa={class:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700"},La={class:"flex gap-3 mb-6"},Ha={class:"flex flex-wrap gap-2"},Ga=["onClick"],Wa={class:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700"},Qa={class:"space-y-4 max-h-[500px] overflow-y-auto pr-2 custom-scrollbar"},Ya={key:0,class:"space-y-4 animate-fade-in"},Ja={class:"flex items-center justify-between"},Xa={class:"font-bold text-base text-slate-700 dark:text-slate-200"},Ka={class:"flex gap-3"},Za={class:"flex gap-3"},el={class:"flex flex-wrap gap-2 mt-3"},tl=["onClick"],sl={key:1,class:"flex justify-between items-center"},al={class:"flex flex-col"},ll={class:"text-base font-bold text-slate-700 dark:text-slate-200"},ol={class:"text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wide"},rl=["onClick"],nl=je({__name:"ProjectConfig",setup(F){const{config:h,addHolidayToSquad:S,removeHolidayFromSquad:k,updateSprintInSquad:f,updateMember:x,addMemberDayOff:R,removeMemberDayOff:D,automaticRisks:L}=Ue(),w=U(""),m=U(""),_=U({id:"",name:"",startDate:"",endDate:"",reviewDate:"",retroDate:"",refinementDate:"",planningDate:"",skipWeekends:!0}),P=U(""),i=U(null),G=U(""),n=U(8),u=H(()=>h.value.squads.find(W=>W.id===w.value)),b=H(()=>{var W;return((W=u.value)==null?void 0:W.sprints)||[]}),A=H(()=>b.value.find(W=>W.id===m.value)),J=H(()=>w.value?h.value.teamMembers.filter(W=>W.squadIds.includes(w.value)):[]);Ae(m,W=>{W&&A.value&&(_.value={...A.value,reviewDate:A.value.reviewDate||"",retroDate:A.value.retroDate||"",refinementDate:A.value.refinementDate||"",planningDate:A.value.planningDate||"",skipWeekends:A.value.skipWeekends??!0})});const se=H(()=>{var p;if(!_.value.startDate||!_.value.endDate)return{working:0,calendar:0};const W=ee(_.value.startDate),M=ee(_.value.endDate),pe=Et({start:W,end:M}),j=pe.length,T=((p=u.value)==null?void 0:p.holidays)||[],C=[_.value.reviewDate,_.value.retroDate,_.value.refinementDate,_.value.planningDate];return{working:pe.filter(a=>{const X=te(a,"yyyy-MM-dd"),le=_.value.skipWeekends&&Ye(a),be=T.includes(X),ge=C.includes(X);return!le&&!be&&!ge}).length,calendar:j}}),he=()=>{w.value&&m.value&&f(w.value,m.value,{..._.value})},me=()=>{P.value&&w.value&&(S(w.value,P.value),P.value="")},$e=W=>{const M=h.value.teamMembers.findIndex(pe=>pe.name===W.name);M!==-1&&(i.value=M,n.value=h.value.teamMembers[M].capacity)},xe=()=>{if(i.value!==null){const W=h.value.teamMembers[i.value];x(i.value,W.name,n.value,W.sector,W.squadIds),i.value=null}},ye=()=>{i.value!==null&&G.value&&(R(i.value,G.value),G.value="")},oe=W=>{"showPicker"in HTMLInputElement.prototype&&W.target.showPicker()},ce=W=>W?te(ee(W),"dd/MM/yyyy"):"-";return(W,M)=>{var pe;return o(),r("div",ga,[e("div",ka,[e("div",ha,[M[10]||(M[10]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2"},"1. Selecione a Squad",-1)),E(e("select",{"onUpdate:modelValue":M[0]||(M[0]=j=>w.value=j),onChange:M[1]||(M[1]=j=>m.value=""),class:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white text-sm font-bold h-12 focus:ring-2 focus:ring-indigo-500 transition-all cursor-pointer"},[M[9]||(M[9]=e("option",{value:"",disabled:""},"Escolha uma Squad",-1)),(o(!0),r(B,null,z(y(h).squads,j=>(o(),r("option",{key:j.id,value:j.id},"Squad: "+v(j.name),9,ya))),128))],544),[[ke,w.value]])]),e("div",{class:Q(["flex-1",{"opacity-50 pointer-events-none":!w.value}])},[M[12]||(M[12]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2"},"2. Selecione a Sprint",-1)),E(e("select",{"onUpdate:modelValue":M[2]||(M[2]=j=>m.value=j),class:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white text-sm font-bold h-12 focus:ring-2 focus:ring-indigo-500 transition-all cursor-pointer"},[M[11]||(M[11]=e("option",{value:"",disabled:""},"Escolha a Sprint para configurar",-1)),(o(!0),r(B,null,z(b.value,j=>(o(),r("option",{key:j.id,value:j.id},v(j.name)+" ("+v(ce(j.startDate))+")",9,wa))),128))],512),[[ke,m.value]])],2)]),m.value?(o(),r("div",Da,[e("div",Ma,[e("div",_a,[M[18]||(M[18]=e("h3",{class:"font-bold text-lg text-slate-800 dark:text-slate-100 mb-6 flex items-center gap-2 border-b border-slate-100 dark:border-slate-700 pb-4"},[e("span",{class:"p-2 bg-blue-100 dark:bg-blue-900/40 rounded-lg text-blue-600 dark:text-blue-400 text-xl"},"ðŸ“…"),K(" PerÃ­odo da Sprint ")],-1)),e("div",Ca,[e("div",null,[M[14]||(M[14]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider"},"InÃ­cio",-1)),E(e("input",{type:"date","onUpdate:modelValue":M[3]||(M[3]=j=>_.value.startDate=j),onChange:he,onClick:oe,class:"w-full rounded-xl border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white text-base h-12 px-4 dark:[color-scheme:dark] focus:ring-2 focus:ring-blue-500 transition-all cursor-pointer shadow-sm"},null,544),[[re,_.value.startDate]])]),e("div",null,[M[15]||(M[15]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider"},"Fim",-1)),E(e("input",{type:"date","onUpdate:modelValue":M[4]||(M[4]=j=>_.value.endDate=j),onChange:he,onClick:oe,class:"w-full rounded-xl border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white text-base h-12 px-4 dark:[color-scheme:dark] focus:ring-2 focus:ring-blue-500 transition-all cursor-pointer shadow-sm"},null,544),[[re,_.value.endDate]])])]),e("div",Sa,[M[16]||(M[16]=e("h4",{class:"text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-widest mb-2"},"Ritos (Dias nÃ£o produtivos)",-1)),(o(),r(B,null,z(["Planning","Refinement","Review","Retrospective"],j=>e("div",{key:j,class:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-900/50 rounded-xl border border-slate-100 dark:border-slate-700/50 hover:border-blue-300 dark:hover:border-blue-700 transition-colors"},[e("span",Ia,v(j),1),E(e("input",{type:"date","onUpdate:modelValue":T=>_.value[`${j.toLowerCase()}Date`]=T,onChange:he,onClick:oe,class:"text-sm font-medium rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white h-10 px-3 dark:[color-scheme:dark] focus:ring-2 focus:ring-blue-500 transition-all cursor-pointer"},null,40,qa),[[re,_.value[`${j.toLowerCase()}Date`]]])])),64))]),e("div",ja,[E(e("input",{type:"checkbox","onUpdate:modelValue":M[5]||(M[5]=j=>_.value.skipWeekends=j),onChange:he,class:"w-6 h-6 rounded border-slate-300 dark:border-slate-600 text-blue-600 focus:ring-blue-500 cursor-pointer",id:"skipW"},null,544),[[Fe,_.value.skipWeekends]]),M[17]||(M[17]=e("label",{for:"skipW",class:"text-base font-semibold text-slate-700 dark:text-slate-300 cursor-pointer select-none"},"Pular Finais de Semana",-1))])]),e("div",Ta,[M[21]||(M[21]=e("h3",{class:"text-xs font-bold uppercase text-slate-400 dark:text-indigo-300 mb-6 tracking-wider"},"Capacidade da Sprint",-1)),e("div",Ea,[e("div",Oa,[e("span",Aa,v(se.value.calendar),1),M[19]||(M[19]=e("span",{class:"text-[11px] font-bold text-slate-500 dark:text-indigo-400 uppercase tracking-wider"},"Dias Corridos",-1))]),e("div",Va,[e("span",Na,v(se.value.working),1),M[20]||(M[20]=e("span",{class:"text-[11px] font-bold text-emerald-600 dark:text-emerald-500 uppercase tracking-wider"},"Dias Ãšteis Produtivos",-1))])])]),e("div",Ua,[M[23]||(M[23]=e("h3",{class:"font-bold text-lg text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2"},[e("div",{class:"p-1.5 bg-red-100 dark:bg-red-900/30 rounded-lg text-red-600 dark:text-red-400"},"âš ï¸"),K(" Riscos Detectados ")],-1)),e("div",Ra,[e("ul",Pa,[y(L).length===0?(o(),r("li",Ba,"âœ… Nenhum risco crÃ­tico detectado.")):O("",!0),(o(!0),r(B,null,z(y(L),(j,T)=>(o(),r("li",{key:T,class:"flex items-start gap-3 p-3 rounded-lg bg-white dark:bg-slate-800 border border-red-100 dark:border-red-900/30 text-sm text-slate-700 dark:text-slate-300 shadow-sm"},[M[22]||(M[22]=e("span",{class:"text-red-500 font-bold text-lg leading-none"},"â€¢",-1)),e("span",null,v(j),1)]))),128))])])])]),e("div",za,[e("div",Fa,[M[24]||(M[24]=e("h3",{class:"font-bold text-lg text-slate-800 dark:text-slate-100 mb-5 flex items-center gap-2 border-b border-slate-100 dark:border-slate-700 pb-4"},[e("span",{class:"p-2 bg-amber-100 dark:bg-amber-900/40 rounded-lg text-amber-600 dark:text-amber-400 text-xl"},"ðŸï¸"),K(" Feriados Coletivos ")],-1)),e("div",La,[E(e("input",{"onUpdate:modelValue":M[6]||(M[6]=j=>P.value=j),type:"date",onClick:oe,class:"flex-1 rounded-xl border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white text-sm h-12 px-4 dark:[color-scheme:dark] focus:ring-2 focus:ring-amber-500 transition-all cursor-pointer"},null,512),[[re,P.value]]),e("button",{onClick:me,class:"bg-amber-500 hover:bg-amber-600 text-white px-6 rounded-xl font-bold transition-all shadow-md active:scale-95 text-lg"},"+")]),e("div",Ha,[(o(!0),r(B,null,z((pe=u.value)==null?void 0:pe.holidays,j=>(o(),r("div",{key:j,class:"flex items-center bg-slate-100 dark:bg-slate-700 px-4 py-2 rounded-lg text-sm font-bold text-slate-700 dark:text-slate-200 border border-slate-200 dark:border-slate-600 group transition-all"},[K(v(ce(j))+" ",1),e("button",{onClick:T=>y(k)(w.value,j),class:"ml-3 text-red-500 opacity-0 group-hover:opacity-100 transition-opacity hover:scale-125 font-black"},"Ã—",8,Ga)]))),128))])]),e("div",Wa,[M[25]||(M[25]=e("h3",{class:"font-bold text-lg text-slate-800 dark:text-slate-100 mb-5 flex items-center gap-2 border-b border-slate-100 dark:border-slate-700 pb-4"},[e("span",{class:"p-2 bg-indigo-100 dark:bg-indigo-900/40 rounded-lg text-indigo-600 dark:text-indigo-400 text-xl"},"ðŸ‘¤"),K(" Day Off Individual ")],-1)),e("div",Qa,[(o(!0),r(B,null,z(J.value,j=>(o(),r("div",{key:j.name,class:"p-4 border rounded-2xl border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-900/30 transition-all hover:shadow-md"},[i.value!==null&&y(h).teamMembers[i.value].name===j.name?(o(),r("div",Ya,[e("div",Ja,[e("span",Xa,v(j.name),1),e("div",Ka,[E(e("input",{"onUpdate:modelValue":M[7]||(M[7]=T=>n.value=T),type:"number",class:"w-20 h-10 px-2 text-sm font-bold rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-green-500"},null,512),[[re,n.value,void 0,{number:!0}]]),e("button",{onClick:xe,class:"text-green-600 font-bold text-sm hover:text-green-700 transition-colors bg-green-50 dark:bg-green-900/20 px-3 rounded-lg"},"OK")])]),e("div",Za,[E(e("input",{"onUpdate:modelValue":M[8]||(M[8]=T=>G.value=T),type:"date",onClick:oe,class:"flex-1 text-sm h-11 px-4 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white dark:[color-scheme:dark] focus:ring-2 focus:ring-indigo-500"},null,512),[[re,G.value]]),e("button",{onClick:ye,class:"bg-indigo-600 hover:bg-indigo-700 text-white px-5 rounded-xl text-lg font-bold transition-all shadow-md active:scale-95"},"+")]),e("div",el,[(o(!0),r(B,null,z(j.daysOff,T=>(o(),r("span",{key:T,class:"bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 px-3 py-1.5 rounded-lg text-xs font-bold flex items-center border border-red-100 dark:border-red-800 group shadow-sm"},[K(v(ce(T))+" ",1),e("button",{onClick:C=>y(D)(i.value,T),class:"ml-2 transition-transform hover:scale-125"},"Ã—",8,tl)]))),128))])])):(o(),r("div",sl,[e("div",al,[e("span",ll,v(j.name),1),e("span",ol,v(j.daysOff.length)+" Folgas",1)]),e("button",{onClick:T=>$e(j),class:"p-3 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 transition-all text-slate-400 dark:text-slate-500 hover:text-indigo-600 dark:hover:text-indigo-400 active:scale-95"}," âš™ï¸ ",8,rl)]))]))),128))])])])])):(o(),r("div",$a,[...M[13]||(M[13]=[e("div",{class:"text-5xl mb-4"},"ðŸ—“ï¸",-1),e("h3",{class:"text-xl font-bold text-slate-600 dark:text-slate-300"},"Aguardando SeleÃ§Ã£o",-1),e("p",{class:"text-sm text-slate-500 dark:text-slate-400 max-w-xs mx-auto mt-2"},"Selecione uma Squad e uma Sprint acima para liberar as configuraÃ§Ãµes.",-1)])]))])}}}),dl=Re(nl,[["__scopeId","data-v-af576a53"]]);function il(){return{exportToPDF:(f,x,R)=>{var _;const D=new Rt;D.setFontSize(18),D.setTextColor(40,40,40),D.text("RelatÃ³rio de Projeto: Gantt-ficator",14,20),D.setFontSize(10),D.setTextColor(100,100,100),D.text(`Gerado em: ${te(new Date,"dd/MM/yyyy HH:mm")}`,14,26),D.line(14,30,196,30),D.setFontSize(12),D.setTextColor(0,0,0),D.text("Resumo Executivo",14,38),D.setFontSize(10);const L=x.projectStartDate?te(new Date(x.projectStartDate),"dd/MM/yyyy"):"N/A",w=x.deadline?te(new Date(x.deadline),"dd/MM/yyyy"):"N/A";D.text(`InÃ­cio: ${L}`,14,45),D.text(`Deadline: ${w}`,80,45),D.text(`Equipe: ${((_=x.teamMembers)==null?void 0:_.length)||0} membros`,140,45);let m=55;R.length>0&&(D.setFontSize(11),D.setTextColor(185,28,28),D.text("âš ï¸ Riscos e Alertas Identificados:",14,m),D.setFontSize(9),D.setTextColor(60,60,60),R.forEach(P=>{m+=6,D.text(`â€¢ ${P}`,14,m)}),m+=10),Pt(D,{startY:m,head:[["Tarefa","Tipo","Resp.","DuraÃ§Ã£o","InÃ­cio","Fim"]],body:f.map(P=>[P.name,P.type.toUpperCase(),P.responsible||"-",`${P.duration}d`,P.formattedStartDate||"",P.formattedEndDate||""]),theme:"grid",headStyles:{fillColor:[59,130,246]},styles:{fontSize:8},alternateRowStyles:{fillColor:[249,250,251]}}),D.save(`Gantt-Relatorio-${te(new Date,"yyyy-MM-dd")}.pdf`)},exportToExcel:(f,x)=>{const R=_e.book_new(),D=_e.json_to_sheet(f.map(m=>({ID:m.id,Nome:m.name,Tipo:m.type,Responsavel:m.responsible,Esforco:m.effort,Duracao:m.duration,Inicio:m.formattedStartDate,Dependencia:m.dependencyId,Sprint_ID:m.sprintId,Meta:m.usType==="goal"?"Sim":"NÃ£o"})));_e.book_append_sheet(R,D,"Tarefas");const L=_e.json_to_sheet(x.squads.map(m=>({ID:m.id,Nome:m.name,Cor:m.color,Inicio_Squad:m.startDate,Prazo_Squad:m.deadline})));_e.book_append_sheet(R,L,"Squads");const w=_e.json_to_sheet(x.teamMembers.map(m=>({Nome:m.name,Capacidade:m.capacity,Setor:m.sector,Squads:m.squadIds.join(", ")})));_e.book_append_sheet(R,w,"Membros"),mt(R,`Gantt-Backup-Completo-${te(new Date,"yyyy-MM-dd")}.xlsx`)},importFromExcel:f=>new Promise((x,R)=>{const D=new FileReader;D.onload=L=>{var w;try{const m=new Uint8Array((w=L.target)==null?void 0:w.result),_=zt(m,{type:"array"}),P=_.Sheets.Tarefas,i=_e.sheet_to_json(P).map(u=>({id:u.ID||crypto.randomUUID(),name:u.Nome,duration:Number(u.Duracao)||1,type:u.Tipo||"other",responsible:u.Responsavel,effort:Number(u.Esforco)||0,dependencyId:u.Dependencia||null,sprintId:u.Sprint_ID,usType:u.Meta==="Sim"?"goal":"item"})),G=_.Sheets.Squads,n=G?_e.sheet_to_json(G).map(u=>({id:u.ID||crypto.randomUUID(),name:u.Nome,color:u.Cor||"#3b82f6",startDate:u.Inicio_Squad||te(new Date,"yyyy-MM-dd"),deadline:u.Prazo_Squad||"",sprints:[],holidays:[],skipWeekends:!0})):[];x({tasks:i,config:{squads:n}})}catch(m){R(m)}},D.readAsArrayBuffer(f)}),downloadImportTemplate:()=>{const f=_e.book_new(),x=[{Nome:"Tarefa Exemplo",Tipo:"backend",Responsavel:"",Esforco:8,Duracao:1,Meta:"Sim"}];_e.book_append_sheet(f,_e.json_to_sheet(x),"Tarefas"),_e.book_append_sheet(f,_e.json_to_sheet([{Nome:"Squad Exemplo",Cor:"#3b82f6"}]),"Squads"),mt(f,"Modelo-Importacao-Gantt.xlsx")},clearAllData:()=>{localStorage.clear()}}}const ul={class:"grid grid-cols-2 md:grid-cols-6 gap-4 animate-fade-in mb-8"},cl=je({__name:"ProjectActions",setup(F){const{exportToExcel:h,exportToPDF:S,downloadImportTemplate:k,importFromExcel:f,clearAllData:x}=il(),{tasks:R,config:D,saveBaseline:L,restoreFullBackup:w}=Ue(),m=pt(),_=U(null),P=()=>{var n;(n=_.value)==null||n.click()},i=async n=>{const u=n.target;if(u.files&&u.files[0])try{const b=await f(u.files[0]);b&&b.tasks.length>0?(w(b.config,b.tasks),m.show("Projeto e configuraÃ§Ãµes importados com sucesso!","success")):m.show("Nenhuma tarefa encontrada no arquivo.","error")}catch(b){console.error(b),m.show('Erro ao ler o arquivo Excel. Verifique se as abas "Tarefas" e "Squads" existem.',"error")}finally{u.value=""}},G=()=>{confirm("Tem certeza? Isso apagarÃ¡ todos os dados locais (Tarefas, Squads e Membros) permanentemente.")&&(x(),window.location.reload())};return(n,u)=>(o(),r("div",ul,[e("div",{class:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group cursor-pointer flex flex-col items-center justify-center gap-2 text-center",onClick:u[0]||(u[0]=b=>y(h)(y(R),y(D)))},[...u[4]||(u[4]=[e("div",{class:"w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center text-green-600 dark:text-green-400 group-hover:scale-110 transition-transform"},[e("svg",{class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1),e("div",null,[e("h3",{class:"font-bold text-slate-700 dark:text-slate-200 text-sm"},"Salvar Excel")],-1)])]),e("div",{class:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group cursor-pointer flex flex-col items-center justify-center gap-2 text-center",onClick:u[1]||(u[1]=b=>y(S)(y(R),y(D),[]))},[...u[5]||(u[5]=[e("div",{class:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-lg flex items-center justify-center text-red-600 dark:text-red-400 group-hover:scale-110 transition-transform"},[e("svg",{class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})])],-1),e("div",null,[e("h3",{class:"font-bold text-slate-700 dark:text-slate-200 text-sm"},"Gerar PDF")],-1)])]),e("div",{class:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group cursor-pointer flex flex-col items-center justify-center gap-2 text-center",onClick:u[2]||(u[2]=(...b)=>y(k)&&y(k)(...b))},[...u[6]||(u[6]=[e("div",{class:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center text-blue-600 dark:text-blue-400 group-hover:scale-110 transition-transform"},[e("svg",{class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})])],-1),e("div",null,[e("h3",{class:"font-bold text-slate-700 dark:text-slate-200 text-sm"},"Baixar Modelo")],-1)])]),e("div",{class:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group cursor-pointer flex flex-col items-center justify-center gap-2 text-center",onClick:P},[e("input",{type:"file",ref_key:"fileInput",ref:_,class:"hidden",onChange:i,accept:".xlsx"},null,544),u[7]||(u[7]=e("div",{class:"w-10 h-10 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center text-purple-600 dark:text-purple-400 group-hover:scale-110 transition-transform"},[e("svg",{class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})])],-1)),u[8]||(u[8]=e("div",null,[e("h3",{class:"font-bold text-slate-700 dark:text-slate-200 text-sm"},"Importar Dados")],-1))]),e("div",{class:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group cursor-pointer flex flex-col items-center justify-center gap-2 text-center",onClick:u[3]||(u[3]=(...b)=>y(L)&&y(L)(...b))},[...u[9]||(u[9]=[e("div",{class:"w-10 h-10 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg flex items-center justify-center text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition-transform"},[e("svg",{class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})])],-1),e("div",null,[e("h3",{class:"font-bold text-slate-700 dark:text-slate-200 text-sm"},"Definir Baseline")],-1)])]),e("div",{class:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-red-200 dark:border-red-900/50 shadow-sm hover:shadow-md transition-all group cursor-pointer flex flex-col items-center justify-center gap-2 text-center",onClick:G},[...u[10]||(u[10]=[e("div",{class:"w-10 h-10 bg-slate-100 dark:bg-slate-700 rounded-lg flex items-center justify-center text-slate-500 dark:text-slate-400 group-hover:bg-red-100 dark:group-hover:bg-red-900/50 group-hover:text-red-600 transition-colors"},[e("svg",{class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})])],-1),e("div",null,[e("h3",{class:"font-bold text-slate-700 dark:text-slate-200 text-sm group-hover:text-red-600 transition-colors"},"Resetar")],-1)])])]))}}),pl={class:"bg-white dark:bg-slate-800 rounded-lg shadow overflow-hidden border border-slate-200 dark:border-slate-700 flex flex-col h-full select-none transition-colors duration-300"},bl={class:"p-4 border-b border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 flex flex-col gap-3 z-30 relative shadow-sm"},fl={class:"flex flex-col lg:flex-row justify-between items-start lg:items-center w-full gap-4"},vl={class:"flex flex-col sm:flex-row items-start sm:items-center gap-4 w-full lg:w-auto"},ml={key:0,class:"flex items-center gap-2"},xl=["value"],gl={class:"flex bg-slate-100 dark:bg-slate-700 rounded-lg p-1 gap-1 overflow-x-auto max-w-full"},kl={key:1,class:"flex items-center gap-2 lg:ml-4 self-center sm:self-auto"},hl={class:"text-sm font-bold text-slate-800 dark:text-slate-200 min-w-[120px] text-center select-none uppercase text-[11px] tracking-wide"},yl={class:"relative ml-auto z-30 flex items-center gap-3"},wl={class:"flex items-center bg-slate-100 dark:bg-slate-700 rounded-lg p-1 border border-slate-200 dark:border-slate-600"},$l={class:"flex items-center gap-1"},Dl={class:"relative"},Ml={key:0,class:"w-4 h-4 animate-pulse",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},_l={key:1,class:"w-4 h-4 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Cl={key:2,class:"bg-red-500 text-white text-[9px] px-1 rounded-full"},Sl={key:0,class:"absolute right-0 top-full mt-2 w-80 bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-200 dark:border-slate-700 overflow-hidden animate-fade-in z-50"},Il={class:"p-3 border-b border-slate-100 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50 flex justify-between items-center"},ql={class:"max-h-60 overflow-y-auto p-2 custom-scrollbar"},jl={class:"space-y-1"},Tl={key:0,class:"text-center p-4 text-slate-400 text-xs"},El={class:"relative flex h-2 w-2"},Ol={key:0,class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"},Al={class:"flex flex-col lg:flex-row items-stretch lg:items-center gap-2 pt-3 border-t border-slate-100 dark:border-slate-700"},Vl={class:"relative group flex-1 max-w-full lg:max-w-xs"},Nl={class:"flex gap-2 w-full lg:w-auto"},Ul=["value"],Rl={class:"sticky top-0 z-20 shadow-sm"},Pl={class:"flex bg-slate-100 dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 h-[25px] text-xs text-slate-500 dark:text-slate-400 uppercase tracking-wider font-bold"},Bl={class:"flex border-b border-slate-200 dark:border-slate-700 h-[30px] bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300"},zl=["title"],Fl={class:"font-bold"},Ll={class:"text-[8px] uppercase"},Hl={class:"absolute inset-0 flex pointer-events-none"},Gl={class:"relative"},Wl={class:"absolute inset-0 flex pointer-events-none"},Ql=["width","height"],Yl=["d","stroke-width"],Jl={class:"py-2 space-y-1 relative z-10"},Xl={key:0,class:"sticky left-0 bg-slate-100/90 dark:bg-slate-800/90 backdrop-blur-sm border-y border-slate-200 dark:border-slate-700 px-4 py-1.5 text-xs font-bold text-slate-600 dark:text-slate-300 uppercase tracking-wider flex items-center gap-2 z-10 my-2"},Kl={class:"ml-auto text-[9px] bg-slate-200 dark:bg-slate-700 px-1.5 rounded text-slate-500"},Zl=["onMousedown"],eo={key:0,class:"bg-amber-100 dark:bg-amber-900 text-amber-700 dark:text-amber-200 rounded-full px-1 text-[9px] font-bold"},to={key:1,class:"bg-green-500 text-white rounded-full px-1 text-[9px] font-bold"},so={key:1,class:"absolute right-1 top-0.5 w-5 h-5 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center text-[9px] font-bold border border-white/40 shadow-sm"},ao={key:0,class:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4"},lo={class:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[80vh]"},oo={class:"p-4 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center bg-indigo-50 dark:bg-indigo-900/20"},ro={class:"p-6 overflow-y-auto custom-scrollbar space-y-4"},no={key:0,class:"space-y-2"},io={class:"text-xl mt-[-2px]"},uo={class:"p-4 border-t border-slate-100 dark:border-slate-700 flex justify-end"},co=je({__name:"GanttChart",setup(F){const{filteredTasks:h,config:S,totalProjectDays:k,setEditingTask:f,editingTask:x,criticalPathIds:R,viewMode:D,visibleDateRange:L,setViewMode:w,navigateView:m,currentViewDate:_,filterSearch:P,filterResponsible:i,filterType:G,filterSquad:n,moveTask:u,automaticRisks:b,getOptimizationSuggestions:A,createSnapshot:J,restoreSnapshot:se,tasksSnapshot:he}=Ue(),me=U(!1),$e=U(!1),xe=U(null),ye=U(0),oe=U("none"),ce=U(!1),W=U(null),M=U(0),pe=U(0),j=U(!1),T=U([]),C=()=>{he.value||J(),T.value=A(),j.value=!0},De=()=>{confirm("Deseja descartar todas as alteraÃ§Ãµes atuais e voltar para o ponto salvo?")&&se()},p=()=>{J()},a=(N,t)=>{N.button!==0||D.value==="month"||(N.stopPropagation(),ce.value=!0,W.value=t.id,M.value=N.clientX,pe.value=N.clientX,window.addEventListener("mousemove",X),window.addEventListener("mouseup",le))},X=N=>{ce.value&&(pe.value=N.clientX)},le=()=>{if(!ce.value)return;const N=pe.value-M.value;if(Math.abs(N)<5){const t=h.value.find(s=>s.id===W.value);t&&f(t)}else{const t=Math.round(N/ne.value);if(t!==0){const s=h.value.find(l=>l.id===W.value);if(s&&s.startDate){const l=Te(s.startDate,t);u(s.id,l)}}}ce.value=!1,W.value=null,window.removeEventListener("mousemove",X),window.removeEventListener("mouseup",le)},be=()=>{xe.value&&(ye.value=xe.value.clientWidth)};let ge=null;Dt(()=>{be(),window.addEventListener("resize",be),xe.value&&(ge=new ResizeObserver(()=>be()),ge.observe(xe.value)),Ot(()=>{xe.value&&(xe.value.scrollLeft=0)})}),At(()=>{window.removeEventListener("resize",be),ge&&ge.disconnect()});const ne=H(()=>{switch(D.value){case"week":return ye.value>0?ye.value/7:100;case"month":return 40;default:return 40}}),c=H(()=>D.value==="week"?ye.value:k.value*ne.value),He=N=>{if(!N.startDate)return{};const t=L.value.start;let l=Ce(N.startDate,t)*ne.value;if(ce.value&&W.value===N.id){const d=pe.value-M.value;l+=d}return{left:l+"px",width:(N.calendarDuration||1)*ne.value+"px",backgroundColor:N.isMilestone?"#1e293b":N.color,cursor:D.value==="month"?"default":ce.value?"grabbing":"grab",zIndex:ce.value&&W.value===N.id?50:10}},st=H(()=>{if(oe.value==="none")return[{id:"all",title:"",tasks:h.value}];const N={};return h.value.forEach(t=>{let s="";if(oe.value==="responsible")s=t.responsible||"Sem ResponsÃ¡vel";else if(oe.value==="sprint")if(t.sprintId){const l=S.value.sprints.find(d=>d.id===t.sprintId);if(l)if(!n.value&&l.squadId){const d=S.value.squads.find(g=>g.id===l.squadId);s=d?`${d.name} : ${l.name}`:l.name}else s=l.name;else s="Sprint Desconhecida"}else s="NÃ£o Planejado";N[s]||(N[s]=[]),N[s].push(t)}),Object.keys(N).sort().map(t=>({id:t,title:t,tasks:N[t]}))}),at=H(()=>{if(D.value==="project")return"VisÃ£o Geral";const N=_.value;if(D.value==="month")return te(N,"MMMM yyyy",{locale:Xe}).toUpperCase();if(D.value==="week"){const t=wt(N,{weekStartsOn:0}),s=yt(N,{weekStartsOn:0});return`${te(t,"dd/MM")} - ${te(s,"dd/MM")}`}return""}),Ee=H(()=>{const N=L.value.start;return Array.from({length:k.value},(t,s)=>{var V;const l=Te(N,s),d=te(l,"yyyy-MM-dd"),g=S.value.squads.flatMap(q=>q.sprints).find(q=>d>=q.startDate&&d<=q.endDate),I=g?[g.planningDate,g.refinementDate,g.reviewDate,g.retroDate].includes(d):!1;return{date:l,label:te(l,"dd",{locale:Xe}),dayName:te(l,"EEE",{locale:Xe}).replace(".","").toUpperCase(),fullDate:te(l,"dd/MM/yyyy"),isWeekend:Ye(l),isHoliday:S.value.holidays.includes(d)||(n.value?(V=S.value.squads.find(q=>q.id===n.value))==null?void 0:V.holidays.includes(d):!1),isEvent:I,eventTitle:I?"Rito da Sprint (Dia nÃ£o produtivo)":""}})}),lt=H(()=>{if(Ee.value.length===0)return[];const N=[];let t="",s=0;return Ee.value.forEach((l,d)=>{const g=te(l.date,"MMMM yyyy",{locale:Xe});g!==t?(t!==""&&N.push({label:t,count:s}),t=g,s=1):s++,d===Ee.value.length-1&&N.push({label:t,count:s})}),N}),ot=H(()=>{const N=[];if(oe.value!=="none")return[];const t=new Map;return h.value.forEach((s,l)=>t.set(s.id,{index:l,task:s})),h.value.forEach((s,l)=>{if(s.dependencyId&&t.has(s.dependencyId)){const d=t.get(s.dependencyId),g=L.value.start,V=(Ce(d.task.startDate,g)+(d.task.isMilestone?1:d.task.calendarDuration||1))*ne.value,q=d.index*40+20,ue=Ce(s.startDate,g)*ne.value,we=l*40+20,de=15,Y=`M ${V} ${q} L ${V+de} ${q} L ${V+de} ${we} L ${ue} ${we}`,fe=R.value.includes(s.id)&&R.value.includes(d.task.id);N.push({path:Y,isCritical:fe})}}),N}),rt=N=>N?N.split(" ").map(t=>t[0]).slice(0,2).join("").toUpperCase():"?",Ge=N=>{if(N.isMilestone||!N.effort||!N.duration||N.isCompleted)return!1;const t=S.value.teamMembers.find(l=>l.name===N.responsible),s=t?t.capacity:8;return N.effort>N.duration*s},nt=()=>{P.value="",i.value="",G.value=""},dt=H(()=>P.value||i.value||G.value);return(N,t)=>(o(),r("div",pl,[e("div",bl,[e("div",fl,[e("div",vl,[t[18]||(t[18]=e("h2",{class:"font-bold text-slate-700 dark:text-slate-200 flex items-center gap-2"},"Gantt",-1)),y(S).squads.length>0?(o(),r("div",ml,[E(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>Ke(n)?n.value=s:null),class:"bg-indigo-50 dark:bg-slate-950 text-indigo-700 dark:text-indigo-100 font-bold text-xs py-1.5 px-2 rounded border border-indigo-200 dark:border-indigo-900 cursor-pointer focus:ring-2 focus:ring-indigo-500 outline-none transition-colors dark:[color-scheme:dark]"},[t[17]||(t[17]=e("option",{value:""},"Todas as Squads (Overview)",-1)),(o(!0),r(B,null,z(y(S).squads,s=>(o(),r("option",{key:s.id,value:s.id},v(s.name),9,xl))),128))],512),[[ke,y(n)]])])):O("",!0),e("div",gl,[e("button",{onClick:t[1]||(t[1]=s=>y(w)("project")),class:Q(["px-3 py-1 text-xs font-medium rounded transition-all whitespace-nowrap",y(D)==="project"?"bg-white dark:bg-slate-600 text-blue-600 dark:text-blue-300 shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200"])}," Projeto ",2),e("button",{onClick:t[2]||(t[2]=s=>y(w)("month")),class:Q(["px-3 py-1 text-xs font-medium rounded transition-all whitespace-nowrap",y(D)==="month"?"bg-white dark:bg-slate-600 text-blue-600 dark:text-blue-300 shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200"])}," MÃªs ",2),e("button",{onClick:t[3]||(t[3]=s=>y(w)("week")),class:Q(["px-3 py-1 text-xs font-medium rounded transition-all whitespace-nowrap",y(D)==="week"?"bg-white dark:bg-slate-600 text-blue-600 dark:text-blue-300 shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200"])}," Semana ",2)]),y(D)!=="project"?(o(),r("div",kl,[e("button",{onClick:t[4]||(t[4]=s=>y(m)("prev")),class:"w-7 h-7 flex items-center justify-center rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-600 transition-colors"},"<"),e("span",hl,v(at.value),1),e("button",{onClick:t[5]||(t[5]=s=>y(m)("next")),class:"w-7 h-7 flex items-center justify-center rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-600 transition-colors"},">")])):O("",!0)]),e("div",yl,[e("div",wl,[e("button",{onClick:t[6]||(t[6]=s=>oe.value="none"),class:Q(["px-2 py-1 text-[10px] uppercase font-bold rounded",oe.value==="none"?"bg-white dark:bg-slate-600 shadow-sm text-slate-800 dark:text-white":"text-slate-400 hover:text-slate-600"])},"Lista",2),e("button",{onClick:t[7]||(t[7]=s=>oe.value="responsible"),class:Q(["px-2 py-1 text-[10px] uppercase font-bold rounded",oe.value==="responsible"?"bg-white dark:bg-slate-600 shadow-sm text-slate-800 dark:text-white":"text-slate-400 hover:text-slate-600"])},"Pessoa",2),e("button",{onClick:t[8]||(t[8]=s=>oe.value="sprint"),class:Q(["px-2 py-1 text-[10px] uppercase font-bold rounded",oe.value==="sprint"?"bg-white dark:bg-slate-600 shadow-sm text-slate-800 dark:text-white":"text-slate-400 hover:text-slate-600"])},"Sprint",2)]),e("div",$l,[e("button",{onClick:p,class:"p-1.5 rounded-lg border transition-all text-xs font-bold text-slate-500 border-slate-200 hover:bg-slate-100 dark:text-slate-400 dark:border-slate-600 dark:hover:bg-slate-700",title:"Salvar Estado Atual (Backup)"},[...t[19]||(t[19]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1)])]),y(he)?(o(),r("button",{key:0,onClick:De,class:"p-1.5 rounded-lg border transition-all text-xs font-bold bg-amber-50 text-amber-600 border-amber-200 hover:bg-amber-100 dark:bg-amber-900/30 dark:text-amber-400 dark:border-amber-800",title:"Desfazer AlteraÃ§Ãµes (Restaurar Backup)"},[...t[20]||(t[20]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})],-1)])])):O("",!0),e("button",{onClick:C,class:"flex items-center gap-2 px-3 py-1.5 rounded-lg border transition-all text-xs font-bold bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300 border-indigo-200 dark:border-indigo-800 hover:bg-indigo-100"},[...t[21]||(t[21]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1),e("span",{class:"hidden xl:inline"},"Otimizar",-1)])])]),e("div",Dl,[e("button",{onClick:t[9]||(t[9]=s=>$e.value=!$e.value),class:Q(["flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-bold transition-all shadow-sm border",y(b).length>0?"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 border-red-200 dark:border-red-800 hover:bg-red-100":"bg-white dark:bg-slate-800 text-slate-500 border-slate-200 hover:bg-slate-50"])},[y(b).length>0?(o(),r("svg",Ml,[...t[22]||(t[22]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"},null,-1)])])):(o(),r("svg",_l,[...t[23]||(t[23]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])),t[24]||(t[24]=e("span",{class:"hidden xl:inline"},"Riscos",-1)),y(b).length>0?(o(),r("span",Cl,v(y(b).length),1)):O("",!0)],2),$e.value?(o(),r("div",Sl,[e("div",Il,[t[25]||(t[25]=e("h3",{class:"font-bold text-slate-700 dark:text-slate-200 text-xs"},"Alertas",-1)),e("button",{onClick:t[10]||(t[10]=s=>$e.value=!1),class:"text-slate-400 hover:text-slate-600"},"Ã—")]),e("div",ql,[e("ul",jl,[(o(!0),r(B,null,z(y(b),(s,l)=>(o(),r("li",{key:l,class:"text-[10px] p-2 rounded bg-red-50 dark:bg-red-900/10 text-red-800 dark:text-red-300 border border-red-100 dark:border-red-900/30"},v(s),1))),128))]),y(b).length===0?(o(),r("div",Tl,"Sem riscos.")):O("",!0)])])):O("",!0)]),e("button",{onClick:t[11]||(t[11]=s=>me.value=!me.value),class:Q(["flex items-center gap-2 px-3 py-1.5 rounded-full border transition-all text-xs font-bold",me.value?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 border-red-200":"bg-slate-50 dark:bg-slate-700 text-slate-500 border-slate-200 hover:bg-slate-100"])},[e("span",El,[me.value?(o(),r("span",Ol)):O("",!0),e("span",{class:Q(["relative inline-flex rounded-full h-2 w-2",me.value?"bg-red-500":"bg-slate-400"])},null,2)]),t[26]||(t[26]=e("span",{class:"hidden md:inline"},"Caminho CrÃ­tico",-1))],2)])]),e("div",Al,[e("div",Vl,[t[27]||(t[27]=e("div",{class:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none"},[e("svg",{class:"h-4 w-4 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),E(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>Ke(P)?P.value=s:null),type:"text",placeholder:"Buscar tarefa...",class:"w-full pl-8 pr-2 py-1.5 text-xs rounded border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-slate-100 focus:bg-white dark:focus:bg-slate-800 focus:ring-2 focus:ring-blue-500 focus:outline-none transition-all placeholder-slate-400"},null,512),[[re,y(P)]])]),e("div",Nl,[E(e("select",{"onUpdate:modelValue":t[13]||(t[13]=s=>Ke(i)?i.value=s:null),class:"flex-1 lg:flex-none py-1.5 pl-2 pr-6 text-xs rounded border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-slate-100 focus:bg-white dark:focus:bg-slate-800 focus:ring-2 focus:ring-blue-500 focus:outline-none"},[t[28]||(t[28]=e("option",{value:""},"Todos Resp.",-1)),(o(!0),r(B,null,z(y(S).teamMembers,s=>(o(),r("option",{key:s.name,value:s.name},v(s.name),9,Ul))),128))],512),[[ke,y(i)]]),E(e("select",{"onUpdate:modelValue":t[14]||(t[14]=s=>Ke(G)?G.value=s:null),class:"flex-1 lg:flex-none py-1.5 pl-2 pr-6 text-xs rounded border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-slate-100 focus:bg-white dark:focus:bg-slate-800 focus:ring-2 focus:ring-blue-500 focus:outline-none"},[...t[29]||(t[29]=[Vt('<option value="" data-v-ce5edc10>Todos Tipos</option><option value="frontend" data-v-ce5edc10>Front</option><option value="backend" data-v-ce5edc10>Back</option><option value="qualidade" data-v-ce5edc10>QA</option><option value="other" data-v-ce5edc10>Outro</option>',5)])],512),[[ke,y(G)]])]),dt.value?(o(),r("button",{key:0,onClick:nt,class:"text-xs text-red-500 hover:text-red-700 px-2 py-1.5 flex items-center gap-1"},[...t[30]||(t[30]=[e("svg",{class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),K(" Limpar ",-1)])])):O("",!0)])]),e("div",{ref_key:"ganttContainer",ref:xe,class:"overflow-x-auto flex-1 relative custom-scrollbar bg-slate-50 dark:bg-slate-900/50"},[e("div",{style:Ie({width:c.value+"px"}),class:"relative min-h-[400px]"},[e("div",Rl,[e("div",Pl,[(o(!0),r(B,null,z(lt.value,(s,l)=>(o(),r("div",{key:l,class:"flex items-center pl-2 border-r border-slate-200 dark:border-slate-700 whitespace-nowrap overflow-hidden",style:Ie({width:s.count*ne.value+"px"})},v(s.label),5))),128))]),e("div",Bl,[(o(!0),r(B,null,z(Ee.value,(s,l)=>(o(),r("div",{key:l,class:Q(["flex-shrink-0 border-r border-slate-100 dark:border-slate-700 flex flex-col items-center justify-center text-[10px] select-none transition-colors",{"bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300 font-bold":s.isHoliday,"bg-blue-100/50 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300":s.isEvent,"bg-red-50/50 dark:bg-red-900/20 text-red-300 dark:text-red-400":s.isWeekend&&!s.isHoliday&&!s.isEvent,"bg-white dark:bg-slate-800":!s.isWeekend&&!s.isHoliday&&!s.isEvent}]),style:Ie({width:ne.value+"px"}),title:s.isEvent?s.eventTitle:s.fullDate},[e("span",Fl,v(s.label),1),e("span",Ll,v(s.dayName),1)],14,zl))),128)),e("div",Hl,[(o(!0),r(B,null,z(Ee.value,(s,l)=>(o(),r("div",{key:l,class:Q(["border-r border-slate-200/50 dark:border-slate-700/50 h-full box-border",{"bg-purple-50/40 dark:bg-purple-900/10":s.isHoliday,"bg-blue-50/30 dark:bg-blue-900/10":s.isEvent,"bg-red-50/30 dark:bg-red-900/10":s.isWeekend&&!s.isHoliday&&!s.isEvent}]),style:Ie({width:ne.value+"px"})},null,6))),128))])])]),e("div",Gl,[e("div",Wl,[(o(!0),r(B,null,z(Ee.value,(s,l)=>(o(),r("div",{key:l,class:Q(["border-r border-slate-200/50 dark:border-slate-700/50 h-full box-border",{"bg-purple-50/40 dark:bg-purple-900/10":s.isHoliday,"bg-red-50/30 dark:bg-red-900/10":s.isWeekend&&!s.isHoliday}]),style:Ie({width:ne.value+"px"})},null,6))),128))]),(o(),r("svg",{class:"absolute inset-0 pointer-events-none z-0",width:c.value,height:y(h).length*40+50,style:{overflow:"visible"}},[(o(!0),r(B,null,z(ot.value,(s,l)=>(o(),r("path",{key:l,d:s.path,fill:"none",class:Q(["transition-colors duration-300",s.isCritical&&me.value?"stroke-red-500":"stroke-slate-300 dark:stroke-slate-600"]),"stroke-width":s.isCritical&&me.value?2:1.5,"stroke-linejoin":"round"},null,10,Yl))),128))],8,Ql)),e("div",Jl,[(o(!0),r(B,null,z(st.value,s=>(o(),r("div",{key:s.id},[oe.value!=="none"?(o(),r("div",Xl,[t[31]||(t[31]=e("span",{class:"w-1.5 h-1.5 rounded-full bg-slate-400"},null,-1)),K(" "+v(s.title)+" ",1),e("span",Kl,v(s.tasks.length),1)])):O("",!0),(o(!0),r(B,null,z(s.tasks,l=>{var d,g;return o(),r("div",{key:l.id,class:"relative h-10 flex items-center group"},[t[32]||(t[32]=e("div",{class:"absolute inset-x-0 h-full bg-blue-50/0 dark:group-hover:bg-blue-900/20 group-hover:bg-blue-50/50 transition-colors pointer-events-none"},null,-1)),e("div",{class:Q(["absolute h-7 rounded-md shadow-sm text-[11px] text-white flex items-center px-2 transition-all z-10 overflow-hidden",{"ring-2 ring-blue-500 ring-offset-2 ring-offset-white dark:ring-offset-slate-900":((d=y(x))==null?void 0:d.id)===l.id,"border-2 border-amber-400":Ge(l),"ring-2 ring-red-500 shadow-[0_0_10px_rgba(239,68,68,0.6)] z-20":me.value&&y(R).includes(l.id),"opacity-40 grayscale":me.value&&!y(R).includes(l.id)&&((g=y(x))==null?void 0:g.id)!==l.id,"opacity-60":l.isCompleted,"shadow-lg scale-[1.02]":ce.value&&W.value===l.id,"border-2 border-dashed border-slate-300":l.isNotPlanned&&!Ge(l),"rotate-45 !w-5 !h-5 !rounded-sm !p-0 justify-center ml-2.5":l.isMilestone}]),onMousedown:I=>a(I,l),style:Ie(He(l))},[l.isMilestone?O("",!0):(o(),r("span",{key:0,class:Q(["truncate font-medium drop-shadow-md flex items-center gap-2",{"line-through text-white/80":l.isCompleted}])},[K(v(l.name)+" ",1),Ge(l)?(o(),r("span",eo,"âš ï¸")):O("",!0),l.isCompleted?(o(),r("span",to,"âœ“")):O("",!0)],2)),l.responsible&&!l.isMilestone?(o(),r("div",so,v(rt(l.responsible)),1)):O("",!0)],46,Zl),l.isMilestone?(o(),r("span",{key:0,class:"absolute text-xs font-bold text-slate-700 dark:text-slate-200 whitespace-nowrap ml-2 z-20 pointer-events-none",style:Ie({left:parseInt(He(l).left)+25+"px"})},v(l.name),5)):O("",!0)])}),128))]))),128))])])],4)],512),j.value?(o(),r("div",ao,[e("div",lo,[e("div",oo,[t[33]||(t[33]=e("h3",{class:"font-bold text-indigo-800 dark:text-indigo-200 flex items-center gap-2"},[e("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})]),K(" SugestÃµes de OtimizaÃ§Ã£o de Sprint ")],-1)),e("button",{onClick:t[15]||(t[15]=s=>j.value=!1),class:"text-slate-400 hover:text-slate-600"},"Ã—")]),e("div",ro,[t[34]||(t[34]=e("p",{class:"text-sm text-slate-600 dark:text-slate-300"},"Analisamos as prioridades (Meta > Item), dependÃªncias e capacidade da equipe para sugerir a melhor ordem de execuÃ§Ã£o:",-1)),T.value.length>0?(o(),r("div",no,[(o(!0),r(B,null,z(T.value,(s,l)=>(o(),r("div",{key:l,class:Q(["p-3 rounded border text-sm flex gap-3 items-start",s.includes("PRIORIDADE")?"bg-amber-50 border-amber-200 text-amber-800 dark:bg-amber-900/20 dark:border-amber-800 dark:text-amber-200":s.includes("SOBRECARGA")?"bg-red-50 border-red-200 text-red-800 dark:bg-red-900/20 dark:border-red-800 dark:text-red-200":s.includes("SEQUÃŠNCIA")?"bg-blue-50 border-blue-200 text-blue-800 dark:bg-blue-900/20 dark:border-blue-800 dark:text-blue-200":"bg-green-50 border-green-200 text-green-800 dark:bg-green-900/20 dark:border-green-800 dark:text-green-200"])},[e("span",io,v(s.includes("PRIORIDADE")?"âš¡":s.includes("SOBRECARGA")?"âš ï¸":s.includes("SEQUÃŠNCIA")?"ðŸ”¢":"âœ…"),1),e("span",null,v(s),1)],2))),128))])):O("",!0)]),e("div",uo,[e("button",{onClick:t[16]||(t[16]=s=>j.value=!1),class:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded font-bold text-sm"},"Entendido")])])])):O("",!0)]))}}),po=Re(co,[["__scopeId","data-v-ce5edc10"]]),bo={class:"space-y-6 animate-fade-in"},fo={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},vo={class:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col justify-between transition-colors"},mo={class:"text-3xl font-black text-slate-700 dark:text-slate-200 mt-1"},xo={class:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col justify-between transition-colors"},go={class:"text-3xl font-black text-green-600 dark:text-green-500 mt-1"},ko={class:"flex gap-2 text-xs mt-2"},ho={class:"text-green-600 dark:text-green-500 font-bold"},yo={key:0,class:"text-red-500 dark:text-red-400 font-bold"},wo={class:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col justify-between relative overflow-hidden transition-colors"},$o={class:"text-3xl font-black text-slate-700 dark:text-slate-200 mt-1"},Do={class:"text-lg text-slate-400 dark:text-slate-600 font-normal"},Mo={key:0,class:"absolute right-0 top-0 bottom-0 w-1 bg-amber-400"},_o={class:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col justify-between transition-colors"},Co={class:"flex items-end gap-2 mt-1"},So={class:"text-3xl font-black text-slate-700 dark:text-slate-200"},Io={class:"w-full bg-slate-100 dark:bg-slate-700 h-2 rounded-full mt-2 overflow-hidden"},qo={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},jo={class:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 transition-colors"},To={key:0,class:"text-center py-8 text-slate-400 dark:text-slate-500 text-sm"},Eo={class:"space-y-4"},Oo={class:"flex justify-between text-xs mb-1"},Ao={class:"font-bold text-slate-700 dark:text-slate-300 flex items-center gap-2"},Vo={class:"text-[9px] bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 px-1 rounded font-normal"},No={class:"w-full bg-slate-100 dark:bg-slate-700 h-2.5 rounded-full overflow-hidden relative"},Uo={key:0,class:"text-[10px] text-red-500 dark:text-red-400 mt-0.5"},Ro={class:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 transition-colors"},Po={key:0,class:"text-center py-8 text-slate-400 dark:text-slate-500 text-sm"},Bo={class:"space-y-4"},zo={class:"flex justify-between text-xs mb-1"},Fo={class:"font-bold text-slate-700 dark:text-slate-300"},Lo={class:"text-slate-400 dark:text-slate-500 font-normal"},Ho={class:"text-slate-500 dark:text-slate-400"},Go={class:"w-full bg-slate-100 dark:bg-slate-700 h-6 rounded-lg overflow-hidden relative border border-slate-200 dark:border-slate-600"},Wo={key:0,class:"text-[10px] text-white font-bold"},Qo={key:0,class:"absolute inset-0 flex items-center justify-center text-[10px] text-slate-500 dark:text-slate-400 font-bold"},Yo={class:"mt-6 pt-6 border-t border-slate-100 dark:border-slate-700"},Jo={class:"flex gap-2 flex-wrap"},Xo={class:"text-[10px] text-slate-500 dark:text-slate-400 uppercase font-bold"},Ko={class:"text-lg font-black text-slate-700 dark:text-slate-200"},Zo={class:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 transition-colors h-full"},er={class:"flex justify-between items-center mb-4"},tr={key:0,class:"bg-red-100 text-red-700 px-2 py-0.5 rounded text-xs font-bold"},sr={key:0,class:"text-center py-8 bg-slate-50 dark:bg-slate-700/30 rounded-lg border border-dashed border-slate-200 dark:border-slate-700"},ar={key:1,class:"space-y-3"},lr={class:"flex flex-col min-w-0"},or={class:"font-bold text-slate-700 dark:text-slate-200 text-sm truncate flex items-center gap-1"},rr={key:0},nr={class:"text-[10px] text-slate-500 dark:text-slate-400"},dr={class:"flex flex-col items-end flex-shrink-0"},ir={class:"text-red-600 dark:text-red-400 font-black text-sm"},ur={class:"text-[10px] text-slate-400"},cr={key:0,class:"text-center text-xs text-slate-400 italic pt-2"},pr={key:0,class:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl p-5 shadow-sm animate-fade-in transition-colors"},br={class:"text-slate-700 dark:text-slate-200 font-bold text-base mb-4 flex items-center gap-2"},fr={class:"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 text-[10px] px-2 py-0.5 rounded-full font-extrabold"},vr={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},mr={class:"flex-shrink-0 mt-0.5 p-1.5 bg-white/50 dark:bg-black/20 rounded-full"},xr={class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},gr=["d"],kr={class:"flex-1 min-w-0"},hr={class:"text-xs font-black uppercase tracking-wide opacity-80 mb-0.5"},yr={class:"text-sm font-medium leading-snug"},wr=je({__name:"DashboardView",setup(F){const{tasks:h,config:S,automaticRisks:k,projectCapacityStats:f,computedTasks:x}=Ue(),R=H(()=>h.value.length),D=H(()=>{const n=new Date(S.value.projectStartDate),u=new Date(S.value.deadline),b=new Date,A=Ce(u,n),J=Ce(b,n);return J<0?0:J>A?100:Math.round(J/A*100)}),L=H(()=>{const n=x.value.filter(J=>J.isCompleted),u=n.length;let b=0,A=0;return n.forEach(J=>{if(!J.completedDate||!J.endDate)return;const se=ae(ee(J.completedDate));Qe(se,J.endDate)?A++:b++}),{total:u,onTime:b,late:A}}),w=H(()=>{const n=h.value.filter(A=>A.isNotPlanned),u=n.length,b=n.filter(A=>!A.isCompleted).length;return{total:u,open:b}}),m=H(()=>S.value.teamMembers.map(n=>{const u=h.value.filter(se=>se.responsible===n.name&&!se.isCompleted&&!se.isMilestone).reduce((se,he)=>se+(he.effort||0),0),b=f.value.memberStats.find(se=>se.name===n.name),A=b?b.totalCapacity:0,J=A>0?Math.round(u/A*100):0;return{name:n.name,assigned:u,capacity:A,percentage:J,isOverloaded:u>A,sector:n.sector||"Outro"}})),_=H(()=>{const n={frontend:0,backend:0,qualidade:0,other:0};return h.value.forEach(u=>{u.type in n?n[u.type]++:n.other++}),[{label:"Front-end",value:n.frontend,color:"bg-blue-500"},{label:"Back-end",value:n.backend,color:"bg-green-500"},{label:"Qualidade",value:n.qualidade,color:"bg-purple-500"},{label:"Outros",value:n.other,color:"bg-gray-400"}].filter(u=>u.value>0)}),P=H(()=>{const n={};return m.value.forEach(u=>{n[u.sector]||(n[u.sector]={totalCapacity:0,assignedEffort:0,memberCount:0}),n[u.sector].totalCapacity+=u.capacity,n[u.sector].assignedEffort+=u.assigned,n[u.sector].memberCount+=1}),Object.entries(n).map(([u,b])=>({name:u,...b,percentage:b.totalCapacity>0?Math.round(b.assignedEffort/b.totalCapacity*100):0}))}),i=H(()=>{const n=[];let u=0;return x.value.forEach(b=>{if(b.originalEndDate&&b.endDate){const A=ee(b.originalEndDate),J=Ce(b.endDate,A);J>0&&(n.push({name:b.name,responsible:b.responsible||"N/A",delay:J,planned:te(A,"dd/MM"),current:te(b.endDate,"dd/MM"),isMilestone:b.isMilestone}),u+=J)}}),{count:n.length,totalDelay:u,tasks:n.sort((b,A)=>A.delay-b.delay).slice(0,5)}}),G=H(()=>k.value.map(n=>{let u="INFO",b="Aviso",A=n,J="bg-slate-50 dark:bg-slate-900/50 border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300",se="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z";return n.includes("CAPACIDADE:")?(u="CAPACIDADE",b="Sobrecarga Detectada",A=n.replace("CAPACIDADE:","").trim(),J="bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800 text-amber-800 dark:text-amber-200",se="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"):n.includes("SPRINT:")?(u="SPRINT",b="Conflito de Sprint",A=n.replace("SPRINT:","").trim(),J="bg-purple-50 dark:bg-purple-900/20 border-purple-200 dark:border-purple-800 text-purple-800 dark:text-purple-200",se="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"):n.includes("CALENDÃRIO:")||n.includes("feriado")?(u="CALENDÃRIO",b="Conflito de Agenda",A=n.replace("CALENDÃRIO:","").trim(),J="bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-800 dark:text-blue-200",se="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"):(n.includes("CARRY-OVER:")||n.includes("NÃ£o Planejadas"))&&(u="RISCO",b="Risco de Entrega",A=n.replace("CARRY-OVER:","").trim(),J="bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200",se="M13 10V3L4 14h7v7l9-11h-7z"),{type:u,title:b,message:A,styles:J,icon:se}}));return(n,u)=>(o(),r("div",bo,[e("div",fo,[e("div",vo,[u[0]||(u[0]=e("span",{class:"text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider"},"Total de Tarefas",-1)),e("div",mo,v(R.value),1),u[1]||(u[1]=e("div",{class:"text-xs text-slate-400 dark:text-slate-500 mt-2"},"No cronograma",-1))]),e("div",xo,[u[2]||(u[2]=e("span",{class:"text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider"},"ConcluÃ­das",-1)),e("div",go,v(L.value.total),1),e("div",ko,[e("span",ho,v(L.value.onTime)+" no prazo",1),L.value.late>0?(o(),r("span",yo,v(L.value.late)+" com atraso",1)):O("",!0)])]),e("div",wo,[u[3]||(u[3]=e("span",{class:"text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider"},"NÃ£o Planejadas",-1)),e("div",$o,[K(v(w.value.open)+" ",1),e("span",Do,"/ "+v(w.value.total),1)]),u[4]||(u[4]=e("div",{class:"text-xs text-slate-400 dark:text-slate-500 mt-2"},"Tarefas abertas sem Sprint",-1)),w.value.open>0?(o(),r("div",Mo)):O("",!0)]),e("div",_o,[u[5]||(u[5]=e("span",{class:"text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider"},"Tempo Decorrido",-1)),e("div",Co,[e("span",So,v(D.value)+"%",1)]),e("div",Io,[e("div",{class:"bg-slate-800 dark:bg-slate-400 h-full rounded-full transition-all duration-1000",style:Ie({width:D.value+"%"})},null,4)])])]),e("div",qo,[e("div",jo,[u[6]||(u[6]=e("h3",{class:"font-bold text-slate-700 dark:text-slate-200 mb-4 flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0z"})]),K(" Carga de Trabalho (Individual) ")],-1)),m.value.length===0?(o(),r("div",To,"Nenhum membro na equipe.")):O("",!0),e("div",Eo,[(o(!0),r(B,null,z(m.value,b=>(o(),r("div",{key:b.name},[e("div",Oo,[e("span",Ao,[K(v(b.name)+" ",1),e("span",Vo,v(b.sector),1)]),e("span",{class:Q(b.isOverloaded?"text-red-500 dark:text-red-400 font-bold":"text-slate-500 dark:text-slate-400")},v(b.assigned)+"h / "+v(b.capacity)+"h ",3)]),e("div",No,[e("div",{class:Q(["h-full rounded-full transition-all duration-500",b.isOverloaded?"bg-red-500":"bg-blue-500"]),style:Ie({width:Math.min(b.percentage,100)+"%"})},null,6)]),b.isOverloaded?(o(),r("div",Uo,"âš ï¸ Sobrecarga detectada")):O("",!0)]))),128))])]),e("div",Ro,[u[8]||(u[8]=e("h3",{class:"font-bold text-slate-700 dark:text-slate-200 mb-4 flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-indigo-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})]),K(" Capacidade por Setor ")],-1)),m.value.length===0?(o(),r("div",Po,"Sem dados de setores.")):O("",!0),e("div",Bo,[(o(!0),r(B,null,z(P.value,b=>(o(),r("div",{key:b.name},[e("div",zo,[e("span",Fo,[K(v(b.name)+" ",1),e("span",Lo,"("+v(b.memberCount)+" pessoas)",1)]),e("span",Ho,v(b.assignedEffort)+"h / "+v(b.totalCapacity)+"h",1)]),e("div",Go,[e("div",{class:"h-full bg-indigo-500 transition-all duration-500 flex items-center justify-end px-2",style:Ie({width:Math.min(b.percentage,100)+"%"})},[b.percentage>10?(o(),r("span",Wo,v(b.percentage)+"%",1)):O("",!0)],4),b.percentage<=10?(o(),r("span",Qo,v(b.percentage)+"%",1)):O("",!0)])]))),128))]),e("div",Yo,[u[7]||(u[7]=e("h4",{class:"font-bold text-slate-700 dark:text-slate-300 text-xs mb-3"},"Tarefas por Tipo",-1)),e("div",Jo,[(o(!0),r(B,null,z(_.value,b=>(o(),r("div",{key:b.label,class:"flex-1 min-w-[100px] bg-slate-50 dark:bg-slate-900 p-2 rounded border border-slate-100 dark:border-slate-700"},[e("div",Xo,v(b.label),1),e("div",Ko,v(b.value),1)]))),128))])])])]),e("div",Zo,[e("div",er,[u[9]||(u[9]=e("h3",{class:"font-bold text-slate-700 dark:text-slate-200 flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),K(" Desvio de Prazos (Baseline) ")],-1)),i.value.count>0?(o(),r("span",tr,v(i.value.totalDelay)+" dias total",1)):O("",!0)]),i.value.count===0?(o(),r("div",sr,[...u[10]||(u[10]=[e("div",{class:"text-slate-400 text-sm"},"Nenhum atraso em relaÃ§Ã£o ao planejado.",-1),e("div",{class:"text-[10px] text-slate-400 mt-1"},"Defina uma Baseline nas configuraÃ§Ãµes.",-1)])])):(o(),r("div",ar,[(o(!0),r(B,null,z(i.value.tasks,b=>(o(),r("div",{key:b.name,class:"flex items-center justify-between p-3 bg-red-50 dark:bg-red-900/10 rounded-lg border border-red-100 dark:border-red-900/30"},[e("div",lr,[e("span",or,[b.isMilestone?(o(),r("span",rr,"ðŸš©")):O("",!0),K(" "+v(b.name),1)]),e("span",nr,v(b.responsible),1)]),e("div",dr,[e("span",ir,"+"+v(b.delay)+" dias",1),e("span",ur,"Era: "+v(b.planned)+" âž "+v(b.current),1)])]))),128)),i.value.count>5?(o(),r("div",cr,"+"+v(i.value.count-5)+" outras tarefas atrasadas",1)):O("",!0)]))]),G.value.length>0?(o(),r("div",pr,[e("h3",br,[u[11]||(u[11]=e("span",{class:"w-2 h-2 rounded-full bg-red-500 animate-pulse"},null,-1)),u[12]||(u[12]=K(" Monitoramento de Riscos ",-1)),e("span",fr,v(G.value.length),1)]),e("div",vr,[(o(!0),r(B,null,z(G.value,(b,A)=>(o(),r("div",{key:A,class:Q(["flex items-start gap-3 p-3 rounded-lg border transition-all hover:shadow-md",b.styles])},[e("div",mr,[(o(),r("svg",xr,[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:b.icon},null,8,gr)]))]),e("div",kr,[e("div",hr,v(b.title),1),e("div",yr,v(b.message),1)])],2))),128))])])):O("",!0)]))}}),$r=Re(wr,[["__scopeId","data-v-24d4e5ca"]]),Dr={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 items-start h-[calc(100vh-200px)]"},Mr={class:"bg-white dark:bg-slate-800 p-5 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 h-full flex flex-col"},_r={class:"flex gap-2 mb-4"},Cr={class:"space-y-2 overflow-y-auto custom-scrollbar flex-1"},Sr={key:0,class:"text-xs text-slate-400 italic"},Ir=["onClick"],qr={class:"flex items-center gap-2"},jr={class:"text-sm font-bold text-slate-700 dark:text-slate-300"},Tr={class:"flex gap-1 opacity-60 group-hover:opacity-100"},Er=["onClick"],Or=["onClick"],Ar={class:"lg:col-span-2 h-full flex flex-col"},Vr={key:0,class:"bg-white dark:bg-slate-800 p-5 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 h-full flex flex-col animate-fade-in"},Nr={class:"mb-4 bg-emerald-50 dark:bg-emerald-900/10 p-4 rounded-lg border border-emerald-100 dark:border-emerald-800/30"},Ur={class:"flex gap-2"},Rr={id:"sectors-list"},Pr=["value"],Br={class:"overflow-y-auto custom-scrollbar flex-1 border rounded-lg border-slate-100 dark:border-slate-700"},zr={class:"w-full text-sm text-left"},Fr={class:"divide-y divide-slate-100 dark:divide-slate-700"},Lr={class:"px-4 py-2 font-medium text-slate-700 dark:text-slate-200"},Hr={class:"px-4 py-2 text-slate-500 dark:text-slate-400"},Gr={class:"px-4 py-2"},Wr={class:"flex flex-wrap gap-1"},Qr={key:0,class:"text-slate-400 text-xs italic"},Yr={class:"px-4 py-2 text-right"},Jr=["onClick"],Xr=["onClick"],Kr={key:0},Zr={key:1,class:"bg-white dark:bg-slate-800 p-5 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 h-full flex flex-col animate-fade-in"},en={class:"flex justify-between items-center mb-4"},tn={class:"font-bold text-slate-800 dark:text-slate-200 flex items-center gap-2"},sn={class:"text-indigo-600 dark:text-indigo-400"},an={class:"mb-4 bg-blue-50 dark:bg-blue-900/10 p-4 rounded-lg border border-blue-100 dark:border-blue-800/30"},ln={class:"flex gap-2 items-end"},on={class:"flex-1"},rn=["value"],nn={class:"w-24"},dn=["disabled"],un={key:0,class:"mt-2 text-[10px] text-amber-600"},cn={class:"space-y-2 overflow-y-auto custom-scrollbar flex-1"},pn={key:0,class:"text-center py-8 text-slate-400 italic bg-slate-50 dark:bg-slate-900/30 rounded border border-dashed border-slate-200"},bn={class:"flex items-center gap-3"},fn={class:"w-8 h-8 rounded-full bg-slate-100 dark:bg-slate-600 flex items-center justify-center text-xs font-bold text-slate-600 dark:text-slate-300"},vn={class:"text-sm font-bold text-slate-700 dark:text-slate-200"},mn={class:"text-xs text-slate-500"},xn=["onClick"],gn=je({__name:"SquadManagement",setup(F){const{config:h,addMember:S,removeMember:k,addSquad:f,updateSquad:x,removeSquad:R,linkMemberToSquad:D,unlinkMemberFromSquad:L,updateMember:w}=Ue(),m=U(""),_=U("#3b82f6"),P=U(null),i=U(null),G=U(""),n=U(""),u=U(8),b=U(""),A=U(null),J=()=>{m.value&&(P.value?(x(P.value,m.value,_.value),P.value=null):f(m.value,_.value),m.value="",_.value="#3b82f6")},se=T=>{m.value=T.name,_.value=T.color,P.value=T.id},he=T=>{i.value=i.value===T?null:T,G.value="",n.value="",u.value=8,A.value=null},me=T=>{confirm("Tem certeza que deseja excluir esta Squad? Os membros voltarÃ£o para o diretÃ³rio geral.")&&(R(T),i.value===T&&(i.value=null))},$e=()=>{if(G.value){const T=n.value||"Outro";if(A.value!==null){const C=h.value.teamMembers[A.value];w(A.value,G.value,C.capacity,T,C.squadIds),A.value=null}else S(G.value,8,T,[]);G.value="",n.value=""}},xe=T=>{const C=h.value.teamMembers.findIndex(De=>De.name===T.name);C!==-1&&(A.value=C,G.value=T.name,n.value=T.sector)},ye=T=>{const C=h.value.teamMembers.findIndex(De=>De.name===T.name);C!==-1&&confirm(`Excluir ${T.name} permanentemente?`)&&k(C)},oe=()=>{A.value=null,G.value="",n.value=""},ce=H(()=>i.value?h.value.teamMembers.filter(T=>T.squadIds.includes(i.value)):[]),W=H(()=>i.value?h.value.teamMembers.filter(T=>!T.squadIds.includes(i.value)):[]),M=()=>{if(b.value&&i.value){const T=h.value.teamMembers.findIndex(C=>C.name===b.value);T!==-1&&(D(T,i.value,u.value),b.value="",u.value=8)}},pe=T=>{const C=h.value.teamMembers.findIndex(De=>De.name===T.name);C!==-1&&i.value&&L(C,i.value)},j=["Frontend","Backend","Fullstack","QA","Design","Produto","DevOps","GestÃ£o"];return(T,C)=>{var De;return o(),r("div",Dr,[e("div",Mr,[C[10]||(C[10]=e("h3",{class:"font-bold text-slate-800 dark:text-slate-200 mb-4 flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-indigo-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0z"})]),K(" 1. Squads ")],-1)),e("div",_r,[E(e("input",{"onUpdate:modelValue":C[0]||(C[0]=p=>m.value=p),type:"text",placeholder:"Nome da Squad",class:"flex-1 text-sm rounded border-slate-300 dark:border-slate-600 shadow-sm p-2 dark:bg-slate-700 dark:text-white"},null,512),[[re,m.value]]),E(e("input",{"onUpdate:modelValue":C[1]||(C[1]=p=>_.value=p),type:"color",class:"w-10 h-10 p-1 rounded border-slate-300 dark:border-slate-600 cursor-pointer"},null,512),[[re,_.value]]),e("button",{onClick:J,class:"bg-indigo-600 text-white px-3 rounded text-sm font-bold hover:bg-indigo-700 transition-colors"},v(P.value?"Salvar":"+"),1)]),e("div",Cr,[y(h).squads.length===0?(o(),r("div",Sr,"Nenhuma squad criada.")):O("",!0),(o(!0),r(B,null,z(y(h).squads,p=>(o(),r("div",{key:p.id,class:Q(["flex items-center justify-between p-2 rounded border transition-all cursor-pointer group",i.value===p.id?"bg-indigo-50 border-indigo-300 dark:bg-indigo-900/30 dark:border-indigo-700 ring-1 ring-indigo-300":"bg-slate-50 border-slate-100 dark:bg-slate-700/30 dark:border-slate-700 hover:bg-slate-100"]),onClick:a=>he(p.id)},[e("div",qr,[e("span",{class:"w-3 h-3 rounded-full shadow-sm",style:Ie({backgroundColor:p.color})},null,4),e("span",jr,v(p.name),1)]),e("div",Tr,[e("button",{onClick:tt(a=>se(p),["stop"]),class:"text-slate-400 hover:text-blue-500"},[...C[8]||(C[8]=[e("svg",{class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1)])],8,Er),e("button",{onClick:tt(a=>me(p.id),["stop"]),class:"text-slate-400 hover:text-red-500"},[...C[9]||(C[9]=[e("svg",{class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Or)])],10,Ir))),128))])]),e("div",Ar,[i.value?(o(),r("div",Zr,[e("div",en,[e("h3",tn,[C[15]||(C[15]=e("svg",{class:"w-5 h-5 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),C[16]||(C[16]=K(" Membros da Squad: ",-1)),e("span",sn,v((De=y(h).squads.find(p=>p.id===i.value))==null?void 0:De.name),1)]),e("button",{onClick:C[4]||(C[4]=p=>i.value=null),class:"text-xs text-slate-400 hover:text-slate-600 underline"},"Voltar ao DiretÃ³rio")]),e("div",an,[C[20]||(C[20]=e("p",{class:"text-xs text-blue-800 dark:text-blue-200 mb-3 font-medium"},"Vincule um membro existente a esta squad e defina sua capacidade de trabalho.",-1)),e("div",ln,[e("div",on,[C[18]||(C[18]=e("label",{class:"text-[10px] uppercase font-bold text-slate-500 mb-1 block"},"Membro",-1)),E(e("select",{"onUpdate:modelValue":C[5]||(C[5]=p=>b.value=p),class:"w-full text-sm rounded border-slate-300 dark:border-slate-600 p-2 dark:bg-slate-700 dark:text-white"},[C[17]||(C[17]=e("option",{value:""},"-- Selecione --",-1)),(o(!0),r(B,null,z(W.value,p=>(o(),r("option",{key:p.name,value:p.name},v(p.name)+" ("+v(p.sector)+")",9,rn))),128))],512),[[ke,b.value]])]),e("div",nn,[C[19]||(C[19]=e("label",{class:"text-[10px] uppercase font-bold text-slate-500 mb-1 block"},"Capacidade",-1)),E(e("input",{"onUpdate:modelValue":C[6]||(C[6]=p=>u.value=p),type:"number",class:"w-full text-sm rounded border-slate-300 dark:border-slate-600 p-2 dark:bg-slate-700 dark:text-white"},null,512),[[re,u.value,void 0,{number:!0}]])]),e("button",{onClick:M,disabled:!b.value,class:"bg-blue-600 text-white px-4 py-2 rounded text-sm font-bold hover:bg-blue-700 transition-colors disabled:opacity-50"},"Vincular",8,dn)]),W.value.length===0&&y(h).teamMembers.length>0?(o(),r("div",un,"* Todos os membros cadastrados jÃ¡ estÃ£o nesta squad.")):O("",!0),y(h).teamMembers.length===0?(o(),r("div",{key:1,class:"mt-2 text-[10px] text-red-500 cursor-pointer",onClick:C[7]||(C[7]=p=>i.value=null)},"* Nenhum membro cadastrado no sistema. Clique aqui para ir ao DiretÃ³rio.")):O("",!0)]),e("div",cn,[ce.value.length===0?(o(),r("div",pn,"Nenhum membro vinculado a esta squad.")):O("",!0),(o(!0),r(B,null,z(ce.value,p=>(o(),r("div",{key:p.name,class:"flex items-center justify-between bg-white border border-slate-100 dark:bg-slate-700/20 dark:border-slate-700 p-3 rounded hover:shadow-sm transition-all"},[e("div",bn,[e("div",fn,v(p.name.substring(0,2).toUpperCase()),1),e("div",null,[e("div",vn,v(p.name),1),e("div",mn,v(p.sector)+" â€¢ "+v(p.capacity)+"h/dia",1)])]),e("button",{onClick:a=>pe(p),class:"text-red-400 hover:text-red-600 text-xs border border-red-100 hover:bg-red-50 px-2 py-1 rounded transition-colors"},"Desvincular",8,xn)]))),128))])])):(o(),r("div",Vr,[C[14]||(C[14]=e("h3",{class:"font-bold text-slate-800 dark:text-slate-200 mb-4 flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})]),K(" 2. DiretÃ³rio Geral de Membros ")],-1)),e("div",Nr,[C[11]||(C[11]=e("p",{class:"text-xs text-emerald-800 dark:text-emerald-200 mb-3 font-medium"},"Cadastre aqui todos os colaboradores. Depois, selecione uma Squad Ã  esquerda para vinculÃ¡-los.",-1)),e("div",Ur,[E(e("input",{"onUpdate:modelValue":C[2]||(C[2]=p=>G.value=p),type:"text",placeholder:"Nome do Colaborador",class:"flex-1 text-sm rounded border-slate-300 dark:border-slate-600 shadow-sm p-2 dark:bg-slate-700 dark:text-white"},null,512),[[re,G.value]]),E(e("input",{list:"sectors-list","onUpdate:modelValue":C[3]||(C[3]=p=>n.value=p),placeholder:"Setor (Opcional)",class:"w-1/3 text-sm rounded border-slate-300 dark:border-slate-600 shadow-sm p-2 dark:bg-slate-700 dark:text-white"},null,512),[[re,n.value]]),e("datalist",Rr,[(o(),r(B,null,z(j,p=>e("option",{key:p,value:p},null,8,Pr)),64))]),e("button",{onClick:$e,class:"bg-emerald-600 text-white px-4 rounded text-sm font-bold hover:bg-emerald-700 transition-colors"},v(A.value!==null?"Atualizar":"Cadastrar"),1),A.value!==null?(o(),r("button",{key:0,onClick:oe,class:"bg-slate-200 text-slate-600 px-3 rounded text-sm font-bold"},"Cancelar")):O("",!0)])]),e("div",Br,[e("table",zr,[C[13]||(C[13]=e("thead",{class:"bg-slate-50 dark:bg-slate-900 text-xs uppercase text-slate-500 font-bold sticky top-0"},[e("tr",null,[e("th",{class:"px-4 py-2"},"Nome"),e("th",{class:"px-4 py-2"},"Setor"),e("th",{class:"px-4 py-2"},"Squads Vinculadas"),e("th",{class:"px-4 py-2 text-right"},"AÃ§Ãµes")])],-1)),e("tbody",Fr,[(o(!0),r(B,null,z(y(h).teamMembers,p=>(o(),r("tr",{key:p.name,class:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors"},[e("td",Lr,v(p.name),1),e("td",Hr,v(p.sector),1),e("td",Gr,[e("div",Wr,[(o(!0),r(B,null,z(p.squadIds,a=>{var X;return o(),r("span",{key:a,class:"text-[10px] px-1.5 rounded bg-slate-100 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-500"},v(((X=y(h).squads.find(le=>le.id===a))==null?void 0:X.name)||"?"),1)}),128)),p.squadIds.length===0?(o(),r("span",Qr,"Sem vÃ­nculo")):O("",!0)])]),e("td",Yr,[e("button",{onClick:a=>xe(p),class:"text-blue-500 hover:underline mr-2 text-xs"},"Editar",8,Jr),e("button",{onClick:a=>ye(p),class:"text-red-500 hover:underline text-xs"},"Excluir",8,Xr)])]))),128)),y(h).teamMembers.length===0?(o(),r("tr",Kr,[...C[12]||(C[12]=[e("td",{colspan:"4",class:"px-4 py-8 text-center text-slate-400 italic"},"Nenhum membro cadastrado. Use o formulÃ¡rio acima.",-1)])])):O("",!0)])])])]))])])}}}),kn=Re(gn,[["__scopeId","data-v-76bf132c"]]),hn={class:"flex flex-col items-center justify-center min-h-[500px] p-4 animate-fade-in"},yn={class:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-5xl overflow-hidden flex flex-col md:flex-row min-h-[550px] border border-slate-100 dark:border-slate-700"},wn={class:"bg-slate-900 text-white p-8 md:w-1/3 flex flex-col justify-between relative overflow-hidden transition-colors"},$n={class:"relative z-10"},Dn={class:"text-6xl mb-6 transform transition-transform hover:scale-110 duration-300"},Mn={class:"text-2xl font-bold leading-tight"},_n={key:0,class:"text-blue-400 font-bold text-xs uppercase tracking-wider mt-3 bg-blue-400/10 inline-block px-2 py-1 rounded"},Cn={class:"flex gap-2 mt-8 relative z-10"},Sn=["onClick"],In={class:"p-8 md:w-2/3 flex flex-col bg-white dark:bg-slate-800 transition-colors"},qn={class:"flex-1"},jn={class:"text-lg text-slate-600 dark:text-slate-300 mb-6 leading-relaxed border-b border-slate-100 dark:border-slate-700 pb-4"},Tn={key:0,class:"space-y-3"},En={class:"text-sm text-slate-700 dark:text-slate-200 leading-snug"},On={class:"flex justify-between items-center mt-8 pt-6 border-t border-slate-100 dark:border-slate-700"},An=je({__name:"TutorialView",emits:["complete"],setup(F,{emit:h}){const S=h,k=U(0),f=[{title:"Bem-vindo ao Gantt-ficator",icon:"ðŸ‘‹",content:"Sua ferramenta completa para planejamento Ã¡gil e visual. O sistema foi atualizado para suportar mÃºltiplas Squads e OtimizaÃ§Ã£o Inteligente. Vamos ver o que mudou!",points:["GestÃ£o por Squads.","Planejamento de Sprints.","SugestÃµes de OtimizaÃ§Ã£o via IA."]},{title:"1. GestÃ£o de Squads (Novo!)",icon:"ðŸ‘¥",highlight:"Aba: Squads",content:"O ponto de partida. Agora vocÃª organiza sua equipe em cÃ©lulas Ã¡geis.",points:["Crie Squads: Defina o nome e a cor para identificar cada time.","DiretÃ³rio Geral: Cadastre todos os colaboradores em uma lista Ãºnica.","VÃ­nculo FlexÃ­vel: Adicione membros Ã s Squads e defina a capacidade (horas/dia) especÃ­fica para aquele time.","Day-Offs: Gerencie as folgas dos membros diretamente no cadastro."]},{title:"2. ConfiguraÃ§Ã£o & Sprints",icon:"âš™ï¸",highlight:"Aba: ConfiguraÃ§Ãµes",content:"Onde o tempo Ã© gerenciado. Agora as configuraÃ§Ãµes sÃ£o contextualizadas.",points:['Seletor de Contexto: Escolha se quer configurar o "Projeto Global" ou uma "Squad" especÃ­fica.',"Ciclo de Sprints: Crie Sprints dentro de cada Squad (ex: Sprint 24 - Squad Alpha).","Datas e Feriados: Defina feriados globais ou especÃ­ficos por Squad.","Ajuste Fino: Altere a capacidade ou adicione folgas de um membro apenas para a duraÃ§Ã£o de uma Sprint especÃ­fica."]},{title:"3. Planejamento de Tarefas",icon:"ðŸ“",highlight:"BotÃ£o: Nova Tarefa",content:"Mais inteligÃªncia na criaÃ§Ã£o de demandas.",points:['Prioridade da US: Defina se Ã© uma "Meta" (Goal - Alta prioridade) ou "Item" (Normal).',"ClassificaÃ§Ã£o: Use nÃºmeros (1, 2, 3...) para ordenar a importÃ¢ncia dentro da prioridade.","VÃ­nculo AutomÃ¡tico: Ao selecionar uma Sprint, o sistema filtra apenas os membros daquela Squad.",'Fluxo Completo: Gera automaticamente a cadeia "Backend â†’ Frontend â†’ QA" com os gaps de tempo corretos.']},{title:"4. Cronograma Inteligente",icon:"ðŸ“…",highlight:"Aba: Cronograma",content:"Visualize e otimize o trabalho no tempo.",points:['Filtro de Squad: Alterne entre a "VisÃ£o Geral" (todas as squads) ou foque em um time especÃ­fico.',"BotÃ£o Otimizar âš¡: Receba sugestÃµes automÃ¡ticas para resolver conflitos de prioridade (Item antes de Meta) e sobrecarga.","Linhas de DependÃªncia: O sistema respeita intervalos (ex: 3 dias entre Back e Front).","EdiÃ§Ã£o RÃ¡pida: Arraste tarefas para mudar datas ou clique para editar."]},{title:"5. Dashboard e Riscos",icon:"ðŸš¨",highlight:"Aba: Dashboard",content:"Monitoramento proativo da saÃºde do projeto.",points:["AnÃ¡lise de Riscos: O sistema avisa automaticamente sobre sobrecarga, estouro de sprint e conflitos de agenda (fÃ©rias/feriados).","Desvio de Prazos: Compare o planejado (Baseline) com o real.","Carga de Trabalho: Veja quem estÃ¡ sobrecarregado (vermelho) ou livre (azul).","Progresso: Acompanhe o avanÃ§o fÃ­sico e temporal do projeto."]}],x=H(()=>k.value===f.length-1),R=()=>{x.value||k.value++},D=()=>{k.value>0&&k.value--},L=()=>{S("complete")};return(w,m)=>(o(),r("div",hn,[e("div",yn,[e("div",wn,[m[0]||(m[0]=e("div",{class:"absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none"},[e("svg",{class:"w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none"},[e("path",{d:"M0 100 C 20 0 50 0 100 100 Z",fill:"white"})])],-1)),e("div",$n,[e("div",Dn,v(f[k.value].icon),1),e("h2",Mn,v(f[k.value].title),1),f[k.value].highlight?(o(),r("p",_n,v(f[k.value].highlight),1)):O("",!0)]),e("div",Cn,[(o(),r(B,null,z(f,(_,P)=>e("div",{key:P,class:Q(["h-1.5 rounded-full transition-all duration-500 cursor-pointer",P===k.value?"w-8 bg-blue-500":"w-2 bg-slate-700 hover:bg-slate-600"]),onClick:i=>k.value=P},null,10,Sn)),64))])]),e("div",In,[e("div",qn,[e("p",jn,v(f[k.value].content),1),f[k.value].points?(o(),r("ul",Tn,[(o(!0),r(B,null,z(f[k.value].points,(_,P)=>(o(),r("li",{key:P,class:"flex items-start gap-3 p-3 rounded-lg bg-slate-50 dark:bg-slate-700/30 border border-slate-100 dark:border-slate-700 transition-all hover:translate-x-1"},[m[1]||(m[1]=e("svg",{class:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",En,v(_),1)]))),128))])):O("",!0)]),e("div",On,[e("button",{onClick:D,class:Q(["px-4 py-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 font-bold text-sm transition-colors flex items-center gap-1",{invisible:k.value===0}])},[...m[2]||(m[2]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),K(" Anterior ",-1)])],2),x.value?(o(),r("button",{key:1,onClick:L,class:"px-8 py-3 bg-green-600 hover:bg-green-500 text-white rounded-xl font-bold shadow-lg shadow-green-200 dark:shadow-green-900/20 transition-transform hover:scale-105 active:scale-95 flex items-center gap-2"},"ComeÃ§ar a Usar ðŸš€")):(o(),r("button",{key:0,onClick:R,class:"px-6 py-3 bg-blue-600 hover:bg-blue-500 text-white rounded-xl font-bold shadow-lg shadow-blue-200 dark:shadow-blue-900/20 transition-transform hover:scale-105 active:scale-95 flex items-center gap-2"},[...m[3]||(m[3]=[K(" PrÃ³ximo ",-1),e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])]))])])])]))}}),Vn=Re(An,[["__scopeId","data-v-781ac33f"]]),Nn={class:"fixed top-20 right-4 z-[9999] flex flex-col gap-3 pointer-events-none"},Un={class:"text-lg"},Rn={class:"flex-1 text-sm font-medium pt-0.5"},Pn=["onClick"],Bn=je({__name:"ToastContainer",setup(F){const{notifications:h,remove:S}=pt(),k=x=>{switch(x){case"success":return"âœ…";case"error":return"âŒ";case"warning":return"âš ï¸";default:return"â„¹ï¸"}},f=x=>{switch(x){case"success":return"border-green-500 bg-white dark:bg-slate-800";case"error":return"border-red-500 bg-white dark:bg-slate-800";case"warning":return"border-amber-500 bg-white dark:bg-slate-800";default:return"border-blue-500 bg-white dark:bg-slate-800"}};return(x,R)=>(o(),r("div",Nn,[Se(Nt,{name:"toast"},{default:ct(()=>[(o(!0),r(B,null,z(y(h),D=>(o(),r("div",{key:D.id,class:Q(["pointer-events-auto min-w-[300px] max-w-sm p-4 rounded-lg shadow-xl border-l-4 flex items-start gap-3 transform transition-all duration-300 dark:text-white",f(D.type)])},[e("span",Un,v(k(D.type)),1),e("div",Rn,v(D.message),1),e("button",{onClick:L=>y(S)(D.id),class:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200"},"Ã—",8,Pn)],2))),128))]),_:1})]))}}),zn=Re(Bn,[["__scopeId","data-v-d08f692a"]]),Le=U(!1),Fn=()=>{if(typeof window>"u")return;const F=localStorage.getItem("theme"),h=window.matchMedia("(prefers-color-scheme: dark)").matches;F==="dark"||!F&&h?(Le.value=!0,document.documentElement.classList.add("dark")):(Le.value=!1,document.documentElement.classList.remove("dark"))};Fn();function Ln(){return{isDark:Le,toggleDark:()=>{Le.value=!Le.value,Le.value?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))}}}const Hn={class:"min-h-screen flex flex-col bg-slate-50 dark:bg-slate-900 font-sans text-slate-900 dark:text-slate-100 transition-colors duration-300"},Gn={class:"bg-slate-900 dark:bg-slate-950 text-white p-4 shadow-md z-50 sticky top-0 border-b border-slate-800"},Wn={class:"max-w-[1600px] mx-auto flex flex-col md:flex-row items-center justify-between gap-4"},Qn={class:"flex items-center gap-4 w-full md:w-auto justify-between md:justify-start"},Yn={class:"flex bg-slate-800 dark:bg-slate-900 rounded-lg p-1 border border-slate-700 overflow-x-auto"},Jn={class:"flex items-center gap-3 w-full md:w-auto justify-end"},Xn={key:0,class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Kn={key:1,class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Zn={class:"flex-1 w-full max-w-[1600px] mx-auto p-4 lg:p-6"},ed={key:"dashboard"},td={key:"gantt"},sd={key:"squads",class:"max-w-6xl mx-auto animate-fade-in"},ad={key:"config",class:"max-w-6xl mx-auto space-y-8 animate-fade-in"},ld={key:"tutorial"},ht="gantt-ficator-tutorial-seen",od=je({__name:"App",setup(F){const{openCreateModal:h}=Ue(),{isDark:S,toggleDark:k}=Ln(),f=U("dashboard"),x=U(null);Dt(()=>{localStorage.getItem(ht)||(f.value="tutorial"),window.addEventListener("beforeinstallprompt",w=>{w.preventDefault(),x.value=w})});const R=async()=>{if(x.value){x.value.prompt();const{outcome:L}=await x.value.userChoice;L==="accepted"&&(x.value=null)}},D=()=>{localStorage.setItem(ht,"true"),f.value="dashboard",window.scrollTo({top:0,behavior:"smooth"})};return(L,w)=>(o(),r("div",Hn,[Se(zn),e("header",Gn,[e("div",Wn,[e("div",Qn,[w[12]||(w[12]=e("div",{class:"flex items-center gap-3"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 00-2-2h-2a2 2 0 00-2 2"})]),e("h1",{class:"text-xl font-bold tracking-tight hidden lg:block"},"Gantt-ficator")],-1)),e("nav",Yn,[e("button",{onClick:w[0]||(w[0]=m=>f.value="dashboard"),class:Q(["px-3 py-1.5 rounded-md text-sm font-medium transition-all flex items-center gap-2 whitespace-nowrap",f.value==="dashboard"?"bg-slate-700 dark:bg-slate-800 text-white shadow":"text-slate-400 hover:text-white"]),title:"Dashboard"},[...w[7]||(w[7]=[e("span",{class:"text-lg"},"ðŸ“Š",-1),K(),e("span",{class:"hidden sm:inline"},"Dashboard",-1)])],2),e("button",{onClick:w[1]||(w[1]=m=>f.value="gantt"),class:Q(["px-3 py-1.5 rounded-md text-sm font-medium transition-all flex items-center gap-2 whitespace-nowrap",f.value==="gantt"?"bg-slate-700 dark:bg-slate-800 text-white shadow":"text-slate-400 hover:text-white"]),title:"Cronograma"},[...w[8]||(w[8]=[e("span",{class:"text-lg"},"ðŸ“…",-1),K(),e("span",{class:"hidden sm:inline"},"Cronograma",-1)])],2),e("button",{onClick:w[2]||(w[2]=m=>f.value="squads"),class:Q(["px-3 py-1.5 rounded-md text-sm font-medium transition-all flex items-center gap-2 whitespace-nowrap",f.value==="squads"?"bg-slate-700 dark:bg-slate-800 text-white shadow":"text-slate-400 hover:text-white"]),title:"Squads"},[...w[9]||(w[9]=[e("span",{class:"text-lg"},"ðŸ‘¥",-1),K(),e("span",{class:"hidden sm:inline"},"Squads",-1)])],2),e("button",{onClick:w[3]||(w[3]=m=>f.value="config"),class:Q(["px-3 py-1.5 rounded-md text-sm font-medium transition-all flex items-center gap-2 whitespace-nowrap",f.value==="config"?"bg-slate-700 dark:bg-slate-800 text-white shadow":"text-slate-400 hover:text-white"]),title:"ConfiguraÃ§Ãµes"},[...w[10]||(w[10]=[e("span",{class:"text-lg"},"âš™ï¸",-1),K(),e("span",{class:"hidden sm:inline"},"ConfiguraÃ§Ãµes",-1)])],2),e("button",{onClick:w[4]||(w[4]=m=>f.value="tutorial"),class:Q(["px-3 py-1.5 rounded-md text-sm font-medium transition-all flex items-center gap-2 whitespace-nowrap",f.value==="tutorial"?"bg-slate-700 dark:bg-slate-800 text-white shadow":"text-slate-400 hover:text-white"]),title:"Tutorial"},[...w[11]||(w[11]=[e("span",{class:"text-lg"},"ðŸŽ“",-1),K(),e("span",{class:"hidden sm:inline"},"Tutorial",-1)])],2)])]),e("div",Jn,[x.value?(o(),r("button",{key:0,onClick:R,class:"p-2 rounded-lg bg-slate-800 dark:bg-slate-700 text-emerald-400 hover:bg-slate-700 dark:hover:bg-slate-600 transition-colors border border-slate-700 animate-pulse",title:"Instalar Aplicativo"},[...w[13]||(w[13]=[e("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1)])])):O("",!0),e("button",{onClick:w[5]||(w[5]=(...m)=>y(k)&&y(k)(...m)),class:"p-2 rounded-lg bg-slate-800 dark:bg-slate-700 text-yellow-400 dark:text-slate-200 hover:bg-slate-700 dark:hover:bg-slate-600 transition-colors border border-slate-700"},[y(S)?(o(),r("svg",Xn,[...w[14]||(w[14]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"},null,-1)])])):(o(),r("svg",Kn,[...w[15]||(w[15]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"},null,-1)])]))]),e("button",{onClick:w[6]||(w[6]=(...m)=>y(h)&&y(h)(...m)),class:"bg-blue-600 hover:bg-blue-500 text-white px-3 sm:px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 shadow-lg shadow-blue-900/50 transition-transform hover:scale-105 active:scale-95 whitespace-nowrap"},[...w[16]||(w[16]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),e("span",{class:"hidden sm:inline"},"Nova Tarefa",-1),e("span",{class:"sm:hidden"},"Nova",-1)])])])])]),e("main",Zn,[Se($t,{name:"fade",mode:"out-in"},{default:ct(()=>[f.value==="dashboard"?(o(),r("div",ed,[Se($r)])):f.value==="gantt"?(o(),r("div",td,[Se(po)])):f.value==="squads"?(o(),r("div",sd,[Se(kn)])):f.value==="config"?(o(),r("div",ad,[e("section",null,[w[17]||(w[17]=e("h2",{class:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4 px-1"},"Gerenciamento de Dados",-1)),Se(cl)]),Se(dl)])):f.value==="tutorial"?(o(),r("div",ld,[Se(Vn,{onComplete:D})])):O("",!0)]),_:1})]),Se(xa)]))}});function rd(F={}){const{immediate:h=!1,onNeedRefresh:S,onOfflineReady:k,onRegistered:f,onRegisteredSW:x,onRegisterError:R}=F;let D,L;const w=async(_=!0)=>{await L};async function m(){if("serviceWorker"in navigator){if(D=await Bt(async()=>{const{Workbox:_}=await import("./vendor-Brm4ScKu.js").then(P=>P.a2);return{Workbox:_}},[]).then(({Workbox:_})=>new _("/Gantt/sw.js",{scope:"/Gantt/",type:"classic"})).catch(_=>{R==null||R(_)}),!D)return;D.addEventListener("activated",_=>{(_.isUpdate||_.isExternal)&&window.location.reload()}),D.addEventListener("installed",_=>{_.isUpdate||k==null||k()}),D.register({immediate:h}).then(_=>{x?x("/Gantt/sw.js",_):f==null||f(_)}).catch(_=>{R==null||R(_)})}}return L=m(),w}const nd=rd({onNeedRefresh(){confirm("Nova versÃ£o disponÃ­vel. Recarregar?")&&nd(!0)},onOfflineReady(){console.log("App pronto para funcionar offline!")}});Ut(od).mount("#app");
