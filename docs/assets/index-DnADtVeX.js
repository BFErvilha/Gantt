import{r as V,p as Y,i as de,s as oe,f as ae,w as Oe,c as G,b as Je,e as je,g as Ie,h as wt,j as Dt,k as St,l as Ct,m as Ne,n as qt,o as jt,q as Tt,t as Te,u as r,v as R,x as o,y as e,A as m,B as Et,C as pt,D as y,E as Se,F as K,G as te,H as tt,I as T,J as F,K as L,L as ye,M as ie,N as Xe,O as Le,P as Ce,Q as mt,T as Mt,R as ct,S as $t,U as At,V as Ot,W as Ye,X as Ke,Y as Vt,Z as Ut,$ as Nt}from"./vendor-Brm4ScKu.js";import{E as Pt,a as Rt,_ as Bt}from"./pdf-libs-BW75DGpH.js";import{u as _e,w as xt,r as zt}from"./excel-libs-CKN5doRT.js";(function(){const g=document.createElement("link").relList;if(g&&g.supports&&g.supports("modulepreload"))return;for(const v of document.querySelectorAll('link[rel="modulepreload"]'))h(v);new MutationObserver(v=>{for(const f of v)if(f.type==="childList")for(const P of f.addedNodes)P.tagName==="LINK"&&P.rel==="modulepreload"&&h(P)}).observe(document,{childList:!0,subtree:!0});function $(v){const f={};return v.integrity&&(f.integrity=v.integrity),v.referrerPolicy&&(f.referrerPolicy=v.referrerPolicy),v.crossOrigin==="use-credentials"?f.credentials="include":v.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function h(v){if(v.ep)return;v.ep=!0;const f=$(v);fetch(v.href,f)}})();const Ze=V([]);let Ft=0;function bt(){const H=($,h="success",v=3e3)=>{const f=Ft++;Ze.value.push({id:f,message:$,type:h}),setTimeout(()=>{g(f)},v)},g=$=>{const h=Ze.value.findIndex(v=>v.id===$);h!==-1&&Ze.value.splice(h,1)};return{notifications:Ze,show:H,remove:g}}const _t="gantt-pro-tasks",It="gantt-pro-config",Lt=()=>{try{const H=localStorage.getItem(_t);if(H)return JSON.parse(H).map(g=>({...g,isNotPlanned:g.isNotPlanned??!1,isCompleted:g.isCompleted??!1,isMilestone:g.isMilestone??!1,usType:g.usType||"item",classification:typeof g.classification=="number"?g.classification:0}))}catch(H){console.error("Erro ao carregar tarefas:",H)}return[]},Ht=()=>{const H={projectStartDate:ae(new Date,"yyyy-MM-dd"),deadline:"",skipWeekends:!0,holidays:[],risks:[],teamMembers:[],sprints:[],squads:[]};try{const g=localStorage.getItem(It);if(g){const $=JSON.parse(g);let h=[];Array.isArray($.teamMembers)&&(h=$.teamMembers.map(f=>({name:f.name||"Sem Nome",capacity:typeof f.capacity=="number"?f.capacity:8,daysOff:Array.isArray(f.daysOff)?f.daysOff:[],sector:f.sector||"Outro",squadIds:Array.isArray(f.squadIds)?f.squadIds:[]})));let v=Array.isArray($.squads)?$.squads:[];return v.length===0&&Array.isArray($.sprints)&&$.sprints.length>0&&v.push({id:"default-squad",name:"Squad PadrÃ£o",color:"#3b82f6",startDate:$.projectStartDate||H.projectStartDate,deadline:$.deadline||"",skipWeekends:!0,holidays:[],sprints:$.sprints.map(f=>({...f,squadId:"default-squad"}))}),v=v.map(f=>({...f,sprints:Array.isArray(f.sprints)?f.sprints:[],holidays:Array.isArray(f.holidays)?f.holidays:[],startDate:f.startDate||H.projectStartDate,deadline:f.deadline||"",skipWeekends:f.skipWeekends??!0})),{...H,...$,projectStartDate:$.projectStartDate||H.projectStartDate,deadline:$.deadline||"",teamMembers:h,sprints:[],squads:v,holidays:Array.isArray($.holidays)?$.holidays:[]}}}catch(g){console.error("Erro ao carregar configuraÃ§Ãµes:",g)}return H},be=V(Lt()),D=V(Ht()),Ue=V(null),Qe=V(null),ze=V(!1),Fe=V("project"),gt=Y(D.value.projectStartDate),Ae=V(de(gt)?oe(gt):oe(new Date)),kt=V(""),it=V(""),ut=V(""),et=V("");function Pe(){const H=bt();Oe([be,D],()=>{localStorage.setItem(_t,JSON.stringify(be.value)),localStorage.setItem(It,JSON.stringify(D.value))},{deep:!0}),Oe(()=>D.value.projectStartDate,t=>{t&&de(Y(t))&&(Ae.value=oe(new Date(t)))});const g=t=>{if(D.value.squads){for(const s of D.value.squads)if(s.sprints&&Array.isArray(s.sprints)){const l=s.sprints.find(i=>i.id===t);if(l)return l}}},$=G(()=>{let t=oe(new Date(D.value.projectStartDate));return de(t)||(t=oe(new Date)),D.value.squads.forEach(s=>{s.sprints&&s.sprints.forEach(l=>{const i=oe(Y(l.endDate));de(i)&&Je(i,t)&&(t=i)})}),M.value.forEach(s=>{s.endDate&&de(s.endDate)&&Je(s.endDate,t)&&(t=s.endDate)}),t}),h=G(()=>{let t=$.value;if(D.value.deadline){const s=oe(Y(D.value.deadline));de(s)&&Je(s,t)&&(t=s)}return je(t,7)}),v=(t,s,l)=>{var k;if(!de(t))return!1;const i=ae(t,"yyyy-MM-dd");if(D.value.holidays.includes(i))return!0;if(l){const q=g(l);if(q&&([q.planningDate,q.refinementDate,q.reviewDate,q.retroDate].includes(i)||(q.skipWeekends??D.value.skipWeekends)&&Ne(t)))return!0}else if(D.value.skipWeekends&&Ne(t))return!0;if(s){const q=D.value.teamMembers.find(O=>O.name===s);if((k=q==null?void 0:q.daysOff)!=null&&k.includes(i))return!0}return!1},f=(t,s,l,i)=>{if(!de(t))return new Date;if(s===0)return t;let k=0,q=t;const O=Math.max(0,s-1);let j=0;for(;k<O&&j<1e3;)q=je(q,1),v(q,l,i)||k++,j++;return q},P=(t,s,l)=>{if(!de(t))return new Date;let i=t,k=0;for(;v(i,s,l)&&k<365;)i=je(i,1),k++;return i},M=G(()=>{const t=de(Y(D.value.projectStartDate))?oe(Y(D.value.projectStartDate)):oe(new Date),s=new Map,l=[...be.value];let i=!0,k=0;const q=l.length*2;for(;i&&k<q;){i=!1,k++;for(const j of l){let se=t;if(j.manualStartDate){let pe=Y(j.manualStartDate);de(pe)&&(se=P(pe,j.responsible))}else if(j.dependencyId){const pe=s.get(j.dependencyId);if(pe){let Z=1;pe.type==="backend"&&j.type==="frontend"&&(Z=3);let ge=je(pe.end,Z);se=P(ge,j.responsible)}}else if(j.sprintId){const pe=g(j.sprintId);if(pe){const Z=Y(pe.startDate);de(Z)&&(se=P(Z,j.responsible))}else se=P(t,j.responsible)}else se=P(t,j.responsible);const fe=f(se,j.isMilestone?0:j.duration,j.responsible,j.sprintId),De=s.get(j.id);(!De||De.start.getTime()!==se.getTime())&&(s.set(j.id,{start:se,end:fe,type:j.type}),i=!0)}}const O=de(Y(D.value.projectStartDate))?oe(Y(D.value.projectStartDate)):oe(new Date);return be.value.map(j=>{const se=s.get(j.id)||{start:O,end:O,type:j.type},fe=Ie(se.end,se.start)+1;return{...j,startDate:se.start,endDate:se.end,offsetDays:Ie(se.start,O),calendarDuration:j.isMilestone?1:fe,formattedStartDate:ae(se.start,"dd/MM/yyyy"),formattedEndDate:ae(se.end,"dd/MM/yyyy")}})}),W=G(()=>M.value.filter(t=>{const s=t.name.toLowerCase().includes(kt.value.toLowerCase()),l=it.value?t.responsible===it.value:!0,i=ut.value?t.type===ut.value:!0;let k=!0;if(et.value)if(t.sprintId){const q=g(t.sprintId);k=(q==null?void 0:q.squadId)===et.value}else if(t.responsible){const q=D.value.teamMembers.find(O=>O.name===t.responsible);k=q?q.squadIds.includes(et.value):!1}else k=!1;return s&&l&&i&&k})),w=G(()=>{const t=de(Ae.value)?oe(Ae.value):oe(new Date),s=de(Y(D.value.projectStartDate))?oe(Y(D.value.projectStartDate)):oe(new Date),l=h.value;return Fe.value==="week"?{start:Dt(t,{weekStartsOn:0}),end:wt(t,{weekStartsOn:0})}:Fe.value==="month"?{start:Ct(t),end:St(t)}:{start:s,end:l}}),x=t=>{const s=t==="next"?1:-1;Fe.value==="week"?Ae.value=jt(Ae.value,s):Fe.value==="month"&&(Ae.value=Tt(Ae.value,s))},S=t=>{Fe.value=t},B=t=>{be.value=t.map(s=>({id:s.id||crypto.randomUUID(),usId:s.usId||"",customId:s.customId||"",name:s.name||"Sem nome",duration:s.duration||1,dependencyId:s.dependencyId||null,color:s.color||"#3b82f6",type:s.type||"other",responsible:s.responsible||"",effort:s.effort||0,sprintId:s.sprintId||void 0,isNotPlanned:!s.sprintId,isCompleted:!1,isMilestone:s.isMilestone||!1,usType:s.usType||"item",classification:typeof s.classification=="number"?s.classification:0}))},u=G(()=>Ie(w.value.end,w.value.start)+1),Q=t=>{const s=t.id||crypto.randomUUID();be.value.push({id:s,usId:t.usId||"",customId:t.customId||"",name:t.name||"Nova Tarefa",duration:t.duration||1,dependencyId:t.dependencyId||null,color:t.color||"#3b82f6",type:t.type||"other",responsible:t.responsible||"",effort:t.effort||0,sprintId:t.sprintId,isNotPlanned:!t.sprintId,isCompleted:!1,completedDate:void 0,isMilestone:t.isMilestone||!1,usType:t.usType||"item",classification:t.classification||0})},n=t=>{const s=be.value.findIndex(l=>l.id===t.id);s!==-1&&(be.value[s]={...t}),Ue.value=null,ze.value=!1},d=t=>{var s;be.value=be.value.filter(l=>l.id!==t),be.value.forEach(l=>{l.dependencyId===t&&(l.dependencyId=null)}),((s=Ue.value)==null?void 0:s.id)===t&&(Ue.value=null,ze.value=!1)},p=t=>{const s=be.value.find(l=>l.id===t);s&&(s.isCompleted=!s.isCompleted,s.isCompleted?s.completedDate=ae(new Date,"yyyy-MM-dd"):s.completedDate=void 0)},I=t=>{Ue.value=JSON.parse(JSON.stringify(t)),ze.value=!0},J=()=>{Ue.value=null,ze.value=!0},N=()=>{Ue.value=null,ze.value=!1},X=(t,s)=>{const l=be.value.find(i=>i.id===t);l&&(l.manualStartDate=ae(s,"yyyy-MM-dd"))},le=()=>{const t=new Map;M.value.forEach(s=>{s.startDate&&s.endDate&&t.set(s.id,{start:ae(s.startDate,"yyyy-MM-dd"),end:ae(s.endDate,"yyyy-MM-dd")})}),be.value.forEach(s=>{if(t.has(s.id)){const l=t.get(s.id);s.originalStartDate=l.start,s.originalEndDate=l.end}}),H.show("Linha de base salva!","success")},ve=()=>{Qe.value=JSON.stringify(be.value)},ke=()=>{Qe.value&&(be.value=JSON.parse(Qe.value),Qe.value=null,H.show("AlteraÃ§Ãµes desfeitas!","success"))},he=t=>{D.value.holidays.includes(t)||D.value.holidays.push(t)},re=t=>{D.value.holidays=D.value.holidays.filter(s=>s!==t)},ue=t=>{t&&!D.value.risks.includes(t)&&D.value.risks.push(t)},z=t=>{D.value.risks.splice(t,1)},_=(t,s=8,l="Outro",i=[])=>{t&&!D.value.teamMembers.some(k=>k.name===t)&&D.value.teamMembers.push({name:t,capacity:s,daysOff:[],sector:l,squadIds:i})},me=(t,s,l,i,k)=>{const q=D.value.teamMembers[t].name;D.value.teamMembers[t].name=s,D.value.teamMembers[t].capacity=l,D.value.teamMembers[t].sector=i,D.value.teamMembers[t].squadIds=k,q!==s&&be.value.forEach(O=>{O.responsible===q&&(O.responsible=s)})},E=t=>{D.value.teamMembers.splice(t,1)},A=(t,s,l)=>{const i=D.value.teamMembers[t];i.squadIds.includes(s)||i.squadIds.push(s),l!==void 0&&(i.capacity=l)},C=(t,s)=>{const l=D.value.teamMembers[t];l.squadIds=l.squadIds.filter(i=>i!==s)},Me=(t,s)=>{const l=D.value.teamMembers[t];l&&!l.daysOff.includes(s)&&(l.daysOff.push(s),l.daysOff.sort())},b=(t,s)=>{const l=D.value.teamMembers[t];l&&(l.daysOff=l.daysOff.filter(i=>i!==s))},a=(t,s)=>{D.value.squads.push({id:crypto.randomUUID(),name:t,color:s,startDate:ae(new Date,"yyyy-MM-dd"),deadline:"",skipWeekends:!0,holidays:[],sprints:[]})},ee=(t,s,l)=>{const i=D.value.squads.findIndex(k=>k.id===t);i!==-1&&(D.value.squads[i].name=s,D.value.squads[i].color=l)},ne=t=>{D.value.squads=D.value.squads.filter(s=>s.id!==t),D.value.teamMembers.forEach(s=>{s.squadIds=s.squadIds.filter(l=>l!==t)})},xe=(t,s,l,i)=>{D.value.sprints.push({id:crypto.randomUUID(),name:t,startDate:s,endDate:l,squadId:i}),D.value.sprints.sort((k,q)=>k.startDate.localeCompare(q.startDate))},we=(t,s,l,i,k)=>{const q=D.value.sprints.findIndex(O=>O.id===t);q!==-1&&(D.value.sprints[q]={...D.value.sprints[q],name:s,startDate:l,endDate:i,squadId:k},D.value.sprints.sort((O,j)=>O.startDate.localeCompare(j.startDate)))},ce=t=>{D.value.sprints=D.value.sprints.filter(s=>s.id!==t),be.value.forEach(s=>{s.sprintId===t&&(s.sprintId=void 0)})},c=(t,s)=>{const l=D.value.squads.find(i=>i.id===t);l&&!l.holidays.includes(s)&&l.holidays.push(s)},We=(t,s)=>{const l=D.value.squads.find(i=>i.id===t);l&&(l.holidays=l.holidays.filter(i=>i!==s))},st=(t,s,l,i)=>{const k=D.value.squads.find(q=>q.id===t);k&&(k.sprints.push({id:crypto.randomUUID(),name:s,startDate:l,endDate:i,squadId:t}),k.sprints.sort((q,O)=>q.startDate.localeCompare(O.startDate)))},at=(t,s,l)=>{const i=D.value.squads.find(k=>k.id===t);if(i){const k=i.sprints.findIndex(q=>q.id===s);k!==-1&&(i.sprints[k]={...i.sprints[k],...l},i.sprints.sort((q,O)=>q.startDate.localeCompare(O.startDate)),H.show("ConfiguraÃ§Ãµes da Sprint salvas!","success"))}},Ee=(t,s)=>{const l=D.value.squads.find(i=>i.id===t);l&&(l.sprints=l.sprints.filter(i=>i.id!==s),be.value.forEach(i=>{i.sprintId===s&&(i.sprintId=void 0)}))},lt=G(()=>{const t=de(Y(D.value.projectStartDate))?oe(Y(D.value.projectStartDate)):oe(new Date);let s=h.value;if(D.value.deadline){const j=oe(Y(D.value.deadline));de(j)&&(s=h.value)}const l=Ie(s,t)+1;let i=0,k=t;for(;k<=s;)v(k)||i++,k=je(k,1);const q=D.value.teamMembers.map(j=>{let se=0;j.daysOff&&j.daysOff.length>0&&j.daysOff.forEach(De=>{const pe=oe(Y(De));pe>=t&&pe<=s&&(D.value.holidays.includes(De)||D.value.skipWeekends&&Ne(pe)||se++)});const fe=Math.max(0,i-se);return{name:j.name,capacityPerDay:j.capacity,totalCapacity:j.capacity*fe,sector:j.sector,effectiveDays:fe}}),O=q.reduce((j,se)=>j+se.totalCapacity,0);return{workingDays:i,calendarDays:l,totalTeamCapacity:O,memberStats:q}}),ot=G(()=>{const t=[];let s=0,l=0;if(M.value.forEach(i=>{if(i.isCompleted||(l+=i.effort||0,i.isNotPlanned&&(s+=i.effort||0)),!i.isCompleted){const k=D.value.teamMembers.find(O=>O.name===i.responsible),q=k?k.capacity:8;if(!i.isMilestone&&i.effort&&i.duration&&i.effort>i.duration*q&&t.push(`CAPACIDADE: "${i.name}" requer ${i.effort}h. Limite atual: ${i.duration*q}h.`),i.sprintId&&i.startDate&&i.endDate){const O=g(i.sprintId);if(O){const j=oe(Y(O.startDate)),se=oe(Y(O.endDate));if(qt(i.startDate,j)&&t.push(`SPRINT: "${i.name}" comeÃ§a antes da ${O.name} (${ae(j,"dd/MM")}).`),Je(i.endDate,se)){const fe=Ie(i.endDate,se);t.push(`SPRINT: "${i.name}" estourou a ${O.name} em ${fe} dia(s).`)}}}if(i.startDate&&i.endDate){let O=!1,j="";D.value.holidays.some(fe=>{const De=oe(Y(fe));return i.startDate<=De&&i.endDate>=De})&&(O=!0,j="feriado"),!O&&k&&k.daysOff.some(De=>{const pe=oe(Y(De));return i.startDate<=pe&&i.endDate>=pe})&&(O=!0,j="folga pessoal"),O&&i.duration<3&&t.push(`CALENDÃRIO: Tarefa curta "${i.name}" coincide com ${j}.`)}}}),l>0&&s/l>.2){const i=Math.round(s/l*100);t.push(`CARRY-OVER: ${i}% do esforÃ§o ativo sÃ£o tarefas "NÃ£o Planejadas". Risco de atraso nas entregas planejadas.`)}return t}),rt=G(()=>{if(!M.value.length)return[];let t=0;M.value.forEach(k=>{!k.isCompleted&&k.endDate&&k.endDate.getTime()>t&&(t=k.endDate.getTime())});const s=new Set,l=M.value.filter(k=>!k.isCompleted&&k.endDate&&k.endDate.getTime()===t),i=k=>{s.add(k);const q=M.value.find(O=>O.id===k);q&&q.dependencyId&&i(q.dependencyId)};return l.forEach(k=>i(k.id)),Array.from(s)}),Ge=()=>{const t=[],s=new Map;return D.value.squads.forEach(l=>{l.sprints.forEach(i=>{s.set(i.id,[])})}),be.value.forEach(l=>{var i;l.sprintId&&s.has(l.sprintId)&&((i=s.get(l.sprintId))==null||i.push(l))}),D.value.squads.forEach(l=>{l.sprints.forEach(i=>{const k=s.get(i.id)||[];if(k.length===0)return;const q=[...k].sort((Z,ge)=>{const qe=Z.startDate?new Date(Z.startDate).getTime():0,$e=ge.startDate?new Date(ge.startDate).getTime():0;return qe-$e});new Set(k.map(Z=>Z.responsible).filter(Boolean)).forEach(Z=>{const ge=q.filter($e=>$e.responsible===Z);let qe=ge.findIndex($e=>$e.usType==="goal");if(qe>0){const $e=ge[qe];for(let Ve=0;Ve<qe;Ve++){const Be=ge[Ve];Be.usType!=="goal"&&t.push(`PRIORIDADE (${l.name}): ${Z} estÃ¡ fazendo "${Be.name}" (Item) antes de "${$e.name}" (Meta).`)}}for(let $e=0;$e<ge.length-1;$e++){const Ve=ge[$e],Be=ge[$e+1];if(Ve.usType===Be.usType){const ft=Ve.classification||999,vt=Be.classification||999;vt<ft&&t.push(`SEQUÃŠNCIA (${l.name}): "${Be.name}" (Classif. ${vt}) deveria ser feita antes de "${Ve.name}" (Classif. ${ft}).`)}}});const j=Y(i.startDate),se=Y(i.endDate),fe=Ie(se,j),pe=D.value.teamMembers.filter(Z=>Z.squadIds.includes(l.id)).map(Z=>{const ge=fe*Z.capacity*.7;return{name:Z.name,limit:ge,used:0}});k.forEach(Z=>{if(Z.responsible&&Z.effort){const ge=pe.find(qe=>qe.name===Z.responsible);ge&&(ge.used+=Z.effort)}}),pe.forEach(Z=>{if(Z.used>Z.limit){const ge=Z.used-Z.limit,qe=k.filter($e=>$e.responsible===Z.name&&$e.usType!=="goal");qe.length>0?t.push(`SOBRECARGA (${l.name}): ${Z.name} estourou a Sprint (+${ge.toFixed(1)}h). Mova "${qe[0].name}" para a prÃ³xima.`):t.push(`RISCO CRÃTICO (${l.name}): ${Z.name} nÃ£o entregarÃ¡ as Metas da Sprint.`)}})})}),t.length===0?["OTIMIZADO: O planejamento segue prioridades (Meta > Item), ClassificaÃ§Ã£o e respeita a capacidade."]:t},nt=t=>{const s=D.value.squads.find(fe=>fe.id===t);if(!s)return{calendarDays:0,workingDays:0,totalTeamCapacity:0};const l=de(Y(s.startDate))?oe(Y(s.startDate)):oe(new Date);let i=s.deadline?oe(Y(s.deadline)):je(l,30);const k=Ie(i,l)+1;let q=0,O=l;for(;O<=i;)v(O)||q++,O=je(O,1);const se=D.value.teamMembers.filter(fe=>fe.squadIds.includes(t)).reduce((fe,De)=>fe+q*De.capacity,0);return{calendarDays:k,workingDays:q,totalTeamCapacity:se}},dt=G(()=>D.value.squads.flatMap(t=>t.sprints.map(s=>({...s,squadId:t.id}))));return{tasks:be,config:D,computedTasks:M,filteredTasks:W,totalProjectDays:u,editingTask:Ue,viewMode:Fe,visibleDateRange:w,currentViewDate:Ae,setViewMode:S,navigateView:x,addTask:Q,updateTask:n,removeTask:d,toggleTaskCompletion:p,importTasks:B,setEditingTask:I,cancelEditing:N,addHoliday:he,removeHoliday:re,addRisk:ue,removeRisk:z,isNonWorkingDay:v,addMember:_,updateMember:me,removeMember:E,addMemberDayOff:Me,removeMemberDayOff:b,moveTask:X,isTaskModalOpen:ze,openCreateModal:J,automaticRisks:ot,criticalPathIds:rt,projectCapacityStats:lt,filterSearch:kt,filterResponsible:it,filterType:ut,filterSquad:et,addSprint:xe,updateSprint:we,removeSprint:ce,projectDeadlineComputed:h,saveBaseline:le,getOptimizationSuggestions:Ge,createSnapshot:ve,restoreSnapshot:ke,tasksSnapshot:Qe,addSquad:a,updateSquad:ee,removeSquad:ne,linkMemberToSquad:A,unlinkMemberFromSquad:C,suggestedEndDate:$,getSquadStats:nt,allSprints:dt,addHolidayToSquad:c,removeHolidayFromSquad:We,addSprintToSquad:st,updateSprintInSquad:at,removeSprintFromSquad:Ee,restoreFullBackup:(t,s)=>{try{t.squads&&(D.value.squads=t.squads.map(l=>({...l,sprints:l.sprints||[],holidays:l.holidays||[],skipWeekends:l.skipWeekends??!0}))),t.teamMembers&&(D.value.teamMembers=t.teamMembers),s&&(be.value=s.map(l=>({id:l.id||crypto.randomUUID(),name:l.name||"Sem nome",duration:l.duration||1,dependencyId:l.dependencyId||null,color:l.color||"#3b82f6",type:l.type||"other",responsible:l.responsible||"",effort:l.effort||0,sprintId:l.sprintId,usType:l.usType||"item",isNotPlanned:!l.sprintId,isCompleted:l.isCompleted||!1,isMilestone:l.isMilestone||!1,classification:l.classification||0}))),H.show("Projeto restaurado com sucesso!","success")}catch(l){console.error("Erro ao restaurar backup:",l),H.show("Falha ao restaurar dados do Excel.","error")}}}}const Wt={key:0,class:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[60] flex items-center justify-center p-4"},Gt={class:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-sm overflow-hidden transform transition-all"},Qt={class:"p-4 border-b border-slate-100 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 flex justify-between items-center"},Jt={class:"font-bold text-slate-800 dark:text-slate-100"},Xt={class:"p-6"},Yt={class:"text-slate-600 dark:text-slate-300 text-sm"},Kt={class:"p-4 bg-slate-50 dark:bg-slate-900/50 flex justify-end gap-3"},ht=Te({__name:"ConfirmationModal",props:{isOpen:{type:Boolean},title:{},message:{}},emits:["confirm","cancel"],setup(H,{emit:g}){const $=g;return(h,v)=>H.isOpen?(o(),r("div",Wt,[e("div",Gt,[e("div",Qt,[e("h3",Jt,m(H.title),1),e("button",{onClick:v[0]||(v[0]=f=>$("cancel")),class:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200"},[...v[3]||(v[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])])]),e("div",Xt,[e("p",Yt,m(H.message),1)]),e("div",Kt,[e("button",{onClick:v[1]||(v[1]=f=>$("cancel")),class:"px-4 py-2 rounded text-slate-600 dark:text-slate-300 text-sm font-bold hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors"},"Cancelar"),e("button",{onClick:v[2]||(v[2]=f=>$("confirm")),class:"bg-blue-600 text-white px-4 py-2 rounded text-sm font-bold hover:bg-blue-700 transition-colors shadow-sm"},"Confirmar")])])])):R("",!0)}}),Zt={key:0,class:"fixed inset-0 z-50 flex justify-end overflow-hidden"},es={class:"relative w-full max-w-xl h-full bg-white dark:bg-slate-900 shadow-2xl flex flex-col border-l border-slate-200 dark:border-slate-800 transition-all duration-300 ease-out transform"},ts={class:"flex-shrink-0 bg-slate-50 dark:bg-slate-950 border-b border-slate-200 dark:border-slate-800 px-6 py-4 flex items-center justify-between z-10"},ss={class:"text-xl font-bold text-slate-800 dark:text-slate-100 flex items-center gap-2"},as={key:0,class:"px-6 pt-4 bg-white dark:bg-slate-900 flex-shrink-0"},ls={class:"flex p-1 bg-slate-100 dark:bg-slate-800 rounded-lg"},os={class:"flex-1 overflow-y-auto custom-scrollbar p-6 bg-white dark:bg-slate-900"},rs={class:"bg-purple-50 dark:bg-purple-900/10 p-5 rounded-xl border border-purple-100 dark:border-purple-800/30"},ns={class:"grid grid-cols-2 gap-5"},ds={class:"col-span-2"},is=["value"],us={class:"col-span-2"},cs=["disabled"],ps=["value"],bs={key:0,class:"text-[10px] text-indigo-500 mt-1 font-medium"},fs={class:"col-span-2 bg-white dark:bg-slate-800/50 p-3 rounded-lg border border-slate-200 dark:border-slate-700 grid grid-cols-2 gap-4"},vs={class:"flex gap-2"},ms={class:"flex-1 cursor-pointer relative"},xs={class:"flex-1 cursor-pointer relative"},gs={class:"col-span-2 flex items-center gap-3 mt-1 p-3 bg-white dark:bg-slate-800 rounded-lg border border-purple-100 dark:border-purple-900/50 shadow-sm cursor-pointer hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-colors"},ks={class:"space-y-4"},hs={class:"pt-2"},ys={class:"flex-1 grid grid-cols-2 gap-3"},ws={class:"col-span-2 text-xs font-bold text-green-800 dark:text-green-400 uppercase tracking-wide"},Ds=["disabled"],Ms=["value"],$s=["disabled"],_s={class:"pt-2"},Is={class:"flex-1 grid grid-cols-2 gap-3"},Ss=["disabled"],Cs=["value"],qs=["disabled"],js={class:"pt-2"},Ts={class:"flex-1 grid grid-cols-2 gap-3"},Es={class:"col-span-2 text-xs font-bold text-purple-800 dark:text-purple-400 uppercase tracking-wide"},As=["disabled"],Os=["value"],Vs=["disabled"],Us=["value"],Ns={class:"grid grid-cols-2 gap-5"},Ps={class:"grid grid-cols-2 gap-5 p-4 bg-slate-50 dark:bg-slate-800/50 rounded-xl border border-slate-100 dark:border-slate-700"},Rs={class:"flex gap-2"},Bs={class:"flex-1 cursor-pointer relative"},zs={class:"flex-1 cursor-pointer relative"},Fs={class:"flex items-center gap-3 p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg border border-indigo-100 dark:border-indigo-900/30"},Ls={key:0,class:"grid grid-cols-2 gap-5"},Hs={class:"flex gap-2"},Ws=["onClick"],Gs={key:0,class:"w-4 h-4 text-white drop-shadow-md",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Qs=["disabled"],Js=["value"],Xs={key:0,class:"text-xs text-indigo-500 dark:text-indigo-400 mt-2 font-bold flex items-center gap-1.5 bg-indigo-50 dark:bg-indigo-900/20 p-2 rounded border border-indigo-100 dark:border-indigo-800"},Ys={class:"grid grid-cols-2 gap-5"},Ks={key:0},Zs=["disabled"],ea=["value"],ta={key:0,class:"text-[10px] text-red-400 mt-1"},sa={key:1},aa={class:"relative"},la={key:1,class:"grid grid-cols-2 gap-5"},oa={class:"relative"},ra=["value"],na={key:2},da=["value"],ia={key:3,class:"text-xs font-medium text-amber-800 dark:text-amber-200 bg-amber-50 dark:bg-amber-900/40 p-3 rounded-lg border border-amber-200 dark:border-amber-800 flex items-start gap-2"},ua={class:"flex-shrink-0 border-t border-slate-200 dark:border-slate-800 p-4 bg-white dark:bg-slate-950 z-20 flex flex-col gap-3"},ca={class:"flex gap-3"},pa=["form"],ba={key:0,class:"flex gap-3 pt-1 border-t border-slate-100 dark:border-slate-800/50 mt-1"},fa={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},va={key:1,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ma=Te({__name:"TaskModal",setup(H){const{tasks:g,addTask:$,editingTask:h,updateTask:v,cancelEditing:f,removeTask:P,toggleTaskCompletion:M,config:W,isTaskModalOpen:w,allSprints:x}=Pe(),S=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899"],B={name:"",usId:"",customId:"",duration:1,dependencyId:"",color:"#3b82f6",type:"frontend",responsible:"",effort:0,sprintId:"",squadId:"",isMilestone:!1,usType:"item",classification:0},u=V({...B}),Q=V(!1),n=V({featureName:"",usId:"",sprintId:"",squadId:"",isFullstack:!1,usType:"item",classification:0,backend:{responsible:"",effort:0,enabled:!0},frontend:{responsible:"",effort:0,enabled:!0},qa:{responsible:"",effort:0,enabled:!0}}),d=V(!1),p=V(!1);Oe(h,b=>{if(b){Q.value=!1;let a="";if(b.sprintId){const ee=x.value.find(ne=>ne.id===b.sprintId);ee&&ee.squadId&&(a=ee.squadId)}u.value={name:b.name,usId:b.usId||"",customId:b.customId||"",duration:b.duration,dependencyId:b.dependencyId||"",color:b.color,type:b.type||"other",responsible:b.responsible||"",effort:b.effort||0,sprintId:b.sprintId||"",squadId:a,isMilestone:b.isMilestone||!1,usType:b.usType||"item",classification:b.classification||0}}else ue()});const I=G(()=>u.value.squadId?x.value.filter(b=>b.squadId===u.value.squadId):x.value),J=G(()=>n.value.squadId?x.value.filter(b=>b.squadId===n.value.squadId):x.value),N=G(()=>{if(!n.value.sprintId)return null;const b=x.value.find(a=>a.id===n.value.sprintId);return b&&b.squadId?W.value.squads.find(a=>a.id===b.squadId):null}),X=G(()=>{if(!u.value.sprintId)return null;const b=x.value.find(a=>a.id===u.value.sprintId);return b&&b.squadId?W.value.squads.find(a=>a.id===b.squadId):null}),le=G(()=>!h.value&&Q.value?"flow-form":"simple-form");Oe(()=>u.value.sprintId,b=>{if(b){const a=x.value.find(ee=>ee.id===b);a&&a.squadId&&(u.value.squadId=a.squadId)}}),Oe(()=>n.value.sprintId,b=>{if(b){const a=x.value.find(ee=>ee.id===b);a&&a.squadId&&(n.value.squadId=a.squadId)}});const ve=(b,a)=>W.value.teamMembers.filter(ee=>{if(a&&!ee.squadIds.includes(a))return!1;const ne=(ee.sector||"").toLowerCase();return!!(ne.includes("fullstack")||ne.includes("full stack")||b==="backend"&&(ne.includes("back")||ne.includes("devops"))||b==="frontend"&&(ne.includes("front")||ne.includes("design"))||b==="qualidade"&&(ne.includes("qa")||ne.includes("qualidade"))||b==="other")}),ke=G(()=>{let b=W.value.teamMembers;return u.value.squadId&&(b=b.filter(a=>a.squadIds.includes(u.value.squadId))),!u.value.type||u.value.type==="other"?b:ve(u.value.type,u.value.squadId)});Oe(()=>u.value.type,()=>{const b=u.value.responsible;b&&ke.value.length>0&&(ke.value.some(ee=>ee.name===b)||(u.value.responsible=""))});const he=b=>{if(!b)return 8;const a=W.value.teamMembers.find(ee=>ee.name===b);return a?a.capacity:8};Oe([()=>u.value.effort,()=>u.value.responsible],([b])=>{if(b&&b>0&&!u.value.isMilestone){const a=he(u.value.responsible);u.value.duration=Math.max(1,Math.ceil(b/a))}});const re=G(()=>{if(u.value.isMilestone)return null;const b=u.value.effort,a=u.value.duration,ee=he(u.value.responsible);return b>a*ee?`AtenÃ§Ã£o: ${b}h excede a capacidade de ${a} dia(s).`:null}),ue=()=>{u.value={...B,color:S[Math.floor(Math.random()*S.length)]},n.value={featureName:"",usId:"",sprintId:"",squadId:"",isFullstack:!1,usType:"item",classification:0,backend:{responsible:"",effort:0,enabled:!0},frontend:{responsible:"",effort:0,enabled:!0},qa:{responsible:"",effort:0,enabled:!0}},d.value=!1,p.value=!1},z=()=>{u.value.name&&(h.value?v({...h.value,...u.value,dependencyId:u.value.dependencyId||null,sprintId:u.value.sprintId||void 0,isNotPlanned:!u.value.sprintId}):$({name:u.value.name,usId:u.value.usId,customId:u.value.customId,duration:u.value.isMilestone?0:u.value.duration,dependencyId:u.value.dependencyId||null,color:u.value.color,type:u.value.type,responsible:u.value.responsible,effort:u.value.effort,sprintId:u.value.sprintId||void 0,isMilestone:u.value.isMilestone,usType:u.value.usType,classification:u.value.classification}),f())},_=()=>{if(!n.value.featureName)return;const b=crypto.randomUUID(),a=crypto.randomUUID(),ee=crypto.randomUUID(),ne={usId:n.value.usId,sprintId:n.value.sprintId||void 0,isMilestone:!1,usType:n.value.usType,classification:n.value.classification};if(n.value.backend.enabled){const xe=n.value.backend.effort,we=he(n.value.backend.responsible),ce=n.value.isFullstack?`${n.value.featureName} (Fullstack)`:`${n.value.featureName} (Back)`;$({id:b,name:ce,type:"backend",color:"#10b981",responsible:n.value.backend.responsible,effort:xe,duration:Math.max(1,Math.ceil(xe/we)),dependencyId:null,...ne})}if(!n.value.isFullstack&&n.value.frontend.enabled){const xe=n.value.frontend.effort,we=he(n.value.frontend.responsible),ce=n.value.backend.enabled?b:null;$({id:a,name:`${n.value.featureName} (Front)`,type:"frontend",color:"#3b82f6",responsible:n.value.frontend.responsible,effort:xe,duration:Math.max(1,Math.ceil(xe/we)),dependencyId:ce,...ne})}if(n.value.qa.enabled){const xe=n.value.qa.effort,we=he(n.value.qa.responsible);let ce=null;!n.value.isFullstack&&n.value.frontend.enabled?ce=a:n.value.backend.enabled&&(ce=b),$({id:ee,name:`${n.value.featureName} (QA)`,type:"qualidade",color:"#8b5cf6",responsible:n.value.qa.responsible,effort:xe,duration:Math.max(1,Math.ceil(xe/we)),dependencyId:ce,...ne})}f()},me=()=>{f(),ue()},E=()=>{h.value&&(d.value=!0)},A=()=>{h.value&&(P(h.value.id),d.value=!1)},C=()=>{h.value&&(p.value=!0)},Me=()=>{h.value&&(M(h.value.id),p.value=!1,f())};return(b,a)=>(o(),Et(Mt,{name:"slide"},{default:pt(()=>{var ee,ne,xe,we,ce;return[y(w)?(o(),r("div",Zt,[e("div",{class:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity",onClick:me}),e("div",es,[e("div",ts,[e("h3",ss,m(y(h)?"âœï¸ Editar Tarefa":"âœ¨ Nova Tarefa"),1),e("button",{onClick:me,class:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-800 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors"},[...a[36]||(a[36]=[e("svg",{class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),y(h)?R("",!0):(o(),r("div",as,[e("div",ls,[e("button",{onClick:a[0]||(a[0]=c=>Q.value=!1),class:K(["flex-1 py-2 text-sm font-bold rounded-md transition-all shadow-sm",Q.value?"text-slate-500 hover:text-slate-700 dark:text-slate-400":"bg-white dark:bg-slate-700 text-blue-600 dark:text-blue-400 shadow"])}," Tarefa Simples ",2),e("button",{onClick:a[1]||(a[1]=c=>Q.value=!0),class:K(["flex-1 py-2 text-sm font-bold rounded-md transition-all flex items-center justify-center gap-2",Q.value?"bg-white dark:bg-slate-700 text-purple-600 dark:text-purple-400 shadow":"text-slate-500 hover:text-slate-700 dark:text-slate-400"])},[...a[37]||(a[37]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1),te(" Fluxo Completo ",-1)])],2)])])),e("div",os,[Q.value&&!y(h)?(o(),r("form",{key:0,id:"flow-form",onSubmit:tt(_,["prevent"]),class:"space-y-6"},[e("div",rs,[a[49]||(a[49]=e("h4",{class:"text-xs font-bold uppercase text-purple-800 dark:text-purple-300 mb-4 flex items-center gap-2"},"ConfiguraÃ§Ã£o do Fluxo",-1)),e("div",ns,[e("div",ds,[a[39]||(a[39]=e("label",{class:"block text-xs font-bold text-slate-600 dark:text-slate-400 mb-1.5 uppercase"},"Squad",-1)),T(e("select",{"onUpdate:modelValue":a[2]||(a[2]=c=>n.value.squadId=c),class:"w-full rounded-lg border-slate-300 dark:border-slate-600 p-2.5 text-sm dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-purple-500 shadow-sm font-medium"},[a[38]||(a[38]=e("option",{value:""},"-- Selecione a Squad --",-1)),(o(!0),r(F,null,L(y(W).squads,c=>(o(),r("option",{key:c.id,value:c.id},m(c.name),9,is))),128))],512),[[ye,n.value.squadId]])]),e("div",us,[a[40]||(a[40]=e("label",{class:"block text-xs font-bold text-slate-600 dark:text-slate-400 mb-1.5 uppercase"},"Nome da Feature (Base)",-1)),T(e("input",{"onUpdate:modelValue":a[3]||(a[3]=c=>n.value.featureName=c),type:"text",placeholder:"Ex: CriaÃ§Ã£o de Login",class:"w-full rounded-lg border-slate-300 dark:border-slate-600 p-2.5 text-sm font-medium focus:ring-2 focus:ring-purple-500 focus:border-transparent dark:bg-slate-800 dark:text-white transition-all shadow-sm placeholder-slate-400",required:"",autofocus:""},null,512),[[ie,n.value.featureName]])]),e("div",null,[a[42]||(a[42]=e("label",{class:"block text-xs font-bold text-slate-600 dark:text-slate-400 mb-1.5 uppercase"},"Sprint",-1)),T(e("select",{"onUpdate:modelValue":a[4]||(a[4]=c=>n.value.sprintId=c),class:"w-full rounded-lg border-slate-300 dark:border-slate-600 p-2.5 text-sm dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-purple-500 shadow-sm font-medium",disabled:!n.value.squadId},[a[41]||(a[41]=e("option",{value:""},"-- NÃ£o Planejado --",-1)),(o(!0),r(F,null,L(J.value,c=>(o(),r("option",{key:c.id,value:c.id},m(c.name),9,ps))),128))],8,cs),[[ye,n.value.sprintId]]),N.value?(o(),r("div",bs,"Squad: "+m(N.value.name),1)):R("",!0)]),e("div",null,[a[43]||(a[43]=e("label",{class:"block text-xs font-bold text-slate-600 dark:text-slate-400 mb-1.5 uppercase"},"US ID",-1)),T(e("input",{"onUpdate:modelValue":a[5]||(a[5]=c=>n.value.usId=c),type:"text",placeholder:"Ex: US-200",class:"w-full rounded-lg border-slate-300 dark:border-slate-600 p-2.5 text-sm dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-purple-500 shadow-sm font-medium"},null,512),[[ie,n.value.usId]])]),e("div",fs,[e("div",null,[a[46]||(a[46]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-1.5"},"Prioridade",-1)),e("div",vs,[e("label",ms,[T(e("input",{type:"radio","onUpdate:modelValue":a[6]||(a[6]=c=>n.value.usType=c),value:"goal",class:"peer sr-only"},null,512),[[Xe,n.value.usType]]),a[44]||(a[44]=e("div",{class:"text-center py-2 px-2 rounded-md border border-slate-200 dark:border-slate-600 peer-checked:bg-amber-100 peer-checked:text-amber-800 peer-checked:border-amber-300 dark:peer-checked:bg-amber-900/40 dark:peer-checked:text-amber-200 dark:text-slate-300 transition-all text-xs font-bold shadow-sm hover:bg-slate-50 dark:hover:bg-slate-700"}," ðŸ† Meta ",-1))]),e("label",xs,[T(e("input",{type:"radio","onUpdate:modelValue":a[7]||(a[7]=c=>n.value.usType=c),value:"item",class:"peer sr-only"},null,512),[[Xe,n.value.usType]]),a[45]||(a[45]=e("div",{class:"text-center py-2 px-2 rounded-md border border-slate-200 dark:border-slate-600 peer-checked:bg-slate-200 peer-checked:text-slate-800 dark:peer-checked:bg-slate-600 dark:peer-checked:text-white dark:text-slate-300 transition-all text-xs font-bold shadow-sm hover:bg-slate-50 dark:hover:bg-slate-700"}," ðŸ“ Item ",-1))])])]),e("div",null,[a[47]||(a[47]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-1.5"},"ClassificaÃ§Ã£o",-1)),T(e("input",{"onUpdate:modelValue":a[8]||(a[8]=c=>n.value.classification=c),type:"number",class:"w-full rounded-md border-slate-300 dark:border-slate-600 p-2 text-sm dark:bg-slate-700 dark:text-white focus:ring-2 focus:ring-purple-500 shadow-sm font-medium",placeholder:"0"},null,512),[[ie,n.value.classification,void 0,{number:!0}]])])]),e("div",gs,[T(e("input",{type:"checkbox",id:"isFullstack","onUpdate:modelValue":a[9]||(a[9]=c=>n.value.isFullstack=c),class:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500 border-slate-300"},null,512),[[Le,n.value.isFullstack]]),a[48]||(a[48]=e("label",{for:"isFullstack",class:"text-sm font-bold text-slate-700 dark:text-slate-300 cursor-pointer select-none"},"Feature Fullstack (Remove etapa de Frontend)",-1))])])]),e("div",ks,[e("div",{class:K(["flex gap-3 items-start p-3 rounded-lg border transition-all shadow-sm",n.value.backend.enabled?"border-green-200 bg-green-50/50 dark:border-green-900/30 dark:bg-green-900/10":"border-slate-100 bg-slate-50 opacity-60"])},[e("div",hs,[T(e("input",{type:"checkbox","onUpdate:modelValue":a[10]||(a[10]=c=>n.value.backend.enabled=c),class:"rounded text-green-600 focus:ring-green-500 w-4 h-4"},null,512),[[Le,n.value.backend.enabled]])]),e("div",ys,[e("div",ws,"1. "+m(n.value.isFullstack?"Fullstack":"Backend"),1),e("div",null,[T(e("select",{"onUpdate:modelValue":a[11]||(a[11]=c=>n.value.backend.responsible=c),disabled:!n.value.backend.enabled||!n.value.squadId,class:"w-full rounded-md border-slate-300 dark:border-slate-600 p-2 text-xs dark:bg-slate-800 dark:text-white font-medium"},[a[50]||(a[50]=e("option",{value:""},"ResponsÃ¡vel",-1)),(o(!0),r(F,null,L(ve("backend",n.value.squadId),c=>(o(),r("option",{key:c.name,value:c.name},m(c.name),9,Ms))),128))],8,Ds),[[ye,n.value.backend.responsible]])]),e("div",null,[T(e("input",{"onUpdate:modelValue":a[12]||(a[12]=c=>n.value.backend.effort=c),type:"number",placeholder:"Horas",disabled:!n.value.backend.enabled,class:"w-full rounded-md border-slate-300 dark:border-slate-600 p-2 text-xs dark:bg-slate-800 dark:text-white font-medium"},null,8,$s),[[ie,n.value.backend.effort,void 0,{number:!0}]])])])],2),n.value.isFullstack?R("",!0):(o(),r("div",{key:0,class:K(["flex gap-3 items-start p-3 rounded-lg border transition-all shadow-sm",n.value.frontend.enabled?"border-blue-200 bg-blue-50/50 dark:border-blue-900/30 dark:bg-blue-900/10":"border-slate-100 bg-slate-50 opacity-60"])},[e("div",_s,[T(e("input",{type:"checkbox","onUpdate:modelValue":a[13]||(a[13]=c=>n.value.frontend.enabled=c),class:"rounded text-blue-600 focus:ring-blue-500 w-4 h-4"},null,512),[[Le,n.value.frontend.enabled]])]),e("div",Is,[a[52]||(a[52]=e("div",{class:"col-span-2 text-xs font-bold text-blue-800 dark:text-blue-400 uppercase tracking-wide"},"2. Frontend",-1)),e("div",null,[T(e("select",{"onUpdate:modelValue":a[14]||(a[14]=c=>n.value.frontend.responsible=c),disabled:!n.value.frontend.enabled||!n.value.squadId,class:"w-full rounded-md border-slate-300 dark:border-slate-600 p-2 text-xs dark:bg-slate-800 dark:text-white font-medium"},[a[51]||(a[51]=e("option",{value:""},"ResponsÃ¡vel",-1)),(o(!0),r(F,null,L(ve("frontend",n.value.squadId),c=>(o(),r("option",{key:c.name,value:c.name},m(c.name),9,Cs))),128))],8,Ss),[[ye,n.value.frontend.responsible]])]),e("div",null,[T(e("input",{"onUpdate:modelValue":a[15]||(a[15]=c=>n.value.frontend.effort=c),type:"number",placeholder:"Horas",disabled:!n.value.frontend.enabled,class:"w-full rounded-md border-slate-300 dark:border-slate-600 p-2 text-xs dark:bg-slate-800 dark:text-white font-medium"},null,8,qs),[[ie,n.value.frontend.effort,void 0,{number:!0}]])])])],2)),e("div",{class:K(["flex gap-3 items-start p-3 rounded-lg border transition-all shadow-sm",n.value.qa.enabled?"border-purple-200 bg-purple-50/50 dark:border-purple-900/30 dark:bg-purple-900/10":"border-slate-100 bg-slate-50 opacity-60"])},[e("div",js,[T(e("input",{type:"checkbox","onUpdate:modelValue":a[16]||(a[16]=c=>n.value.qa.enabled=c),class:"rounded text-purple-600 focus:ring-purple-500 w-4 h-4"},null,512),[[Le,n.value.qa.enabled]])]),e("div",Ts,[e("div",Es,m(n.value.isFullstack?"2.":"3.")+" QA / Teste",1),e("div",null,[T(e("select",{"onUpdate:modelValue":a[17]||(a[17]=c=>n.value.qa.responsible=c),disabled:!n.value.qa.enabled||!n.value.squadId,class:"w-full rounded-md border-slate-300 dark:border-slate-600 p-2 text-xs dark:bg-slate-800 dark:text-white font-medium"},[a[53]||(a[53]=e("option",{value:""},"ResponsÃ¡vel",-1)),(o(!0),r(F,null,L(ve("qualidade",n.value.squadId),c=>(o(),r("option",{key:c.name,value:c.name},m(c.name),9,Os))),128))],8,As),[[ye,n.value.qa.responsible]])]),e("div",null,[T(e("input",{"onUpdate:modelValue":a[18]||(a[18]=c=>n.value.qa.effort=c),type:"number",placeholder:"Horas",disabled:!n.value.qa.enabled,class:"w-full rounded-md border-slate-300 dark:border-slate-600 p-2 text-xs dark:bg-slate-800 dark:text-white font-medium"},null,8,Vs),[[ie,n.value.qa.effort,void 0,{number:!0}]])])])],2)])],32)):(o(),r("form",{key:1,id:"simple-form",onSubmit:tt(z,["prevent"]),class:"space-y-6 animate-fade-in"},[e("div",null,[a[55]||(a[55]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-1.5 uppercase"},"Squad",-1)),T(e("select",{"onUpdate:modelValue":a[19]||(a[19]=c=>u.value.squadId=c),class:"w-full rounded-lg border-slate-300 dark:border-slate-600 shadow-sm p-2.5 text-sm dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"},[a[54]||(a[54]=e("option",{value:""},"-- Selecione a Squad --",-1)),(o(!0),r(F,null,L(y(W).squads,c=>(o(),r("option",{key:c.id,value:c.id},m(c.name),9,Us))),128))],512),[[ye,u.value.squadId]])]),e("div",Ns,[e("div",null,[a[56]||(a[56]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-1.5 uppercase"},"ID da US",-1)),T(e("input",{"onUpdate:modelValue":a[20]||(a[20]=c=>u.value.usId=c),type:"text",placeholder:"Ex: US-104",class:"w-full rounded-lg border-slate-300 dark:border-slate-600 shadow-sm p-2.5 border focus:ring-2 focus:ring-blue-500 focus:outline-none text-sm bg-white dark:bg-slate-800 text-slate-900 dark:text-white font-medium transition-colors"},null,512),[[ie,u.value.usId]])]),e("div",null,[a[57]||(a[57]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-1.5 uppercase"},"ID da Tarefa",-1)),T(e("input",{"onUpdate:modelValue":a[21]||(a[21]=c=>u.value.customId=c),type:"text",placeholder:"Ex: T-01",class:"w-full rounded-lg border-slate-300 dark:border-slate-600 shadow-sm p-2.5 border focus:ring-2 focus:ring-blue-500 focus:outline-none text-sm bg-white dark:bg-slate-800 text-slate-900 dark:text-white font-medium transition-colors"},null,512),[[ie,u.value.customId]])])]),e("div",null,[a[58]||(a[58]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-1.5 uppercase"},"Nome da Tarefa",-1)),T(e("input",{"onUpdate:modelValue":a[22]||(a[22]=c=>u.value.name=c),type:"text",placeholder:"Ex: Desenvolver API...",class:"w-full rounded-lg border-slate-300 dark:border-slate-600 shadow-sm p-2.5 border focus:ring-2 focus:ring-blue-500 focus:outline-none text-sm bg-white dark:bg-slate-800 text-slate-900 dark:text-white font-medium transition-colors placeholder-slate-400",required:"",autofocus:""},null,512),[[ie,u.value.name]])]),e("div",Ps,[e("div",null,[a[61]||(a[61]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-1.5"},"Prioridade da US",-1)),e("div",Rs,[e("label",Bs,[T(e("input",{type:"radio","onUpdate:modelValue":a[23]||(a[23]=c=>u.value.usType=c),value:"goal",class:"peer sr-only"},null,512),[[Xe,u.value.usType]]),a[59]||(a[59]=e("div",{class:"text-center py-2.5 px-3 rounded-lg border border-slate-200 dark:border-slate-600 peer-checked:bg-amber-100 peer-checked:text-amber-800 peer-checked:border-amber-300 dark:peer-checked:bg-amber-900/40 dark:peer-checked:text-amber-200 dark:text-slate-300 transition-all text-sm font-bold shadow-sm hover:bg-slate-50 dark:hover:bg-slate-700"}," ðŸ† Meta ",-1))]),e("label",zs,[T(e("input",{type:"radio","onUpdate:modelValue":a[24]||(a[24]=c=>u.value.usType=c),value:"item",class:"peer sr-only"},null,512),[[Xe,u.value.usType]]),a[60]||(a[60]=e("div",{class:"text-center py-2.5 px-3 rounded-lg border border-slate-200 dark:border-slate-600 peer-checked:bg-slate-200 peer-checked:text-slate-800 dark:peer-checked:bg-slate-600 dark:peer-checked:text-white dark:text-slate-300 transition-all text-sm font-bold shadow-sm hover:bg-slate-50 dark:hover:bg-slate-700"}," ðŸ“ Item ",-1))])])]),e("div",null,[a[62]||(a[62]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-1.5"},"ClassificaÃ§Ã£o",-1)),T(e("input",{"onUpdate:modelValue":a[25]||(a[25]=c=>u.value.classification=c),type:"number",placeholder:"0",class:"w-full rounded-lg border-slate-300 dark:border-slate-600 shadow-sm p-2.5 border focus:ring-2 focus:ring-blue-500 focus:outline-none text-sm bg-white dark:bg-slate-800 text-slate-900 dark:text-white font-medium transition-colors"},null,512),[[ie,u.value.classification,void 0,{number:!0}]])])]),e("div",Fs,[T(e("input",{type:"checkbox",id:"isMilestone","onUpdate:modelValue":a[26]||(a[26]=c=>u.value.isMilestone=c),class:"w-5 h-5 rounded text-indigo-600 focus:ring-indigo-500 border-indigo-200"},null,512),[[Le,u.value.isMilestone]]),a[63]||(a[63]=e("label",{for:"isMilestone",class:"text-sm font-bold text-indigo-800 dark:text-indigo-200 cursor-pointer select-none"}," ðŸš© Ã‰ um Marco (Milestone)?",-1))]),u.value.isMilestone?R("",!0):(o(),r("div",Ls,[e("div",null,[a[65]||(a[65]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-1.5 uppercase"},"Tipo da Tarefa",-1)),T(e("select",{"onUpdate:modelValue":a[27]||(a[27]=c=>u.value.type=c),class:"w-full rounded-lg border-slate-300 dark:border-slate-600 shadow-sm p-2.5 border focus:ring-2 focus:ring-blue-500 focus:outline-none text-sm bg-white dark:bg-slate-800 text-slate-900 dark:text-white font-medium transition-colors"},[...a[64]||(a[64]=[e("option",{value:"frontend"},"Front-end",-1),e("option",{value:"backend"},"Back-end",-1),e("option",{value:"qualidade"},"Qualidade",-1),e("option",{value:"other"},"Outro",-1)])],512),[[ye,u.value.type]])]),e("div",null,[a[67]||(a[67]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-2 uppercase"},"Cor da Barra",-1)),e("div",Hs,[(o(),r(F,null,L(S,c=>e("button",{type:"button",key:c,onClick:We=>u.value.color=c,class:K(["w-9 h-9 rounded-full border-2 transition-transform hover:scale-110 shadow-sm flex items-center justify-center",u.value.color===c?"border-slate-800 dark:border-white scale-110 ring-2 ring-offset-2 ring-offset-white dark:ring-offset-slate-900 ring-slate-300":"border-transparent"]),style:Ce({backgroundColor:c})},[u.value.color===c?(o(),r("svg",Gs,[...a[66]||(a[66]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)])])):R("",!0)],14,Ws)),64))])])])),a[82]||(a[82]=e("hr",{class:"border-slate-100 dark:border-slate-700"},null,-1)),e("div",null,[a[70]||(a[70]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-1.5 uppercase"},"Sprint (Opcional)",-1)),T(e("select",{"onUpdate:modelValue":a[28]||(a[28]=c=>u.value.sprintId=c),class:"w-full rounded-lg border-slate-300 dark:border-slate-600 shadow-sm p-2.5 border focus:ring-2 focus:ring-purple-500 focus:outline-none text-sm bg-white dark:bg-slate-800 text-slate-900 dark:text-white font-medium transition-colors",disabled:!u.value.squadId},[a[68]||(a[68]=e("option",{value:""},"-- Sem Sprint (NÃ£o Planejado) --",-1)),(o(!0),r(F,null,L(I.value,c=>(o(),r("option",{key:c.id,value:c.id},m(c.name),9,Js))),128))],8,Qs),[[ye,u.value.sprintId]]),X.value?(o(),r("div",Xs,[a[69]||(a[69]=e("span",{class:"w-2 h-2 rounded-full bg-indigo-500"},null,-1)),te(" Restrito Ã  Squad: "+m(X.value.name),1)])):R("",!0)]),e("div",Ys,[u.value.isMilestone?R("",!0):(o(),r("div",Ks,[a[72]||(a[72]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-1.5 uppercase"},"ResponsÃ¡vel",-1)),T(e("select",{"onUpdate:modelValue":a[29]||(a[29]=c=>u.value.responsible=c),class:"w-full rounded-lg border-slate-300 dark:border-slate-600 shadow-sm p-2.5 border focus:ring-2 focus:ring-blue-500 focus:outline-none text-sm bg-white dark:bg-slate-800 text-slate-900 dark:text-white font-medium transition-colors",disabled:!u.value.squadId},[a[71]||(a[71]=e("option",{value:""},"-- Selecione --",-1)),(o(!0),r(F,null,L(ke.value,c=>(o(),r("option",{key:c.name,value:c.name},m(c.name)+" ("+m(c.sector||"Geral")+")",9,ea))),128))],8,Zs),[[ye,u.value.responsible]]),u.value.squadId?R("",!0):(o(),r("div",ta,"Selecione uma Squad primeiro"))])),u.value.isMilestone?R("",!0):(o(),r("div",sa,[a[74]||(a[74]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-1.5 uppercase"},"EsforÃ§o Estimado",-1)),e("div",aa,[T(e("input",{"onUpdate:modelValue":a[30]||(a[30]=c=>u.value.effort=c),type:"number",min:"0",class:"w-full rounded-lg border-slate-300 dark:border-slate-600 shadow-sm p-2.5 border focus:ring-2 focus:ring-blue-500 focus:outline-none text-sm pr-12 bg-white dark:bg-slate-800 text-slate-900 dark:text-white font-medium transition-colors"},null,512),[[ie,u.value.effort,void 0,{number:!0}]]),a[73]||(a[73]=e("span",{class:"absolute right-3 top-2.5 text-xs text-slate-400 dark:text-slate-500 font-bold"},"HORAS",-1))])]))]),u.value.isMilestone?(o(),r("div",na,[a[80]||(a[80]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-1.5 uppercase"},"DependÃªncia (Define a data do Marco)",-1)),T(e("select",{"onUpdate:modelValue":a[33]||(a[33]=c=>u.value.dependencyId=c),class:"w-full rounded-lg border-slate-300 dark:border-slate-600 shadow-sm p-2.5 border focus:ring-2 focus:ring-blue-500 focus:outline-none text-sm bg-white dark:bg-slate-800 text-slate-900 dark:text-white font-medium transition-colors"},[a[79]||(a[79]=e("option",{value:""},"Nenhuma (InÃ­cio do Projeto)",-1)),(o(!0),r(F,null,L(y(g),c=>T((o(),r("option",{key:c.id,value:c.id},m(c.name),9,da)),[[mt,!y(h)||c.id!==y(h).id]])),128))],512),[[ye,u.value.dependencyId]])])):(o(),r("div",la,[e("div",null,[a[76]||(a[76]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-1.5 uppercase"},"DuraÃ§Ã£o (Dias)",-1)),e("div",oa,[T(e("input",{"onUpdate:modelValue":a[31]||(a[31]=c=>u.value.duration=c),type:"number",min:"1",class:"w-full rounded-lg border-slate-300 dark:border-slate-600 shadow-sm p-2.5 border focus:ring-2 focus:ring-blue-500 focus:outline-none bg-slate-50 dark:bg-slate-700 text-slate-600 dark:text-slate-200 text-sm pr-10 transition-colors font-medium cursor-not-allowed",title:"Calculado automaticamente baseado no esforÃ§o e capacidade",readonly:""},null,512),[[ie,u.value.duration,void 0,{number:!0}]]),a[75]||(a[75]=e("span",{class:"absolute right-3 top-2.5 text-xs text-slate-400 dark:text-slate-400 font-bold"},"DIAS",-1))])]),e("div",null,[a[78]||(a[78]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-1.5 uppercase"},"DependÃªncia",-1)),T(e("select",{"onUpdate:modelValue":a[32]||(a[32]=c=>u.value.dependencyId=c),class:"w-full rounded-lg border-slate-300 dark:border-slate-600 shadow-sm p-2.5 border focus:ring-2 focus:ring-blue-500 focus:outline-none text-sm bg-white dark:bg-slate-800 text-slate-900 dark:text-white font-medium transition-colors"},[a[77]||(a[77]=e("option",{value:""},"Nenhuma",-1)),(o(!0),r(F,null,L(y(g),c=>T((o(),r("option",{key:c.id,value:c.id},m(c.name),9,ra)),[[mt,!y(h)||c.id!==y(h).id]])),128))],512),[[ye,u.value.dependencyId]])])])),re.value?(o(),r("div",ia,[a[81]||(a[81]=e("svg",{class:"h-5 w-5 flex-shrink-0 text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),e("span",null,m(re.value),1)])):R("",!0)],32))]),e("div",ua,[e("div",ca,[e("button",{type:"button",onClick:me,class:"px-5 py-3 rounded-lg border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 font-bold hover:bg-slate-50 dark:hover:bg-slate-700 transition text-sm w-1/3"},"Cancelar"),e("button",{type:"submit",form:le.value,class:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-lg font-bold shadow-lg shadow-blue-200 dark:shadow-none text-sm transition-colors"},m(y(h)?"Salvar AlteraÃ§Ãµes":"Criar Tarefa"),9,pa)]),y(h)?(o(),r("div",ba,[e("button",{type:"button",onClick:E,class:"flex-1 text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 py-2 text-xs font-bold flex items-center justify-center gap-1 transition-colors border border-transparent hover:border-red-100 dark:hover:border-red-900 rounded"},[...a[83]||(a[83]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),te(" Excluir ",-1)])]),e("button",{type:"button",onClick:C,class:K(["flex-1 py-2 text-xs font-bold flex items-center justify-center gap-1 transition-colors border border-transparent rounded",y(h).isCompleted?"text-slate-500 hover:text-slate-700 hover:bg-slate-100 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:bg-slate-700":"text-green-600 hover:text-green-700 hover:bg-green-50 dark:text-green-400 dark:hover:text-green-300 dark:hover:bg-green-900/30"])},[y(h).isCompleted?(o(),r("svg",va,[...a[85]||(a[85]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):(o(),r("svg",fa,[...a[84]||(a[84]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])),te(" "+m(y(h).isCompleted?"Reabrir":"Concluir"),1)],2)])):R("",!0)])]),Se(ht,{"is-open":d.value,title:"Excluir Tarefa",message:`Tem a certeza que deseja excluir a tarefa '${(ee=y(h))==null?void 0:ee.name}'?`,onConfirm:A,onCancel:a[34]||(a[34]=c=>d.value=!1)},null,8,["is-open","message"]),Se(ht,{"is-open":p.value,title:(ne=y(h))!=null&&ne.isCompleted?"Reabrir Tarefa":"Concluir Tarefa",message:(xe=y(h))!=null&&xe.isCompleted?`Deseja marcar '${(we=y(h))==null?void 0:we.name}' como em andamento novamente?`:`Confirmar a conclusÃ£o da tarefa '${(ce=y(h))==null?void 0:ce.name}'?`,onConfirm:Me,onCancel:a[35]||(a[35]=c=>p.value=!1)},null,8,["is-open","title","message"])])):R("",!0)]}),_:1}))}}),Re=(H,g)=>{const $=H.__vccOpts||H;for(const[h,v]of g)$[h]=v;return $},xa=Re(ma,[["__scopeId","data-v-0023a999"]]),ga={class:"space-y-6 animate-fade-in pb-10"},ka={class:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col md:flex-row gap-6"},ha={class:"flex-1"},ya=["value"],wa=["value"],Da={key:0,class:"bg-slate-50 dark:bg-slate-800/50 border-2 border-dashed border-slate-200 dark:border-slate-700 rounded-2xl p-20 text-center transition-colors"},Ma={key:1,class:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-start"},$a={class:"space-y-6"},_a={class:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700"},Ia={class:"grid grid-cols-2 gap-6 mb-8"},Sa={class:"space-y-4 mb-8"},Ca={class:"text-sm font-semibold text-slate-700 dark:text-slate-300"},qa=["onUpdate:modelValue"],ja={class:"flex items-center gap-4 pt-6 border-t border-slate-100 dark:border-slate-700"},Ta={class:"bg-slate-900 dark:bg-indigo-950 text-white p-6 rounded-xl shadow-lg border border-slate-800 dark:border-indigo-900 transition-colors"},Ea={class:"grid grid-cols-2 gap-8"},Aa={class:"border-r border-slate-700 dark:border-indigo-900"},Oa={class:"block text-4xl font-black mb-1"},Va={class:"text-emerald-400"},Ua={class:"block text-4xl font-black mb-1"},Na={class:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700"},Pa={class:"bg-slate-50 dark:bg-slate-900/50 p-1 rounded-xl border border-slate-100 dark:border-slate-700"},Ra={class:"space-y-1 max-h-56 overflow-y-auto p-2"},Ba={key:0,class:"text-sm text-green-600 dark:text-green-400 flex items-center gap-2 p-3 font-semibold bg-white dark:bg-slate-800 rounded-lg shadow-sm"},za={class:"space-y-6"},Fa={class:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700"},La={class:"flex gap-3 mb-6"},Ha={class:"flex flex-wrap gap-2"},Wa=["onClick"],Ga={class:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700"},Qa={class:"space-y-4 max-h-[500px] overflow-y-auto pr-2 custom-scrollbar"},Ja={key:0,class:"space-y-4 animate-fade-in"},Xa={class:"flex items-center justify-between"},Ya={class:"font-bold text-base text-slate-700 dark:text-slate-200"},Ka={class:"flex gap-3"},Za={class:"flex gap-3"},el={class:"flex flex-wrap gap-2 mt-3"},tl=["onClick"],sl={key:1,class:"flex justify-between items-center"},al={class:"flex flex-col"},ll={class:"text-base font-bold text-slate-700 dark:text-slate-200"},ol={class:"text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wide"},rl=["onClick"],nl=Te({__name:"ProjectConfig",setup(H){const{config:g,addHolidayToSquad:$,removeHolidayFromSquad:h,updateSprintInSquad:v,updateMember:f,addMemberDayOff:P,removeMemberDayOff:M,automaticRisks:W}=Pe(),w=V(""),x=V(""),S=V({id:"",name:"",startDate:"",endDate:"",reviewDate:"",retroDate:"",refinementDate:"",planningDate:"",skipWeekends:!0}),B=V(""),u=V(null),Q=V(""),n=V(8),d=G(()=>g.value.squads.find(z=>z.id===w.value)),p=G(()=>{var z;return((z=d.value)==null?void 0:z.sprints)||[]}),I=G(()=>p.value.find(z=>z.id===x.value)),J=G(()=>w.value?g.value.teamMembers.filter(z=>z.squadIds.includes(w.value)):[]);Oe(x,z=>{z&&I.value&&(S.value={...I.value,reviewDate:I.value.reviewDate||"",retroDate:I.value.retroDate||"",refinementDate:I.value.refinementDate||"",planningDate:I.value.planningDate||"",skipWeekends:I.value.skipWeekends??!0})});const N=G(()=>{var b;if(!S.value.startDate||!S.value.endDate)return{working:0,calendar:0};const z=Y(S.value.startDate),_=Y(S.value.endDate),me=ct({start:z,end:_}),E=me.length,A=((b=d.value)==null?void 0:b.holidays)||[],C=[S.value.reviewDate,S.value.retroDate,S.value.refinementDate,S.value.planningDate];return{working:me.filter(a=>{const ee=ae(a,"yyyy-MM-dd"),ne=S.value.skipWeekends&&Ne(a),xe=A.includes(ee),we=C.includes(ee);return!ne&&!xe&&!we}).length,calendar:E}}),X=()=>{w.value&&x.value&&v(w.value,x.value,{...S.value})},le=()=>{B.value&&w.value&&($(w.value,B.value),B.value="")},ve=z=>{const _=g.value.teamMembers.findIndex(me=>me.name===z.name);_!==-1&&(u.value=_,n.value=g.value.teamMembers[_].capacity)},ke=()=>{if(u.value!==null){const z=g.value.teamMembers[u.value];f(u.value,z.name,n.value,z.sector,z.squadIds),u.value=null}},he=()=>{u.value!==null&&Q.value&&(P(u.value,Q.value),Q.value="")},re=z=>{"showPicker"in HTMLInputElement.prototype&&z.target.showPicker()},ue=z=>z?ae(Y(z),"dd/MM/yyyy"):"-";return(z,_)=>{var me;return o(),r("div",ga,[e("div",ka,[e("div",ha,[_[10]||(_[10]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2"},"1. Selecione a Squad",-1)),T(e("select",{"onUpdate:modelValue":_[0]||(_[0]=E=>w.value=E),onChange:_[1]||(_[1]=E=>x.value=""),class:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white text-sm font-bold h-12 focus:ring-2 focus:ring-indigo-500 transition-all cursor-pointer"},[_[9]||(_[9]=e("option",{value:"",disabled:""},"Escolha uma Squad",-1)),(o(!0),r(F,null,L(y(g).squads,E=>(o(),r("option",{key:E.id,value:E.id},"Squad: "+m(E.name),9,ya))),128))],544),[[ye,w.value]])]),e("div",{class:K(["flex-1",{"opacity-50 pointer-events-none":!w.value}])},[_[12]||(_[12]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2"},"2. Selecione a Sprint",-1)),T(e("select",{"onUpdate:modelValue":_[2]||(_[2]=E=>x.value=E),class:"w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white text-sm font-bold h-12 focus:ring-2 focus:ring-indigo-500 transition-all cursor-pointer"},[_[11]||(_[11]=e("option",{value:"",disabled:""},"Escolha a Sprint para configurar",-1)),(o(!0),r(F,null,L(p.value,E=>(o(),r("option",{key:E.id,value:E.id},m(E.name)+" ("+m(ue(E.startDate))+")",9,wa))),128))],512),[[ye,x.value]])],2)]),x.value?(o(),r("div",Ma,[e("div",$a,[e("div",_a,[_[18]||(_[18]=e("h3",{class:"font-bold text-lg text-slate-800 dark:text-slate-100 mb-6 flex items-center gap-2 border-b border-slate-100 dark:border-slate-700 pb-4"},[e("span",{class:"p-2 bg-blue-100 dark:bg-blue-900/40 rounded-lg text-blue-600 dark:text-blue-400 text-xl"},"ðŸ“…"),te(" PerÃ­odo da Sprint ")],-1)),e("div",Ia,[e("div",null,[_[14]||(_[14]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider"},"InÃ­cio",-1)),T(e("input",{type:"date","onUpdate:modelValue":_[3]||(_[3]=E=>S.value.startDate=E),onChange:X,onClick:re,class:"w-full rounded-xl border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white text-base h-12 px-4 dark:[color-scheme:dark] focus:ring-2 focus:ring-blue-500 transition-all cursor-pointer shadow-sm"},null,544),[[ie,S.value.startDate]])]),e("div",null,[_[15]||(_[15]=e("label",{class:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider"},"Fim",-1)),T(e("input",{type:"date","onUpdate:modelValue":_[4]||(_[4]=E=>S.value.endDate=E),onChange:X,onClick:re,class:"w-full rounded-xl border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white text-base h-12 px-4 dark:[color-scheme:dark] focus:ring-2 focus:ring-blue-500 transition-all cursor-pointer shadow-sm"},null,544),[[ie,S.value.endDate]])])]),e("div",Sa,[_[16]||(_[16]=e("h4",{class:"text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-widest mb-2"},"Ritos (Dias nÃ£o produtivos)",-1)),(o(),r(F,null,L(["Planning","Refinement","Review","Retrospective"],E=>e("div",{key:E,class:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-900/50 rounded-xl border border-slate-100 dark:border-slate-700/50 hover:border-blue-300 dark:hover:border-blue-700 transition-colors"},[e("span",Ca,m(E),1),T(e("input",{type:"date","onUpdate:modelValue":A=>S.value[`${E.toLowerCase()}Date`]=A,onChange:X,onClick:re,class:"text-sm font-medium rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white h-10 px-3 dark:[color-scheme:dark] focus:ring-2 focus:ring-blue-500 transition-all cursor-pointer"},null,40,qa),[[ie,S.value[`${E.toLowerCase()}Date`]]])])),64))]),e("div",ja,[T(e("input",{type:"checkbox","onUpdate:modelValue":_[5]||(_[5]=E=>S.value.skipWeekends=E),onChange:X,class:"w-6 h-6 rounded border-slate-300 dark:border-slate-600 text-blue-600 focus:ring-blue-500 cursor-pointer",id:"skipW"},null,544),[[Le,S.value.skipWeekends]]),_[17]||(_[17]=e("label",{for:"skipW",class:"text-base font-semibold text-slate-700 dark:text-slate-300 cursor-pointer select-none"},"Pular Finais de Semana",-1))])]),e("div",Ta,[_[21]||(_[21]=e("h3",{class:"text-xs font-bold uppercase text-slate-400 dark:text-indigo-300 mb-6 tracking-wider"},"Capacidade da Sprint",-1)),e("div",Ea,[e("div",Aa,[e("span",Oa,m(N.value.calendar),1),_[19]||(_[19]=e("span",{class:"text-[11px] font-bold text-slate-500 dark:text-indigo-400 uppercase tracking-wider"},"Dias Corridos",-1))]),e("div",Va,[e("span",Ua,m(N.value.working),1),_[20]||(_[20]=e("span",{class:"text-[11px] font-bold text-emerald-600 dark:text-emerald-500 uppercase tracking-wider"},"Dias Ãšteis Produtivos",-1))])])]),e("div",Na,[_[23]||(_[23]=e("h3",{class:"font-bold text-lg text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2"},[e("div",{class:"p-1.5 bg-red-100 dark:bg-red-900/30 rounded-lg text-red-600 dark:text-red-400"},"âš ï¸"),te(" Riscos Detectados ")],-1)),e("div",Pa,[e("ul",Ra,[y(W).length===0?(o(),r("li",Ba,"âœ… Nenhum risco crÃ­tico detectado.")):R("",!0),(o(!0),r(F,null,L(y(W),(E,A)=>(o(),r("li",{key:A,class:"flex items-start gap-3 p-3 rounded-lg bg-white dark:bg-slate-800 border border-red-100 dark:border-red-900/30 text-sm text-slate-700 dark:text-slate-300 shadow-sm"},[_[22]||(_[22]=e("span",{class:"text-red-500 font-bold text-lg leading-none"},"â€¢",-1)),e("span",null,m(E),1)]))),128))])])])]),e("div",za,[e("div",Fa,[_[24]||(_[24]=e("h3",{class:"font-bold text-lg text-slate-800 dark:text-slate-100 mb-5 flex items-center gap-2 border-b border-slate-100 dark:border-slate-700 pb-4"},[e("span",{class:"p-2 bg-amber-100 dark:bg-amber-900/40 rounded-lg text-amber-600 dark:text-amber-400 text-xl"},"ðŸï¸"),te(" Feriados Coletivos ")],-1)),e("div",La,[T(e("input",{"onUpdate:modelValue":_[6]||(_[6]=E=>B.value=E),type:"date",onClick:re,class:"flex-1 rounded-xl border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white text-sm h-12 px-4 dark:[color-scheme:dark] focus:ring-2 focus:ring-amber-500 transition-all cursor-pointer"},null,512),[[ie,B.value]]),e("button",{onClick:le,class:"bg-amber-500 hover:bg-amber-600 text-white px-6 rounded-xl font-bold transition-all shadow-md active:scale-95 text-lg"},"+")]),e("div",Ha,[(o(!0),r(F,null,L((me=d.value)==null?void 0:me.holidays,E=>(o(),r("div",{key:E,class:"flex items-center bg-slate-100 dark:bg-slate-700 px-4 py-2 rounded-lg text-sm font-bold text-slate-700 dark:text-slate-200 border border-slate-200 dark:border-slate-600 group transition-all"},[te(m(ue(E))+" ",1),e("button",{onClick:A=>y(h)(w.value,E),class:"ml-3 text-red-500 opacity-0 group-hover:opacity-100 transition-opacity hover:scale-125 font-black"},"Ã—",8,Wa)]))),128))])]),e("div",Ga,[_[25]||(_[25]=e("h3",{class:"font-bold text-lg text-slate-800 dark:text-slate-100 mb-5 flex items-center gap-2 border-b border-slate-100 dark:border-slate-700 pb-4"},[e("span",{class:"p-2 bg-indigo-100 dark:bg-indigo-900/40 rounded-lg text-indigo-600 dark:text-indigo-400 text-xl"},"ðŸ‘¤"),te(" Day Off Individual ")],-1)),e("div",Qa,[(o(!0),r(F,null,L(J.value,E=>(o(),r("div",{key:E.name,class:"p-4 border rounded-2xl border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-900/30 transition-all hover:shadow-md"},[u.value!==null&&y(g).teamMembers[u.value].name===E.name?(o(),r("div",Ja,[e("div",Xa,[e("span",Ya,m(E.name),1),e("div",Ka,[T(e("input",{"onUpdate:modelValue":_[7]||(_[7]=A=>n.value=A),type:"number",class:"w-20 h-10 px-2 text-sm font-bold rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-green-500"},null,512),[[ie,n.value,void 0,{number:!0}]]),e("button",{onClick:ke,class:"text-green-600 font-bold text-sm hover:text-green-700 transition-colors bg-green-50 dark:bg-green-900/20 px-3 rounded-lg"},"OK")])]),e("div",Za,[T(e("input",{"onUpdate:modelValue":_[8]||(_[8]=A=>Q.value=A),type:"date",onClick:re,class:"flex-1 text-sm h-11 px-4 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white dark:[color-scheme:dark] focus:ring-2 focus:ring-indigo-500"},null,512),[[ie,Q.value]]),e("button",{onClick:he,class:"bg-indigo-600 hover:bg-indigo-700 text-white px-5 rounded-xl text-lg font-bold transition-all shadow-md active:scale-95"},"+")]),e("div",el,[(o(!0),r(F,null,L(E.daysOff,A=>(o(),r("span",{key:A,class:"bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 px-3 py-1.5 rounded-lg text-xs font-bold flex items-center border border-red-100 dark:border-red-800 group shadow-sm"},[te(m(ue(A))+" ",1),e("button",{onClick:C=>y(M)(u.value,A),class:"ml-2 transition-transform hover:scale-125"},"Ã—",8,tl)]))),128))])])):(o(),r("div",sl,[e("div",al,[e("span",ll,m(E.name),1),e("span",ol,m(E.daysOff.length)+" Folgas",1)]),e("button",{onClick:A=>ve(E),class:"p-3 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 transition-all text-slate-400 dark:text-slate-500 hover:text-indigo-600 dark:hover:text-indigo-400 active:scale-95"}," âš™ï¸ ",8,rl)]))]))),128))])])])])):(o(),r("div",Da,[..._[13]||(_[13]=[e("div",{class:"text-5xl mb-4"},"ðŸ—“ï¸",-1),e("h3",{class:"text-xl font-bold text-slate-600 dark:text-slate-300"},"Aguardando SeleÃ§Ã£o",-1),e("p",{class:"text-sm text-slate-500 dark:text-slate-400 max-w-xs mx-auto mt-2"},"Selecione uma Squad e uma Sprint acima para liberar as configuraÃ§Ãµes.",-1)])]))])}}}),dl=Re(nl,[["__scopeId","data-v-d6f06929"]]);function il(){return{exportToPDF:(v,f,P)=>{var S;const M=new Pt;M.setFontSize(18),M.setTextColor(40,40,40),M.text("RelatÃ³rio de Projeto: Gantt-ficator",14,20),M.setFontSize(10),M.setTextColor(100,100,100),M.text(`Gerado em: ${ae(new Date,"dd/MM/yyyy HH:mm")}`,14,26),M.line(14,30,196,30),M.setFontSize(12),M.setTextColor(0,0,0),M.text("Resumo Executivo",14,38),M.setFontSize(10);const W=f.projectStartDate?ae(new Date(f.projectStartDate),"dd/MM/yyyy"):"N/A",w=f.deadline?ae(new Date(f.deadline),"dd/MM/yyyy"):"N/A";M.text(`InÃ­cio: ${W}`,14,45),M.text(`Deadline: ${w}`,80,45),M.text(`Equipe: ${((S=f.teamMembers)==null?void 0:S.length)||0} membros`,140,45);let x=55;P.length>0&&(M.setFontSize(11),M.setTextColor(185,28,28),M.text("âš ï¸ Riscos e Alertas Identificados:",14,x),M.setFontSize(9),M.setTextColor(60,60,60),P.forEach(B=>{x+=6,M.text(`â€¢ ${B}`,14,x)}),x+=10),Rt(M,{startY:x,head:[["Tarefa","Tipo","Resp.","DuraÃ§Ã£o","InÃ­cio","Fim"]],body:v.map(B=>[B.name,B.type.toUpperCase(),B.responsible||"-",`${B.duration}d`,B.formattedStartDate||"",B.formattedEndDate||""]),theme:"grid",headStyles:{fillColor:[59,130,246]},styles:{fontSize:8},alternateRowStyles:{fillColor:[249,250,251]}}),M.save(`Gantt-Relatorio-${ae(new Date,"yyyy-MM-dd")}.pdf`)},exportToExcel:(v,f)=>{const P=_e.book_new(),M=_e.json_to_sheet(v.map(x=>({ID:x.id,Nome:x.name,Tipo:x.type,Responsavel:x.responsible,Esforco:x.effort,Duracao:x.duration,Inicio:x.formattedStartDate,Dependencia:x.dependencyId,Sprint_ID:x.sprintId,Meta:x.usType==="goal"?"Sim":"NÃ£o"})));_e.book_append_sheet(P,M,"Tarefas");const W=_e.json_to_sheet(f.squads.map(x=>({ID:x.id,Nome:x.name,Cor:x.color,Inicio_Squad:x.startDate,Prazo_Squad:x.deadline})));_e.book_append_sheet(P,W,"Squads");const w=_e.json_to_sheet(f.teamMembers.map(x=>({Nome:x.name,Capacidade:x.capacity,Setor:x.sector,Squads:x.squadIds.join(", ")})));_e.book_append_sheet(P,w,"Membros"),xt(P,`Gantt-Backup-Completo-${ae(new Date,"yyyy-MM-dd")}.xlsx`)},importFromExcel:v=>new Promise((f,P)=>{const M=new FileReader;M.onload=W=>{var w;try{const x=new Uint8Array((w=W.target)==null?void 0:w.result),S=zt(x,{type:"array"}),B=S.Sheets.Tarefas,u=_e.sheet_to_json(B).map(d=>({id:d.ID||crypto.randomUUID(),name:d.Nome,duration:Number(d.Duracao)||1,type:d.Tipo||"other",responsible:d.Responsavel,effort:Number(d.Esforco)||0,dependencyId:d.Dependencia||null,sprintId:d.Sprint_ID,usType:d.Meta==="Sim"?"goal":"item"})),Q=S.Sheets.Squads,n=Q?_e.sheet_to_json(Q).map(d=>({id:d.ID||crypto.randomUUID(),name:d.Nome,color:d.Cor||"#3b82f6",startDate:d.Inicio_Squad||ae(new Date,"yyyy-MM-dd"),deadline:d.Prazo_Squad||"",sprints:[],holidays:[],skipWeekends:!0})):[];f({tasks:u,config:{squads:n}})}catch(x){P(x)}},M.readAsArrayBuffer(v)}),downloadImportTemplate:()=>{const v=_e.book_new(),f=[{Nome:"Tarefa Exemplo",Tipo:"backend",Responsavel:"",Esforco:8,Duracao:1,Meta:"Sim"}];_e.book_append_sheet(v,_e.json_to_sheet(f),"Tarefas"),_e.book_append_sheet(v,_e.json_to_sheet([{Nome:"Squad Exemplo",Cor:"#3b82f6"}]),"Squads"),xt(v,"Modelo-Importacao-Gantt.xlsx")},clearAllData:()=>{localStorage.clear()}}}const ul={class:"grid grid-cols-2 md:grid-cols-6 gap-4 animate-fade-in mb-8"},cl=Te({__name:"ProjectActions",setup(H){const{exportToExcel:g,exportToPDF:$,downloadImportTemplate:h,importFromExcel:v,clearAllData:f}=il(),{tasks:P,config:M,saveBaseline:W,restoreFullBackup:w}=Pe(),x=bt(),S=V(null),B=()=>{var n;(n=S.value)==null||n.click()},u=async n=>{const d=n.target;if(d.files&&d.files[0])try{const p=await v(d.files[0]);p&&p.tasks.length>0?(w(p.config,p.tasks),x.show("Projeto e configuraÃ§Ãµes importados com sucesso!","success")):x.show("Nenhuma tarefa encontrada no arquivo.","error")}catch(p){console.error(p),x.show('Erro ao ler o arquivo Excel. Verifique se as abas "Tarefas" e "Squads" existem.',"error")}finally{d.value=""}},Q=()=>{confirm("Tem certeza? Isso apagarÃ¡ todos os dados locais (Tarefas, Squads e Membros) permanentemente.")&&(f(),window.location.reload())};return(n,d)=>(o(),r("div",ul,[e("div",{class:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group cursor-pointer flex flex-col items-center justify-center gap-2 text-center",onClick:d[0]||(d[0]=p=>y(g)(y(P),y(M)))},[...d[4]||(d[4]=[e("div",{class:"w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center text-green-600 dark:text-green-400 group-hover:scale-110 transition-transform"},[e("svg",{class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1),e("div",null,[e("h3",{class:"font-bold text-slate-700 dark:text-slate-200 text-sm"},"Salvar Excel")],-1)])]),e("div",{class:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group cursor-pointer flex flex-col items-center justify-center gap-2 text-center",onClick:d[1]||(d[1]=p=>y($)(y(P),y(M),[]))},[...d[5]||(d[5]=[e("div",{class:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-lg flex items-center justify-center text-red-600 dark:text-red-400 group-hover:scale-110 transition-transform"},[e("svg",{class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})])],-1),e("div",null,[e("h3",{class:"font-bold text-slate-700 dark:text-slate-200 text-sm"},"Gerar PDF")],-1)])]),e("div",{class:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group cursor-pointer flex flex-col items-center justify-center gap-2 text-center",onClick:d[2]||(d[2]=(...p)=>y(h)&&y(h)(...p))},[...d[6]||(d[6]=[e("div",{class:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center text-blue-600 dark:text-blue-400 group-hover:scale-110 transition-transform"},[e("svg",{class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})])],-1),e("div",null,[e("h3",{class:"font-bold text-slate-700 dark:text-slate-200 text-sm"},"Baixar Modelo")],-1)])]),e("div",{class:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group cursor-pointer flex flex-col items-center justify-center gap-2 text-center",onClick:B},[e("input",{type:"file",ref_key:"fileInput",ref:S,class:"hidden",onChange:u,accept:".xlsx"},null,544),d[7]||(d[7]=e("div",{class:"w-10 h-10 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center text-purple-600 dark:text-purple-400 group-hover:scale-110 transition-transform"},[e("svg",{class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})])],-1)),d[8]||(d[8]=e("div",null,[e("h3",{class:"font-bold text-slate-700 dark:text-slate-200 text-sm"},"Importar Dados")],-1))]),e("div",{class:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group cursor-pointer flex flex-col items-center justify-center gap-2 text-center",onClick:d[3]||(d[3]=(...p)=>y(W)&&y(W)(...p))},[...d[9]||(d[9]=[e("div",{class:"w-10 h-10 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg flex items-center justify-center text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition-transform"},[e("svg",{class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})])],-1),e("div",null,[e("h3",{class:"font-bold text-slate-700 dark:text-slate-200 text-sm"},"Definir Baseline")],-1)])]),e("div",{class:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-red-200 dark:border-red-900/50 shadow-sm hover:shadow-md transition-all group cursor-pointer flex flex-col items-center justify-center gap-2 text-center",onClick:Q},[...d[10]||(d[10]=[e("div",{class:"w-10 h-10 bg-slate-100 dark:bg-slate-700 rounded-lg flex items-center justify-center text-slate-500 dark:text-slate-400 group-hover:bg-red-100 dark:group-hover:bg-red-900/50 group-hover:text-red-600 transition-colors"},[e("svg",{class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})])],-1),e("div",null,[e("h3",{class:"font-bold text-slate-700 dark:text-slate-200 text-sm group-hover:text-red-600 transition-colors"},"Resetar")],-1)])])]))}}),pl={class:"bg-white dark:bg-slate-800 rounded-lg shadow overflow-hidden border border-slate-200 dark:border-slate-700 flex flex-col h-full select-none transition-colors duration-300"},bl={class:"p-4 border-b border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 flex flex-col gap-3 z-30 relative shadow-sm"},fl={class:"flex flex-col lg:flex-row justify-between items-start lg:items-center w-full gap-4"},vl={class:"flex flex-col sm:flex-row items-start sm:items-center gap-4 w-full lg:w-auto"},ml={key:0,class:"flex items-center gap-2"},xl=["value"],gl={class:"flex bg-slate-100 dark:bg-slate-700 rounded-lg p-1 gap-1 overflow-x-auto max-w-full"},kl={key:1,class:"flex items-center gap-2 lg:ml-4 self-center sm:self-auto"},hl={class:"text-sm font-bold text-slate-800 dark:text-slate-200 min-w-[120px] text-center select-none uppercase text-[11px] tracking-wide"},yl={class:"relative ml-auto z-30 flex items-center gap-3"},wl={class:"flex items-center bg-slate-100 dark:bg-slate-700 rounded-lg p-1 border border-slate-200 dark:border-slate-600"},Dl={class:"flex items-center gap-1"},Ml={class:"relative"},$l={key:0,class:"w-4 h-4 animate-pulse",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},_l={key:1,class:"w-4 h-4 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Il={key:2,class:"bg-red-500 text-white text-[9px] px-1 rounded-full"},Sl={key:0,class:"absolute right-0 top-full mt-2 w-80 bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-200 dark:border-slate-700 overflow-hidden animate-fade-in z-50"},Cl={class:"p-3 border-b border-slate-100 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50 flex justify-between items-center"},ql={class:"max-h-60 overflow-y-auto p-2 custom-scrollbar"},jl={class:"space-y-1"},Tl={key:0,class:"text-center p-4 text-slate-400 text-xs"},El={class:"relative flex h-2 w-2"},Al={key:0,class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"},Ol={class:"flex flex-col lg:flex-row items-stretch lg:items-center gap-2 pt-3 border-t border-slate-100 dark:border-slate-700"},Vl={class:"relative group flex-1 max-w-full lg:max-w-xs"},Ul={class:"flex gap-2 w-full lg:w-auto"},Nl=["value"],Pl={class:"sticky top-0 z-20 shadow-sm"},Rl={class:"flex bg-slate-100 dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 h-[25px] text-xs text-slate-500 dark:text-slate-400 uppercase tracking-wider font-bold"},Bl={class:"flex border-b border-slate-200 dark:border-slate-700 h-[30px] bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300"},zl=["title"],Fl={class:"font-bold"},Ll={class:"text-[8px] uppercase"},Hl={class:"absolute inset-0 flex pointer-events-none"},Wl={class:"relative"},Gl={class:"absolute inset-0 flex pointer-events-none"},Ql=["width","height"],Jl=["d","stroke-width"],Xl={class:"py-2 space-y-1 relative z-10"},Yl={key:0,class:"sticky left-0 bg-slate-100/90 dark:bg-slate-800/90 backdrop-blur-sm border-y border-slate-200 dark:border-slate-700 px-4 py-1.5 text-xs font-bold text-slate-600 dark:text-slate-300 uppercase tracking-wider flex items-center gap-2 z-10 my-2"},Kl={class:"ml-auto text-[9px] bg-slate-200 dark:bg-slate-700 px-1.5 rounded text-slate-500"},Zl=["onMousedown"],eo={key:0,class:"bg-amber-100 dark:bg-amber-900 text-amber-700 dark:text-amber-200 rounded-full px-1 text-[9px] font-bold"},to={key:1,class:"bg-green-500 text-white rounded-full px-1 text-[9px] font-bold"},so={key:1,class:"absolute right-1 top-0.5 w-5 h-5 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center text-[9px] font-bold border border-white/40 shadow-sm"},ao={key:0,class:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4"},lo={class:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[80vh]"},oo={class:"p-4 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center bg-indigo-50 dark:bg-indigo-900/20"},ro={class:"p-6 overflow-y-auto custom-scrollbar space-y-4"},no={key:0,class:"space-y-2"},io={class:"text-xl mt-[-2px]"},uo={class:"p-4 border-t border-slate-100 dark:border-slate-700 flex justify-end"},co=Te({__name:"GanttChart",setup(H){const{filteredTasks:g,config:$,totalProjectDays:h,setEditingTask:v,editingTask:f,criticalPathIds:P,viewMode:M,visibleDateRange:W,setViewMode:w,navigateView:x,currentViewDate:S,filterSearch:B,filterResponsible:u,filterType:Q,filterSquad:n,moveTask:d,automaticRisks:p,getOptimizationSuggestions:I,createSnapshot:J,restoreSnapshot:N,tasksSnapshot:X}=Pe(),le=V(!1),ve=V(!1),ke=V(null),he=V(0),re=V("none"),ue=V(!1),z=V(null),_=V(0),me=V(0),E=V(!1),A=V([]),C=()=>{X.value||J(),A.value=I(),E.value=!0},Me=()=>{confirm("Deseja descartar todas as alteraÃ§Ãµes atuais e voltar para o ponto salvo?")&&N()},b=()=>{J()},a=(U,t)=>{U.button!==0||M.value==="month"||(U.stopPropagation(),ue.value=!0,z.value=t.id,_.value=U.clientX,me.value=U.clientX,window.addEventListener("mousemove",ee),window.addEventListener("mouseup",ne))},ee=U=>{ue.value&&(me.value=U.clientX)},ne=()=>{if(!ue.value)return;const U=me.value-_.value;if(Math.abs(U)<5){const t=g.value.find(s=>s.id===z.value);t&&v(t)}else{const t=Math.round(U/ce.value);if(t!==0){const s=g.value.find(l=>l.id===z.value);if(s&&s.startDate){const l=je(s.startDate,t);d(s.id,l)}}}ue.value=!1,z.value=null,window.removeEventListener("mousemove",ee),window.removeEventListener("mouseup",ne)},xe=()=>{ke.value&&(he.value=ke.value.clientWidth)};let we=null;$t(()=>{xe(),window.addEventListener("resize",xe),ke.value&&(we=new ResizeObserver(()=>xe()),we.observe(ke.value)),At(()=>{ke.value&&(ke.value.scrollLeft=0)})}),Ot(()=>{window.removeEventListener("resize",xe),we&&we.disconnect()});const ce=G(()=>{switch(M.value){case"week":return he.value>0?he.value/7:100;case"month":return 40;default:return 40}}),c=G(()=>M.value==="week"?he.value:h.value*ce.value),We=U=>{if(!U.startDate)return{};const t=W.value.start;let l=Ie(U.startDate,t)*ce.value;if(ue.value&&z.value===U.id){const i=me.value-_.value;l+=i}return{left:l+"px",width:(U.calendarDuration||1)*ce.value+"px",backgroundColor:U.isMilestone?"#1e293b":U.color,cursor:M.value==="month"?"default":ue.value?"grabbing":"grab",zIndex:ue.value&&z.value===U.id?50:10}},st=G(()=>{if(re.value==="none")return[{id:"all",title:"",tasks:g.value}];const U={};return g.value.forEach(t=>{let s="";if(re.value==="responsible")s=t.responsible||"Sem ResponsÃ¡vel";else if(re.value==="sprint")if(t.sprintId){const l=$.value.sprints.find(i=>i.id===t.sprintId);if(l)if(!n.value&&l.squadId){const i=$.value.squads.find(k=>k.id===l.squadId);s=i?`${i.name} : ${l.name}`:l.name}else s=l.name;else s="Sprint Desconhecida"}else s="NÃ£o Planejado";U[s]||(U[s]=[]),U[s].push(t)}),Object.keys(U).sort().map(t=>({id:t,title:t,tasks:U[t]}))}),at=G(()=>{if(M.value==="project")return"VisÃ£o Geral";const U=S.value;if(M.value==="month")return ae(U,"MMMM yyyy",{locale:Ye}).toUpperCase();if(M.value==="week"){const t=Dt(U,{weekStartsOn:0}),s=wt(U,{weekStartsOn:0});return`${ae(t,"dd/MM")} - ${ae(s,"dd/MM")}`}return""}),Ee=G(()=>{const U=W.value.start;return Array.from({length:h.value},(t,s)=>{var O;const l=je(U,s),i=ae(l,"yyyy-MM-dd"),k=$.value.squads.flatMap(j=>j.sprints).find(j=>i>=j.startDate&&i<=j.endDate),q=k?[k.planningDate,k.refinementDate,k.reviewDate,k.retroDate].includes(i):!1;return{date:l,label:ae(l,"dd",{locale:Ye}),dayName:ae(l,"EEE",{locale:Ye}).replace(".","").toUpperCase(),fullDate:ae(l,"dd/MM/yyyy"),isWeekend:Ne(l),isHoliday:$.value.holidays.includes(i)||(n.value?(O=$.value.squads.find(j=>j.id===n.value))==null?void 0:O.holidays.includes(i):!1),isEvent:q,eventTitle:q?"Rito da Sprint (Dia nÃ£o produtivo)":""}})}),lt=G(()=>{if(Ee.value.length===0)return[];const U=[];let t="",s=0;return Ee.value.forEach((l,i)=>{const k=ae(l.date,"MMMM yyyy",{locale:Ye});k!==t?(t!==""&&U.push({label:t,count:s}),t=k,s=1):s++,i===Ee.value.length-1&&U.push({label:t,count:s})}),U}),ot=G(()=>{const U=[];if(re.value!=="none")return[];const t=new Map;return g.value.forEach((s,l)=>t.set(s.id,{index:l,task:s})),g.value.forEach((s,l)=>{if(s.dependencyId&&t.has(s.dependencyId)){const i=t.get(s.dependencyId),k=W.value.start,O=(Ie(i.task.startDate,k)+(i.task.isMilestone?1:i.task.calendarDuration||1))*ce.value,j=i.index*40+20,fe=Ie(s.startDate,k)*ce.value,De=l*40+20,pe=15,Z=`M ${O} ${j} L ${O+pe} ${j} L ${O+pe} ${De} L ${fe} ${De}`,ge=P.value.includes(s.id)&&P.value.includes(i.task.id);U.push({path:Z,isCritical:ge})}}),U}),rt=U=>U?U.split(" ").map(t=>t[0]).slice(0,2).join("").toUpperCase():"?",Ge=U=>{if(U.isMilestone||!U.effort||!U.duration||U.isCompleted)return!1;const t=$.value.teamMembers.find(l=>l.name===U.responsible),s=t?t.capacity:8;return U.effort>U.duration*s},nt=()=>{B.value="",u.value="",Q.value=""},dt=G(()=>B.value||u.value||Q.value);return(U,t)=>(o(),r("div",pl,[e("div",bl,[e("div",fl,[e("div",vl,[t[18]||(t[18]=e("h2",{class:"font-bold text-slate-700 dark:text-slate-200 flex items-center gap-2"},"Gantt",-1)),y($).squads.length>0?(o(),r("div",ml,[T(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>Ke(n)?n.value=s:null),class:"bg-indigo-50 dark:bg-slate-950 text-indigo-700 dark:text-indigo-100 font-bold text-xs py-1.5 px-2 rounded border border-indigo-200 dark:border-indigo-900 cursor-pointer focus:ring-2 focus:ring-indigo-500 outline-none transition-colors dark:[color-scheme:dark]"},[t[17]||(t[17]=e("option",{value:""},"Todas as Squads (Overview)",-1)),(o(!0),r(F,null,L(y($).squads,s=>(o(),r("option",{key:s.id,value:s.id},m(s.name),9,xl))),128))],512),[[ye,y(n)]])])):R("",!0),e("div",gl,[e("button",{onClick:t[1]||(t[1]=s=>y(w)("project")),class:K(["px-3 py-1 text-xs font-medium rounded transition-all whitespace-nowrap",y(M)==="project"?"bg-white dark:bg-slate-600 text-blue-600 dark:text-blue-300 shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200"])}," Projeto ",2),e("button",{onClick:t[2]||(t[2]=s=>y(w)("month")),class:K(["px-3 py-1 text-xs font-medium rounded transition-all whitespace-nowrap",y(M)==="month"?"bg-white dark:bg-slate-600 text-blue-600 dark:text-blue-300 shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200"])}," MÃªs ",2),e("button",{onClick:t[3]||(t[3]=s=>y(w)("week")),class:K(["px-3 py-1 text-xs font-medium rounded transition-all whitespace-nowrap",y(M)==="week"?"bg-white dark:bg-slate-600 text-blue-600 dark:text-blue-300 shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200"])}," Semana ",2)]),y(M)!=="project"?(o(),r("div",kl,[e("button",{onClick:t[4]||(t[4]=s=>y(x)("prev")),class:"w-7 h-7 flex items-center justify-center rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-600 transition-colors"},"<"),e("span",hl,m(at.value),1),e("button",{onClick:t[5]||(t[5]=s=>y(x)("next")),class:"w-7 h-7 flex items-center justify-center rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-600 transition-colors"},">")])):R("",!0)]),e("div",yl,[e("div",wl,[e("button",{onClick:t[6]||(t[6]=s=>re.value="none"),class:K(["px-2 py-1 text-[10px] uppercase font-bold rounded",re.value==="none"?"bg-white dark:bg-slate-600 shadow-sm text-slate-800 dark:text-white":"text-slate-400 hover:text-slate-600"])},"Lista",2),e("button",{onClick:t[7]||(t[7]=s=>re.value="responsible"),class:K(["px-2 py-1 text-[10px] uppercase font-bold rounded",re.value==="responsible"?"bg-white dark:bg-slate-600 shadow-sm text-slate-800 dark:text-white":"text-slate-400 hover:text-slate-600"])},"Pessoa",2),e("button",{onClick:t[8]||(t[8]=s=>re.value="sprint"),class:K(["px-2 py-1 text-[10px] uppercase font-bold rounded",re.value==="sprint"?"bg-white dark:bg-slate-600 shadow-sm text-slate-800 dark:text-white":"text-slate-400 hover:text-slate-600"])},"Sprint",2)]),e("div",Dl,[e("button",{onClick:b,class:"p-1.5 rounded-lg border transition-all text-xs font-bold text-slate-500 border-slate-200 hover:bg-slate-100 dark:text-slate-400 dark:border-slate-600 dark:hover:bg-slate-700",title:"Salvar Estado Atual (Backup)"},[...t[19]||(t[19]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1)])]),y(X)?(o(),r("button",{key:0,onClick:Me,class:"p-1.5 rounded-lg border transition-all text-xs font-bold bg-amber-50 text-amber-600 border-amber-200 hover:bg-amber-100 dark:bg-amber-900/30 dark:text-amber-400 dark:border-amber-800",title:"Desfazer AlteraÃ§Ãµes (Restaurar Backup)"},[...t[20]||(t[20]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})],-1)])])):R("",!0),e("button",{onClick:C,class:"flex items-center gap-2 px-3 py-1.5 rounded-lg border transition-all text-xs font-bold bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300 border-indigo-200 dark:border-indigo-800 hover:bg-indigo-100"},[...t[21]||(t[21]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1),e("span",{class:"hidden xl:inline"},"Otimizar",-1)])])]),e("div",Ml,[e("button",{onClick:t[9]||(t[9]=s=>ve.value=!ve.value),class:K(["flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-bold transition-all shadow-sm border",y(p).length>0?"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 border-red-200 dark:border-red-800 hover:bg-red-100":"bg-white dark:bg-slate-800 text-slate-500 border-slate-200 hover:bg-slate-50"])},[y(p).length>0?(o(),r("svg",$l,[...t[22]||(t[22]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"},null,-1)])])):(o(),r("svg",_l,[...t[23]||(t[23]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])),t[24]||(t[24]=e("span",{class:"hidden xl:inline"},"Riscos",-1)),y(p).length>0?(o(),r("span",Il,m(y(p).length),1)):R("",!0)],2),ve.value?(o(),r("div",Sl,[e("div",Cl,[t[25]||(t[25]=e("h3",{class:"font-bold text-slate-700 dark:text-slate-200 text-xs"},"Alertas",-1)),e("button",{onClick:t[10]||(t[10]=s=>ve.value=!1),class:"text-slate-400 hover:text-slate-600"},"Ã—")]),e("div",ql,[e("ul",jl,[(o(!0),r(F,null,L(y(p),(s,l)=>(o(),r("li",{key:l,class:"text-[10px] p-2 rounded bg-red-50 dark:bg-red-900/10 text-red-800 dark:text-red-300 border border-red-100 dark:border-red-900/30"},m(s),1))),128))]),y(p).length===0?(o(),r("div",Tl,"Sem riscos.")):R("",!0)])])):R("",!0)]),e("button",{onClick:t[11]||(t[11]=s=>le.value=!le.value),class:K(["flex items-center gap-2 px-3 py-1.5 rounded-full border transition-all text-xs font-bold",le.value?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 border-red-200":"bg-slate-50 dark:bg-slate-700 text-slate-500 border-slate-200 hover:bg-slate-100"])},[e("span",El,[le.value?(o(),r("span",Al)):R("",!0),e("span",{class:K(["relative inline-flex rounded-full h-2 w-2",le.value?"bg-red-500":"bg-slate-400"])},null,2)]),t[26]||(t[26]=e("span",{class:"hidden md:inline"},"Caminho CrÃ­tico",-1))],2)])]),e("div",Ol,[e("div",Vl,[t[27]||(t[27]=e("div",{class:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none"},[e("svg",{class:"h-4 w-4 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),T(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>Ke(B)?B.value=s:null),type:"text",placeholder:"Buscar tarefa...",class:"w-full pl-8 pr-2 py-1.5 text-xs rounded border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-slate-100 focus:bg-white dark:focus:bg-slate-800 focus:ring-2 focus:ring-blue-500 focus:outline-none transition-all placeholder-slate-400"},null,512),[[ie,y(B)]])]),e("div",Ul,[T(e("select",{"onUpdate:modelValue":t[13]||(t[13]=s=>Ke(u)?u.value=s:null),class:"flex-1 lg:flex-none py-1.5 pl-2 pr-6 text-xs rounded border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-slate-100 focus:bg-white dark:focus:bg-slate-800 focus:ring-2 focus:ring-blue-500 focus:outline-none"},[t[28]||(t[28]=e("option",{value:""},"Todos Resp.",-1)),(o(!0),r(F,null,L(y($).teamMembers,s=>(o(),r("option",{key:s.name,value:s.name},m(s.name),9,Nl))),128))],512),[[ye,y(u)]]),T(e("select",{"onUpdate:modelValue":t[14]||(t[14]=s=>Ke(Q)?Q.value=s:null),class:"flex-1 lg:flex-none py-1.5 pl-2 pr-6 text-xs rounded border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-slate-100 focus:bg-white dark:focus:bg-slate-800 focus:ring-2 focus:ring-blue-500 focus:outline-none"},[...t[29]||(t[29]=[Vt('<option value="" data-v-92aba42a>Todos Tipos</option><option value="frontend" data-v-92aba42a>Front</option><option value="backend" data-v-92aba42a>Back</option><option value="qualidade" data-v-92aba42a>QA</option><option value="other" data-v-92aba42a>Outro</option>',5)])],512),[[ye,y(Q)]])]),dt.value?(o(),r("button",{key:0,onClick:nt,class:"text-xs text-red-500 hover:text-red-700 px-2 py-1.5 flex items-center gap-1"},[...t[30]||(t[30]=[e("svg",{class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),te(" Limpar ",-1)])])):R("",!0)])]),e("div",{ref_key:"ganttContainer",ref:ke,class:"overflow-x-auto flex-1 relative custom-scrollbar bg-slate-50 dark:bg-slate-900/50"},[e("div",{style:Ce({width:c.value+"px"}),class:"relative min-h-[400px]"},[e("div",Pl,[e("div",Rl,[(o(!0),r(F,null,L(lt.value,(s,l)=>(o(),r("div",{key:l,class:"flex items-center pl-2 border-r border-slate-200 dark:border-slate-700 whitespace-nowrap overflow-hidden",style:Ce({width:s.count*ce.value+"px"})},m(s.label),5))),128))]),e("div",Bl,[(o(!0),r(F,null,L(Ee.value,(s,l)=>(o(),r("div",{key:l,class:K(["flex-shrink-0 border-r border-slate-100 dark:border-slate-700 flex flex-col items-center justify-center text-[10px] select-none transition-colors",{"bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300 font-bold":s.isHoliday,"bg-blue-100/50 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300":s.isEvent,"bg-red-50/50 dark:bg-red-900/20 text-red-300 dark:text-red-400":s.isWeekend&&!s.isHoliday&&!s.isEvent,"bg-white dark:bg-slate-800":!s.isWeekend&&!s.isHoliday&&!s.isEvent}]),style:Ce({width:ce.value+"px"}),title:s.isEvent?s.eventTitle:s.fullDate},[e("span",Fl,m(s.label),1),e("span",Ll,m(s.dayName),1)],14,zl))),128)),e("div",Hl,[(o(!0),r(F,null,L(Ee.value,(s,l)=>(o(),r("div",{key:l,class:K(["border-r border-slate-200/50 dark:border-slate-700/50 h-full box-border",{"bg-purple-50/40 dark:bg-purple-900/10":s.isHoliday,"bg-blue-50/30 dark:bg-blue-900/10":s.isEvent,"bg-red-50/30 dark:bg-red-900/10":s.isWeekend&&!s.isHoliday&&!s.isEvent}]),style:Ce({width:ce.value+"px"})},null,6))),128))])])]),e("div",Wl,[e("div",Gl,[(o(!0),r(F,null,L(Ee.value,(s,l)=>(o(),r("div",{key:l,class:K(["border-r border-slate-200/50 dark:border-slate-700/50 h-full box-border",{"bg-purple-50/40 dark:bg-purple-900/10":s.isHoliday,"bg-red-50/30 dark:bg-red-900/10":s.isWeekend&&!s.isHoliday}]),style:Ce({width:ce.value+"px"})},null,6))),128))]),(o(),r("svg",{class:"absolute inset-0 pointer-events-none z-0",width:c.value,height:y(g).length*40+50,style:{overflow:"visible"}},[(o(!0),r(F,null,L(ot.value,(s,l)=>(o(),r("path",{key:l,d:s.path,fill:"none",class:K(["transition-colors duration-300",s.isCritical&&le.value?"stroke-red-500":"stroke-slate-300 dark:stroke-slate-600"]),"stroke-width":s.isCritical&&le.value?2:1.5,"stroke-linejoin":"round"},null,10,Jl))),128))],8,Ql)),e("div",Xl,[(o(!0),r(F,null,L(st.value,s=>(o(),r("div",{key:s.id},[re.value!=="none"?(o(),r("div",Yl,[t[31]||(t[31]=e("span",{class:"w-1.5 h-1.5 rounded-full bg-slate-400"},null,-1)),te(" "+m(s.title)+" ",1),e("span",Kl,m(s.tasks.length),1)])):R("",!0),(o(!0),r(F,null,L(s.tasks,l=>{var i,k;return o(),r("div",{key:l.id,class:"relative h-10 flex items-center group"},[t[32]||(t[32]=e("div",{class:"absolute inset-x-0 h-full bg-blue-50/0 dark:group-hover:bg-blue-900/20 group-hover:bg-blue-50/50 transition-colors pointer-events-none"},null,-1)),e("div",{class:K(["absolute h-7 rounded-md shadow-sm text-[11px] text-white flex items-center px-2 transition-all z-10 overflow-hidden",{"ring-2 ring-blue-500 ring-offset-2 ring-offset-white dark:ring-offset-slate-900":((i=y(f))==null?void 0:i.id)===l.id,"border-2 border-amber-400":Ge(l),"ring-2 ring-red-500 shadow-[0_0_10px_rgba(239,68,68,0.6)] z-20":le.value&&y(P).includes(l.id),"opacity-40 grayscale":le.value&&!y(P).includes(l.id)&&((k=y(f))==null?void 0:k.id)!==l.id,"opacity-60":l.isCompleted,"shadow-lg scale-[1.02]":ue.value&&z.value===l.id,"border-2 border-dashed border-slate-300":l.isNotPlanned&&!Ge(l),"rotate-45 !w-5 !h-5 !rounded-sm !p-0 justify-center ml-2.5":l.isMilestone}]),onMousedown:q=>a(q,l),style:Ce(We(l))},[l.isMilestone?R("",!0):(o(),r("span",{key:0,class:K(["truncate font-medium drop-shadow-md flex items-center gap-2",{"line-through text-white/80":l.isCompleted}])},[te(m(l.name)+" ",1),Ge(l)?(o(),r("span",eo,"âš ï¸")):R("",!0),l.isCompleted?(o(),r("span",to,"âœ“")):R("",!0)],2)),l.responsible&&!l.isMilestone?(o(),r("div",so,m(rt(l.responsible)),1)):R("",!0)],46,Zl),l.isMilestone?(o(),r("span",{key:0,class:"absolute text-xs font-bold text-slate-700 dark:text-slate-200 whitespace-nowrap ml-2 z-20 pointer-events-none",style:Ce({left:parseInt(We(l).left)+25+"px"})},m(l.name),5)):R("",!0)])}),128))]))),128))])])],4)],512),E.value?(o(),r("div",ao,[e("div",lo,[e("div",oo,[t[33]||(t[33]=e("h3",{class:"font-bold text-indigo-800 dark:text-indigo-200 flex items-center gap-2"},[e("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})]),te(" SugestÃµes de OtimizaÃ§Ã£o de Sprint ")],-1)),e("button",{onClick:t[15]||(t[15]=s=>E.value=!1),class:"text-slate-400 hover:text-slate-600"},"Ã—")]),e("div",ro,[t[34]||(t[34]=e("p",{class:"text-sm text-slate-600 dark:text-slate-300"},"Analisamos as prioridades (Meta > Item), dependÃªncias e capacidade da equipe para sugerir a melhor ordem de execuÃ§Ã£o:",-1)),A.value.length>0?(o(),r("div",no,[(o(!0),r(F,null,L(A.value,(s,l)=>(o(),r("div",{key:l,class:K(["p-3 rounded border text-sm flex gap-3 items-start",s.includes("PRIORIDADE")?"bg-amber-50 border-amber-200 text-amber-800 dark:bg-amber-900/20 dark:border-amber-800 dark:text-amber-200":s.includes("SOBRECARGA")?"bg-red-50 border-red-200 text-red-800 dark:bg-red-900/20 dark:border-red-800 dark:text-red-200":s.includes("SEQUÃŠNCIA")?"bg-blue-50 border-blue-200 text-blue-800 dark:bg-blue-900/20 dark:border-blue-800 dark:text-blue-200":"bg-green-50 border-green-200 text-green-800 dark:bg-green-900/20 dark:border-green-800 dark:text-green-200"])},[e("span",io,m(s.includes("PRIORIDADE")?"âš¡":s.includes("SOBRECARGA")?"âš ï¸":s.includes("SEQUÃŠNCIA")?"ðŸ”¢":"âœ…"),1),e("span",null,m(s),1)],2))),128))])):R("",!0)]),e("div",uo,[e("button",{onClick:t[16]||(t[16]=s=>E.value=!1),class:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded font-bold text-sm"},"Entendido")])])])):R("",!0)]))}}),po=Re(co,[["__scopeId","data-v-92aba42a"]]),bo={class:"space-y-6 animate-fade-in pb-10"},fo={class:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col sm:flex-row justify-between items-center gap-4 transition-colors"},vo=["value"],mo={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},xo={class:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col justify-between transition-colors"},go={class:"text-3xl font-black text-slate-700 dark:text-slate-200 mt-1"},ko={class:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col justify-between transition-colors"},ho={class:"text-3xl font-black text-green-600 dark:text-green-500 mt-1"},yo={class:"flex gap-2 text-xs mt-2"},wo={class:"text-green-600 dark:text-green-500 font-bold"},Do={key:0,class:"text-red-500 dark:text-red-400 font-bold"},Mo={class:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col justify-between relative overflow-hidden transition-colors"},$o={class:"text-3xl font-black text-slate-700 dark:text-slate-200 mt-1"},_o={class:"text-lg text-slate-400 dark:text-slate-600 font-normal"},Io={key:0,class:"absolute right-0 top-0 bottom-0 w-1 bg-amber-400"},So={class:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col justify-between transition-colors"},Co={class:"flex items-end gap-2 mt-1"},qo={class:"text-3xl font-black text-slate-700 dark:text-slate-200"},jo={class:"w-full bg-slate-100 dark:bg-slate-700 h-2 rounded-full mt-2 overflow-hidden"},To={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Eo={class:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 transition-colors"},Ao={class:"space-y-4 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar"},Oo={class:"flex justify-between text-xs mb-1"},Vo={class:"font-bold text-slate-700 dark:text-slate-300 flex items-center gap-2"},Uo={class:"text-[9px] bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 px-1 rounded font-normal"},No={class:"w-full bg-slate-100 dark:bg-slate-700 h-2.5 rounded-full overflow-hidden relative border dark:border-slate-600"},Po={class:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 transition-colors"},Ro={class:"space-y-4"},Bo={class:"flex justify-between text-xs mb-1 font-bold"},zo={class:"text-slate-600 dark:text-slate-300"},Fo={class:"text-slate-500 dark:text-slate-400"},Lo={class:"w-full bg-slate-100 dark:bg-slate-700 h-6 rounded-lg overflow-hidden relative border border-slate-200 dark:border-slate-600"},Ho={key:0,class:"text-[10px] text-white font-bold"},Wo={key:0,class:"absolute inset-0 flex items-center justify-center text-[10px] text-slate-500 dark:text-slate-400 font-bold"},Go={class:"mt-6 pt-6 border-t border-slate-100 dark:border-slate-700"},Qo={class:"flex gap-2 flex-wrap"},Jo={class:"text-[10px] text-slate-500 dark:text-slate-400 uppercase font-bold"},Xo={class:"text-lg font-black text-slate-700 dark:text-slate-200"},Yo={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Ko={class:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 transition-colors h-full"},Zo={class:"flex justify-between items-center mb-4 border-b pb-3 border-slate-100 dark:border-slate-700"},er={key:0,class:"bg-red-100 text-red-700 px-2 py-0.5 rounded text-xs font-bold"},tr={key:0,class:"text-center py-8 bg-slate-50 dark:bg-slate-700/30 rounded-lg border border-dashed border-slate-200 dark:border-slate-700"},sr={key:1,class:"space-y-3"},ar={class:"flex flex-col min-w-0"},lr={class:"font-bold text-slate-700 dark:text-slate-200 text-sm truncate"},or={class:"text-[10px] text-slate-500 dark:text-slate-400"},rr={class:"flex flex-col items-end flex-shrink-0"},nr={class:"text-red-600 dark:text-red-400 font-black text-sm"},dr={class:"text-[10px] text-slate-400"},ir={key:0,class:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl p-6 shadow-sm animate-fade-in transition-colors"},ur={class:"grid grid-cols-1 gap-3"},cr={class:"flex-shrink-0 mt-0.5 p-1.5 bg-white/40 dark:bg-black/20 rounded-full"},pr={class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},br=["d"],fr={class:"flex-1 min-w-0"},vr={class:"text-[10px] font-black uppercase tracking-wide opacity-80"},mr={class:"text-sm font-bold leading-snug"},xr=Te({__name:"DashboardView",setup(H){const{tasks:g,config:$,automaticRisks:h,computedTasks:v}=Pe(),f=V(""),P=G(()=>f.value?g.value.filter(n=>{const d=$.value.teamMembers.find(p=>p.name===n.responsible);return d==null?void 0:d.squadIds.includes(f.value)}).length:g.value.length),M=G(()=>{const n=$.value.squads.find(ve=>ve.id===f.value),d=f.value?n==null?void 0:n.startDate:$.value.projectStartDate,p=f.value?n==null?void 0:n.deadline:$.value.deadline;if(!d||!p)return 0;const I=Y(d),J=Y(p);if(!de(I)||!de(J))return 0;const N=new Date,X=Ie(J,I),le=Ie(N,I);return le<0?0:le>X?100:Math.round(le/X*100)}),W=G(()=>{const d=(f.value?v.value.filter(N=>{const X=$.value.teamMembers.find(le=>le.name===N.responsible);return X==null?void 0:X.squadIds.includes(f.value)}):v.value).filter(N=>N.isCompleted),p=d.length;let I=0,J=0;return d.forEach(N=>{if(!N.completedDate||!N.endDate)return;const X=oe(Y(N.completedDate));Je(X,N.endDate)?J++:I++}),{total:p,onTime:I,late:J}}),w=G(()=>{const d=(f.value?g.value.filter(p=>{const I=$.value.teamMembers.find(J=>J.name===p.responsible);return I==null?void 0:I.squadIds.includes(f.value)}):g.value).filter(p=>p.isNotPlanned);return{total:d.length,open:d.filter(p=>!p.isCompleted).length}}),x=G(()=>(f.value?$.value.teamMembers.filter(d=>d.squadIds.includes(f.value)):$.value.teamMembers).map(d=>{const p=g.value.filter(N=>N.responsible===d.name&&!N.isCompleted&&!N.isMilestone).reduce((N,X)=>N+(X.effort||0),0);let I=0;if($.value.squads.forEach(N=>{d.squadIds.includes(N.id)&&N.sprints.forEach(X=>{const le=Y(X.startDate),ve=Y(X.endDate);if(de(le)&&de(ve)){const ke=ct({start:le,end:ve}),he=[X.planningDate,X.refinementDate,X.reviewDate,X.retroDate],re=ke.filter(ue=>{const z=ae(ue,"yyyy-MM-dd");return!((X.skipWeekends??N.skipWeekends)&&Ne(ue))&&!N.holidays.includes(z)&&!$.value.holidays.includes(z)&&!d.daysOff.includes(z)&&!he.includes(z)}).length;I+=re*d.capacity}})}),I===0){const N=Y($.value.projectStartDate),X=$.value.deadline?Y($.value.deadline):je(N,30);de(N)&&de(X)&&(I=ct({start:N,end:X}).filter(le=>!Ne(le)).length*d.capacity)}const J=I>0?Math.round(p/I*100):0;return{name:d.name,assigned:p,capacity:I,percentage:J,isOverloaded:p>I,sector:d.sector||"Outro"}})),S=G(()=>{const n=f.value?g.value.filter(p=>{const I=$.value.teamMembers.find(J=>J.name===p.responsible);return I==null?void 0:I.squadIds.includes(f.value)}):g.value,d={frontend:0,backend:0,qualidade:0,other:0};return n.forEach(p=>{p.type in d?d[p.type]++:d.other++}),[{label:"Front-end",value:d.frontend,color:"bg-blue-500"},{label:"Back-end",value:d.backend,color:"bg-green-500"},{label:"Qualidade",value:d.qualidade,color:"bg-purple-500"},{label:"Outros",value:d.other,color:"bg-gray-400"}].filter(p=>p.value>0)}),B=G(()=>{const n={};return x.value.forEach(d=>{n[d.sector]||(n[d.sector]={totalCapacity:0,assignedEffort:0,memberCount:0}),n[d.sector].totalCapacity+=d.capacity,n[d.sector].assignedEffort+=d.assigned,n[d.sector].memberCount+=1}),Object.entries(n).map(([d,p])=>({name:d,...p,percentage:p.totalCapacity>0?Math.round(p.assignedEffort/p.totalCapacity*100):0}))}),u=G(()=>{const n=f.value?v.value.filter(I=>{const J=$.value.teamMembers.find(N=>N.name===I.responsible);return J==null?void 0:J.squadIds.includes(f.value)}):v.value,d=[];let p=0;return n.forEach(I=>{if(I.originalEndDate&&I.endDate){const J=Y(I.originalEndDate),N=Ie(I.endDate,J);N>0&&(d.push({name:I.name,responsible:I.responsible||"N/A",delay:N,planned:ae(J,"dd/MM"),current:ae(I.endDate,"dd/MM"),isMilestone:I.isMilestone}),p+=N)}}),{count:d.length,totalDelay:p,tasks:d.sort((I,J)=>J.delay-I.delay).slice(0,5)}}),Q=G(()=>h.value.map(n=>{let d="INFO",p="Aviso",I=n,J="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",N="bg-slate-50 dark:bg-slate-900/50 border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300";return n.includes("CAPACIDADE:")?(d="CAPACIDADE",p="Sobrecarga",I=n.replace("CAPACIDADE:","").trim(),N="bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800 text-amber-800 dark:text-amber-200",J="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"):n.includes("SPRINT:")?(d="SPRINT",p="Conflito de Sprint",I=n.replace("SPRINT:","").trim(),N="bg-purple-50 dark:bg-purple-900/20 border-purple-200 dark:border-purple-800 text-purple-800 dark:text-purple-200",J="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"):n.includes("CALENDÃRIO:")&&(d="CALENDÃRIO",p="Agenda",I=n.replace("CALENDÃRIO:","").trim(),N="bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-800 dark:text-blue-200",J="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"),{type:d,title:p,message:I,styles:N,icon:J}}));return(n,d)=>(o(),r("div",bo,[e("div",fo,[d[2]||(d[2]=e("div",null,[e("h2",{class:"text-lg font-bold text-slate-700 dark:text-slate-200 flex items-center gap-2"},[e("span",{class:"text-xl"},"ðŸ“Š"),te(" Dashboard de Performance")]),e("p",{class:"text-xs text-slate-500"},"MÃ©tricas ajustadas por Squad e ritos de Sprint.")],-1)),T(e("select",{"onUpdate:modelValue":d[0]||(d[0]=p=>f.value=p),class:"rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white text-sm font-bold h-10 px-3 focus:ring-2 focus:ring-indigo-500"},[d[1]||(d[1]=e("option",{value:""},"ðŸŒ VisÃ£o Global do Projeto",-1)),(o(!0),r(F,null,L(y($).squads,p=>(o(),r("option",{key:p.id,value:p.id},"Squad: "+m(p.name),9,vo))),128))],512),[[ye,f.value]])]),e("div",mo,[e("div",xo,[d[3]||(d[3]=e("span",{class:"text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider"},"Total de Tarefas",-1)),e("div",go,m(P.value),1),d[4]||(d[4]=e("div",{class:"text-xs text-slate-400 dark:text-slate-500 mt-2"},"Filtradas por contexto",-1))]),e("div",ko,[d[5]||(d[5]=e("span",{class:"text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider"},"ConcluÃ­das",-1)),e("div",ho,m(W.value.total),1),e("div",yo,[e("span",wo,m(W.value.onTime)+" no prazo",1),W.value.late>0?(o(),r("span",Do,m(W.value.late)+" com atraso",1)):R("",!0)])]),e("div",Mo,[d[6]||(d[6]=e("span",{class:"text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider"},"NÃ£o Planejadas",-1)),e("div",$o,[te(m(w.value.open)+" ",1),e("span",_o,"/ "+m(w.value.total),1)]),d[7]||(d[7]=e("div",{class:"text-xs text-slate-400 dark:text-slate-500 mt-2"},"Abertas sem Sprint",-1)),w.value.open>0?(o(),r("div",Io)):R("",!0)]),e("div",So,[d[8]||(d[8]=e("span",{class:"text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider"},"Tempo Decorrido",-1)),e("div",Co,[e("span",qo,m(M.value)+"%",1)]),e("div",jo,[e("div",{class:"bg-slate-800 dark:bg-slate-400 h-full rounded-full transition-all duration-1000",style:Ce({width:M.value+"%"})},null,4)])])]),e("div",To,[e("div",Eo,[d[9]||(d[9]=e("h3",{class:"font-bold text-slate-700 dark:text-slate-200 mb-4 flex items-center gap-2 border-b pb-3 border-slate-100 dark:border-slate-700"},[e("svg",{class:"w-5 h-5 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0z"})]),te(" Carga Individual Real (Sprints + Ritos) ")],-1)),e("div",Ao,[(o(!0),r(F,null,L(x.value,p=>(o(),r("div",{key:p.name},[e("div",Oo,[e("span",Vo,[te(m(p.name)+" ",1),e("span",Uo,m(p.sector),1)]),e("span",{class:K(p.isOverloaded?"text-red-500 dark:text-red-400 font-bold":"text-slate-500 dark:text-slate-400")},m(p.assigned)+"h / "+m(p.capacity)+"h ",3)]),e("div",No,[e("div",{class:K(["h-full rounded-full transition-all duration-500",p.isOverloaded?"bg-red-500":p.percentage>85?"bg-amber-400":"bg-blue-500"]),style:Ce({width:Math.min(p.percentage,100)+"%"})},null,6)])]))),128))])]),e("div",Po,[d[11]||(d[11]=e("h3",{class:"font-bold text-slate-700 dark:text-slate-200 mb-4 flex items-center gap-2 border-b pb-3 border-slate-100 dark:border-slate-700"},[e("svg",{class:"w-5 h-5 text-indigo-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})]),te(" Capacidade por Setor ")],-1)),e("div",Ro,[(o(!0),r(F,null,L(B.value,p=>(o(),r("div",{key:p.name},[e("div",Bo,[e("span",zo,m(p.name)+" ("+m(p.memberCount)+" m)",1),e("span",Fo,m(p.assignedEffort)+"h / "+m(p.totalCapacity)+"h",1)]),e("div",Lo,[e("div",{class:"h-full bg-indigo-500 transition-all duration-500 flex items-center justify-end px-2",style:Ce({width:Math.min(p.percentage,100)+"%"})},[p.percentage>10?(o(),r("span",Ho,m(p.percentage)+"%",1)):R("",!0)],4),p.percentage<=10?(o(),r("span",Wo,m(p.percentage)+"%",1)):R("",!0)])]))),128))]),e("div",Go,[d[10]||(d[10]=e("h4",{class:"font-bold text-slate-700 dark:text-slate-300 text-xs mb-3"},"DistribuiÃ§Ã£o por Tipo",-1)),e("div",Qo,[(o(!0),r(F,null,L(S.value,p=>(o(),r("div",{key:p.label,class:"flex-1 min-w-[100px] bg-slate-50 dark:bg-slate-900 p-2 rounded border border-slate-100 dark:border-slate-700"},[e("div",Jo,m(p.label),1),e("div",Xo,m(p.value),1)]))),128))])])])]),e("div",Yo,[e("div",Ko,[e("div",Zo,[d[12]||(d[12]=e("h3",{class:"font-bold text-slate-700 dark:text-slate-200 flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),te(" Desvio de Prazos (Baseline) ")],-1)),u.value.count>0?(o(),r("span",er,m(u.value.totalDelay)+" dias atraso",1)):R("",!0)]),u.value.count===0?(o(),r("div",tr,[...d[13]||(d[13]=[e("div",{class:"text-slate-400 text-sm"},"Tudo conforme o planejado.",-1)])])):(o(),r("div",sr,[(o(!0),r(F,null,L(u.value.tasks,p=>(o(),r("div",{key:p.name,class:"flex items-center justify-between p-3 bg-red-50 dark:bg-red-900/10 rounded-lg border border-red-100 dark:border-red-900/30 shadow-sm"},[e("div",ar,[e("span",lr,m(p.name),1),e("span",or,m(p.responsible),1)]),e("div",rr,[e("span",nr,"+"+m(p.delay)+" dias",1),e("span",dr,"Era: "+m(p.planned)+" âž "+m(p.current),1)])]))),128))]))]),Q.value.length>0?(o(),r("div",ir,[d[14]||(d[14]=e("h3",{class:"text-slate-700 dark:text-slate-200 font-bold text-base mb-4 flex items-center gap-2 border-b pb-3 border-slate-100 dark:border-slate-700"},[e("span",{class:"w-2 h-2 rounded-full bg-red-500 animate-pulse"}),te(" Monitoramento de Alertas Reais ")],-1)),e("div",ur,[(o(!0),r(F,null,L(Q.value,(p,I)=>(o(),r("div",{key:I,class:K(["flex items-start gap-3 p-4 rounded-lg border shadow-sm transition-all hover:scale-[1.01]",p.styles])},[e("div",cr,[(o(),r("svg",pr,[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:p.icon},null,8,br)]))]),e("div",fr,[e("div",vr,m(p.title)+" ["+m(p.type)+"]",1),e("div",mr,m(p.message),1)])],2))),128))])])):R("",!0)])]))}}),gr=Re(xr,[["__scopeId","data-v-03d7fcdd"]]),kr={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 items-start h-[calc(100vh-200px)]"},hr={class:"bg-white dark:bg-slate-800 p-5 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 h-full flex flex-col"},yr={class:"flex gap-2 mb-4"},wr={class:"space-y-2 overflow-y-auto custom-scrollbar flex-1"},Dr={key:0,class:"text-xs text-slate-400 italic"},Mr=["onClick"],$r={class:"flex items-center gap-2"},_r={class:"text-sm font-bold text-slate-700 dark:text-slate-300"},Ir={class:"flex gap-1 opacity-60 group-hover:opacity-100"},Sr=["onClick"],Cr=["onClick"],qr={class:"lg:col-span-2 h-full flex flex-col"},jr={key:0,class:"bg-white dark:bg-slate-800 p-5 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 h-full flex flex-col animate-fade-in"},Tr={class:"mb-4 bg-emerald-50 dark:bg-emerald-900/10 p-4 rounded-lg border border-emerald-100 dark:border-emerald-800/30"},Er={class:"flex gap-2"},Ar={id:"sectors-list"},Or=["value"],Vr={class:"overflow-y-auto custom-scrollbar flex-1 border rounded-lg border-slate-100 dark:border-slate-700"},Ur={class:"w-full text-sm text-left"},Nr={class:"divide-y divide-slate-100 dark:divide-slate-700"},Pr={class:"px-4 py-2 font-medium text-slate-700 dark:text-slate-200"},Rr={class:"px-4 py-2 text-slate-500 dark:text-slate-400"},Br={class:"px-4 py-2"},zr={class:"flex flex-wrap gap-1"},Fr={key:0,class:"text-slate-400 text-xs italic"},Lr={class:"px-4 py-2 text-right"},Hr=["onClick"],Wr=["onClick"],Gr={key:0},Qr={key:1,class:"bg-white dark:bg-slate-800 p-5 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 h-full flex flex-col animate-fade-in"},Jr={class:"flex justify-between items-center mb-4"},Xr={class:"font-bold text-slate-800 dark:text-slate-200 flex items-center gap-2"},Yr={class:"text-indigo-600 dark:text-indigo-400"},Kr={class:"mb-4 bg-blue-50 dark:bg-blue-900/10 p-4 rounded-lg border border-blue-100 dark:border-blue-800/30"},Zr={class:"flex gap-2 items-end"},en={class:"flex-1"},tn=["value"],sn={class:"w-24"},an=["disabled"],ln={key:0,class:"mt-2 text-[10px] text-amber-600"},on={class:"space-y-2 overflow-y-auto custom-scrollbar flex-1"},rn={key:0,class:"text-center py-8 text-slate-400 italic bg-slate-50 dark:bg-slate-900/30 rounded border border-dashed border-slate-200"},nn={class:"flex items-center gap-3"},dn={class:"w-8 h-8 rounded-full bg-slate-100 dark:bg-slate-600 flex items-center justify-center text-xs font-bold text-slate-600 dark:text-slate-300"},un={class:"text-sm font-bold text-slate-700 dark:text-slate-200"},cn={class:"text-xs text-slate-500"},pn=["onClick"],bn=Te({__name:"SquadManagement",setup(H){const{config:g,addMember:$,removeMember:h,addSquad:v,updateSquad:f,removeSquad:P,linkMemberToSquad:M,unlinkMemberFromSquad:W,updateMember:w}=Pe(),x=V(""),S=V("#3b82f6"),B=V(null),u=V(null),Q=V(""),n=V(""),d=V(8),p=V(""),I=V(null),J=()=>{x.value&&(B.value?(f(B.value,x.value,S.value),B.value=null):v(x.value,S.value),x.value="",S.value="#3b82f6")},N=A=>{x.value=A.name,S.value=A.color,B.value=A.id},X=A=>{u.value=u.value===A?null:A,Q.value="",n.value="",d.value=8,I.value=null},le=A=>{confirm("Tem certeza que deseja excluir esta Squad? Os membros voltarÃ£o para o diretÃ³rio geral.")&&(P(A),u.value===A&&(u.value=null))},ve=()=>{if(Q.value){const A=n.value||"Outro";if(I.value!==null){const C=g.value.teamMembers[I.value];w(I.value,Q.value,C.capacity,A,C.squadIds),I.value=null}else $(Q.value,8,A,[]);Q.value="",n.value=""}},ke=A=>{const C=g.value.teamMembers.findIndex(Me=>Me.name===A.name);C!==-1&&(I.value=C,Q.value=A.name,n.value=A.sector)},he=A=>{const C=g.value.teamMembers.findIndex(Me=>Me.name===A.name);C!==-1&&confirm(`Excluir ${A.name} permanentemente?`)&&h(C)},re=()=>{I.value=null,Q.value="",n.value=""},ue=G(()=>u.value?g.value.teamMembers.filter(A=>A.squadIds.includes(u.value)):[]),z=G(()=>u.value?g.value.teamMembers.filter(A=>!A.squadIds.includes(u.value)):[]),_=()=>{if(p.value&&u.value){const A=g.value.teamMembers.findIndex(C=>C.name===p.value);A!==-1&&(M(A,u.value,d.value),p.value="",d.value=8)}},me=A=>{const C=g.value.teamMembers.findIndex(Me=>Me.name===A.name);C!==-1&&u.value&&W(C,u.value)},E=["Frontend","Backend","Fullstack","QA","Design","Produto","DevOps","GestÃ£o"];return(A,C)=>{var Me;return o(),r("div",kr,[e("div",hr,[C[10]||(C[10]=e("h3",{class:"font-bold text-slate-800 dark:text-slate-200 mb-4 flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-indigo-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0z"})]),te(" 1. Squads ")],-1)),e("div",yr,[T(e("input",{"onUpdate:modelValue":C[0]||(C[0]=b=>x.value=b),type:"text",placeholder:"Nome da Squad",class:"flex-1 text-sm rounded border-slate-300 dark:border-slate-600 shadow-sm p-2 dark:bg-slate-700 dark:text-white"},null,512),[[ie,x.value]]),T(e("input",{"onUpdate:modelValue":C[1]||(C[1]=b=>S.value=b),type:"color",class:"w-10 h-10 p-1 rounded border-slate-300 dark:border-slate-600 cursor-pointer"},null,512),[[ie,S.value]]),e("button",{onClick:J,class:"bg-indigo-600 text-white px-3 rounded text-sm font-bold hover:bg-indigo-700 transition-colors"},m(B.value?"Salvar":"+"),1)]),e("div",wr,[y(g).squads.length===0?(o(),r("div",Dr,"Nenhuma squad criada.")):R("",!0),(o(!0),r(F,null,L(y(g).squads,b=>(o(),r("div",{key:b.id,class:K(["flex items-center justify-between p-2 rounded border transition-all cursor-pointer group",u.value===b.id?"bg-indigo-50 border-indigo-300 dark:bg-indigo-900/30 dark:border-indigo-700 ring-1 ring-indigo-300":"bg-slate-50 border-slate-100 dark:bg-slate-700/30 dark:border-slate-700 hover:bg-slate-100"]),onClick:a=>X(b.id)},[e("div",$r,[e("span",{class:"w-3 h-3 rounded-full shadow-sm",style:Ce({backgroundColor:b.color})},null,4),e("span",_r,m(b.name),1)]),e("div",Ir,[e("button",{onClick:tt(a=>N(b),["stop"]),class:"text-slate-400 hover:text-blue-500"},[...C[8]||(C[8]=[e("svg",{class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1)])],8,Sr),e("button",{onClick:tt(a=>le(b.id),["stop"]),class:"text-slate-400 hover:text-red-500"},[...C[9]||(C[9]=[e("svg",{class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Cr)])],10,Mr))),128))])]),e("div",qr,[u.value?(o(),r("div",Qr,[e("div",Jr,[e("h3",Xr,[C[15]||(C[15]=e("svg",{class:"w-5 h-5 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),C[16]||(C[16]=te(" Membros da Squad: ",-1)),e("span",Yr,m((Me=y(g).squads.find(b=>b.id===u.value))==null?void 0:Me.name),1)]),e("button",{onClick:C[4]||(C[4]=b=>u.value=null),class:"text-xs text-slate-400 hover:text-slate-600 underline"},"Voltar ao DiretÃ³rio")]),e("div",Kr,[C[20]||(C[20]=e("p",{class:"text-xs text-blue-800 dark:text-blue-200 mb-3 font-medium"},"Vincule um membro existente a esta squad e defina sua capacidade de trabalho.",-1)),e("div",Zr,[e("div",en,[C[18]||(C[18]=e("label",{class:"text-[10px] uppercase font-bold text-slate-500 mb-1 block"},"Membro",-1)),T(e("select",{"onUpdate:modelValue":C[5]||(C[5]=b=>p.value=b),class:"w-full text-sm rounded border-slate-300 dark:border-slate-600 p-2 dark:bg-slate-700 dark:text-white"},[C[17]||(C[17]=e("option",{value:""},"-- Selecione --",-1)),(o(!0),r(F,null,L(z.value,b=>(o(),r("option",{key:b.name,value:b.name},m(b.name)+" ("+m(b.sector)+")",9,tn))),128))],512),[[ye,p.value]])]),e("div",sn,[C[19]||(C[19]=e("label",{class:"text-[10px] uppercase font-bold text-slate-500 mb-1 block"},"Capacidade",-1)),T(e("input",{"onUpdate:modelValue":C[6]||(C[6]=b=>d.value=b),type:"number",class:"w-full text-sm rounded border-slate-300 dark:border-slate-600 p-2 dark:bg-slate-700 dark:text-white"},null,512),[[ie,d.value,void 0,{number:!0}]])]),e("button",{onClick:_,disabled:!p.value,class:"bg-blue-600 text-white px-4 py-2 rounded text-sm font-bold hover:bg-blue-700 transition-colors disabled:opacity-50"},"Vincular",8,an)]),z.value.length===0&&y(g).teamMembers.length>0?(o(),r("div",ln,"* Todos os membros cadastrados jÃ¡ estÃ£o nesta squad.")):R("",!0),y(g).teamMembers.length===0?(o(),r("div",{key:1,class:"mt-2 text-[10px] text-red-500 cursor-pointer",onClick:C[7]||(C[7]=b=>u.value=null)},"* Nenhum membro cadastrado no sistema. Clique aqui para ir ao DiretÃ³rio.")):R("",!0)]),e("div",on,[ue.value.length===0?(o(),r("div",rn,"Nenhum membro vinculado a esta squad.")):R("",!0),(o(!0),r(F,null,L(ue.value,b=>(o(),r("div",{key:b.name,class:"flex items-center justify-between bg-white border border-slate-100 dark:bg-slate-700/20 dark:border-slate-700 p-3 rounded hover:shadow-sm transition-all"},[e("div",nn,[e("div",dn,m(b.name.substring(0,2).toUpperCase()),1),e("div",null,[e("div",un,m(b.name),1),e("div",cn,m(b.sector)+" â€¢ "+m(b.capacity)+"h/dia",1)])]),e("button",{onClick:a=>me(b),class:"text-red-400 hover:text-red-600 text-xs border border-red-100 hover:bg-red-50 px-2 py-1 rounded transition-colors"},"Desvincular",8,pn)]))),128))])])):(o(),r("div",jr,[C[14]||(C[14]=e("h3",{class:"font-bold text-slate-800 dark:text-slate-200 mb-4 flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})]),te(" 2. DiretÃ³rio Geral de Membros ")],-1)),e("div",Tr,[C[11]||(C[11]=e("p",{class:"text-xs text-emerald-800 dark:text-emerald-200 mb-3 font-medium"},"Cadastre aqui todos os colaboradores. Depois, selecione uma Squad Ã  esquerda para vinculÃ¡-los.",-1)),e("div",Er,[T(e("input",{"onUpdate:modelValue":C[2]||(C[2]=b=>Q.value=b),type:"text",placeholder:"Nome do Colaborador",class:"flex-1 text-sm rounded border-slate-300 dark:border-slate-600 shadow-sm p-2 dark:bg-slate-700 dark:text-white"},null,512),[[ie,Q.value]]),T(e("input",{list:"sectors-list","onUpdate:modelValue":C[3]||(C[3]=b=>n.value=b),placeholder:"Setor (Opcional)",class:"w-1/3 text-sm rounded border-slate-300 dark:border-slate-600 shadow-sm p-2 dark:bg-slate-700 dark:text-white"},null,512),[[ie,n.value]]),e("datalist",Ar,[(o(),r(F,null,L(E,b=>e("option",{key:b,value:b},null,8,Or)),64))]),e("button",{onClick:ve,class:"bg-emerald-600 text-white px-4 rounded text-sm font-bold hover:bg-emerald-700 transition-colors"},m(I.value!==null?"Atualizar":"Cadastrar"),1),I.value!==null?(o(),r("button",{key:0,onClick:re,class:"bg-slate-200 text-slate-600 px-3 rounded text-sm font-bold"},"Cancelar")):R("",!0)])]),e("div",Vr,[e("table",Ur,[C[13]||(C[13]=e("thead",{class:"bg-slate-50 dark:bg-slate-900 text-xs uppercase text-slate-500 font-bold sticky top-0"},[e("tr",null,[e("th",{class:"px-4 py-2"},"Nome"),e("th",{class:"px-4 py-2"},"Setor"),e("th",{class:"px-4 py-2"},"Squads Vinculadas"),e("th",{class:"px-4 py-2 text-right"},"AÃ§Ãµes")])],-1)),e("tbody",Nr,[(o(!0),r(F,null,L(y(g).teamMembers,b=>(o(),r("tr",{key:b.name,class:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors"},[e("td",Pr,m(b.name),1),e("td",Rr,m(b.sector),1),e("td",Br,[e("div",zr,[(o(!0),r(F,null,L(b.squadIds,a=>{var ee;return o(),r("span",{key:a,class:"text-[10px] px-1.5 rounded bg-slate-100 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-500"},m(((ee=y(g).squads.find(ne=>ne.id===a))==null?void 0:ee.name)||"?"),1)}),128)),b.squadIds.length===0?(o(),r("span",Fr,"Sem vÃ­nculo")):R("",!0)])]),e("td",Lr,[e("button",{onClick:a=>ke(b),class:"text-blue-500 hover:underline mr-2 text-xs"},"Editar",8,Hr),e("button",{onClick:a=>he(b),class:"text-red-500 hover:underline text-xs"},"Excluir",8,Wr)])]))),128)),y(g).teamMembers.length===0?(o(),r("tr",Gr,[...C[12]||(C[12]=[e("td",{colspan:"4",class:"px-4 py-8 text-center text-slate-400 italic"},"Nenhum membro cadastrado. Use o formulÃ¡rio acima.",-1)])])):R("",!0)])])])]))])])}}}),fn=Re(bn,[["__scopeId","data-v-76bf132c"]]),vn={class:"flex flex-col items-center justify-center min-h-[500px] p-4 animate-fade-in"},mn={class:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-5xl overflow-hidden flex flex-col md:flex-row min-h-[550px] border border-slate-100 dark:border-slate-700"},xn={class:"bg-slate-900 text-white p-8 md:w-1/3 flex flex-col justify-between relative overflow-hidden transition-colors"},gn={class:"relative z-10"},kn={class:"text-6xl mb-6 transform transition-transform hover:scale-110 duration-300"},hn={class:"text-2xl font-bold leading-tight"},yn={key:0,class:"text-blue-400 font-bold text-xs uppercase tracking-wider mt-3 bg-blue-400/10 inline-block px-2 py-1 rounded"},wn={class:"flex gap-2 mt-8 relative z-10"},Dn=["onClick"],Mn={class:"p-8 md:w-2/3 flex flex-col bg-white dark:bg-slate-800 transition-colors"},$n={class:"flex-1"},_n={class:"text-lg text-slate-600 dark:text-slate-300 mb-6 leading-relaxed border-b border-slate-100 dark:border-slate-700 pb-4"},In={key:0,class:"space-y-3"},Sn={class:"text-sm text-slate-700 dark:text-slate-200 leading-snug"},Cn={class:"flex justify-between items-center mt-8 pt-6 border-t border-slate-100 dark:border-slate-700"},qn=Te({__name:"TutorialView",emits:["complete"],setup(H,{emit:g}){const $=g,h=V(0),v=[{title:"Bem-vindo ao Gantt-ficator",icon:"ðŸ‘‹",content:"Sua ferramenta completa para planejamento Ã¡gil e visual. O sistema foi atualizado para suportar mÃºltiplas Squads e OtimizaÃ§Ã£o Inteligente. Vamos ver o que mudou!",points:["GestÃ£o por Squads.","Planejamento de Sprints.","SugestÃµes de OtimizaÃ§Ã£o via IA."]},{title:"1. GestÃ£o de Squads (Novo!)",icon:"ðŸ‘¥",highlight:"Aba: Squads",content:"O ponto de partida. Agora vocÃª organiza sua equipe em cÃ©lulas Ã¡geis.",points:["Crie Squads: Defina o nome e a cor para identificar cada time.","DiretÃ³rio Geral: Cadastre todos os colaboradores em uma lista Ãºnica.","VÃ­nculo FlexÃ­vel: Adicione membros Ã s Squads e defina a capacidade (horas/dia) especÃ­fica para aquele time.","Day-Offs: Gerencie as folgas dos membros diretamente no cadastro."]},{title:"2. ConfiguraÃ§Ã£o & Sprints",icon:"âš™ï¸",highlight:"Aba: ConfiguraÃ§Ãµes",content:"Onde o tempo Ã© gerenciado. Agora as configuraÃ§Ãµes sÃ£o contextualizadas.",points:['Seletor de Contexto: Escolha se quer configurar o "Projeto Global" ou uma "Squad" especÃ­fica.',"Ciclo de Sprints: Crie Sprints dentro de cada Squad (ex: Sprint 24 - Squad Alpha).","Datas e Feriados: Defina feriados globais ou especÃ­ficos por Squad.","Ajuste Fino: Altere a capacidade ou adicione folgas de um membro apenas para a duraÃ§Ã£o de uma Sprint especÃ­fica."]},{title:"3. Planejamento de Tarefas",icon:"ðŸ“",highlight:"BotÃ£o: Nova Tarefa",content:"Mais inteligÃªncia na criaÃ§Ã£o de demandas.",points:['Prioridade da US: Defina se Ã© uma "Meta" (Goal - Alta prioridade) ou "Item" (Normal).',"ClassificaÃ§Ã£o: Use nÃºmeros (1, 2, 3...) para ordenar a importÃ¢ncia dentro da prioridade.","VÃ­nculo AutomÃ¡tico: Ao selecionar uma Sprint, o sistema filtra apenas os membros daquela Squad.",'Fluxo Completo: Gera automaticamente a cadeia "Backend â†’ Frontend â†’ QA" com os gaps de tempo corretos.']},{title:"4. Cronograma Inteligente",icon:"ðŸ“…",highlight:"Aba: Cronograma",content:"Visualize e otimize o trabalho no tempo.",points:['Filtro de Squad: Alterne entre a "VisÃ£o Geral" (todas as squads) ou foque em um time especÃ­fico.',"BotÃ£o Otimizar âš¡: Receba sugestÃµes automÃ¡ticas para resolver conflitos de prioridade (Item antes de Meta) e sobrecarga.","Linhas de DependÃªncia: O sistema respeita intervalos (ex: 3 dias entre Back e Front).","EdiÃ§Ã£o RÃ¡pida: Arraste tarefas para mudar datas ou clique para editar."]},{title:"5. Dashboard e Riscos",icon:"ðŸš¨",highlight:"Aba: Dashboard",content:"Monitoramento proativo da saÃºde do projeto.",points:["AnÃ¡lise de Riscos: O sistema avisa automaticamente sobre sobrecarga, estouro de sprint e conflitos de agenda (fÃ©rias/feriados).","Desvio de Prazos: Compare o planejado (Baseline) com o real.","Carga de Trabalho: Veja quem estÃ¡ sobrecarregado (vermelho) ou livre (azul).","Progresso: Acompanhe o avanÃ§o fÃ­sico e temporal do projeto."]}],f=G(()=>h.value===v.length-1),P=()=>{f.value||h.value++},M=()=>{h.value>0&&h.value--},W=()=>{$("complete")};return(w,x)=>(o(),r("div",vn,[e("div",mn,[e("div",xn,[x[0]||(x[0]=e("div",{class:"absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none"},[e("svg",{class:"w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none"},[e("path",{d:"M0 100 C 20 0 50 0 100 100 Z",fill:"white"})])],-1)),e("div",gn,[e("div",kn,m(v[h.value].icon),1),e("h2",hn,m(v[h.value].title),1),v[h.value].highlight?(o(),r("p",yn,m(v[h.value].highlight),1)):R("",!0)]),e("div",wn,[(o(),r(F,null,L(v,(S,B)=>e("div",{key:B,class:K(["h-1.5 rounded-full transition-all duration-500 cursor-pointer",B===h.value?"w-8 bg-blue-500":"w-2 bg-slate-700 hover:bg-slate-600"]),onClick:u=>h.value=B},null,10,Dn)),64))])]),e("div",Mn,[e("div",$n,[e("p",_n,m(v[h.value].content),1),v[h.value].points?(o(),r("ul",In,[(o(!0),r(F,null,L(v[h.value].points,(S,B)=>(o(),r("li",{key:B,class:"flex items-start gap-3 p-3 rounded-lg bg-slate-50 dark:bg-slate-700/30 border border-slate-100 dark:border-slate-700 transition-all hover:translate-x-1"},[x[1]||(x[1]=e("svg",{class:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",Sn,m(S),1)]))),128))])):R("",!0)]),e("div",Cn,[e("button",{onClick:M,class:K(["px-4 py-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 font-bold text-sm transition-colors flex items-center gap-1",{invisible:h.value===0}])},[...x[2]||(x[2]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),te(" Anterior ",-1)])],2),f.value?(o(),r("button",{key:1,onClick:W,class:"px-8 py-3 bg-green-600 hover:bg-green-500 text-white rounded-xl font-bold shadow-lg shadow-green-200 dark:shadow-green-900/20 transition-transform hover:scale-105 active:scale-95 flex items-center gap-2"},"ComeÃ§ar a Usar ðŸš€")):(o(),r("button",{key:0,onClick:P,class:"px-6 py-3 bg-blue-600 hover:bg-blue-500 text-white rounded-xl font-bold shadow-lg shadow-blue-200 dark:shadow-blue-900/20 transition-transform hover:scale-105 active:scale-95 flex items-center gap-2"},[...x[3]||(x[3]=[te(" PrÃ³ximo ",-1),e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])]))])])])]))}}),jn=Re(qn,[["__scopeId","data-v-781ac33f"]]),Tn={class:"fixed top-20 right-4 z-[9999] flex flex-col gap-3 pointer-events-none"},En={class:"text-lg"},An={class:"flex-1 text-sm font-medium pt-0.5"},On=["onClick"],Vn=Te({__name:"ToastContainer",setup(H){const{notifications:g,remove:$}=bt(),h=f=>{switch(f){case"success":return"âœ…";case"error":return"âŒ";case"warning":return"âš ï¸";default:return"â„¹ï¸"}},v=f=>{switch(f){case"success":return"border-green-500 bg-white dark:bg-slate-800";case"error":return"border-red-500 bg-white dark:bg-slate-800";case"warning":return"border-amber-500 bg-white dark:bg-slate-800";default:return"border-blue-500 bg-white dark:bg-slate-800"}};return(f,P)=>(o(),r("div",Tn,[Se(Ut,{name:"toast"},{default:pt(()=>[(o(!0),r(F,null,L(y(g),M=>(o(),r("div",{key:M.id,class:K(["pointer-events-auto min-w-[300px] max-w-sm p-4 rounded-lg shadow-xl border-l-4 flex items-start gap-3 transform transition-all duration-300 dark:text-white",v(M.type)])},[e("span",En,m(h(M.type)),1),e("div",An,m(M.message),1),e("button",{onClick:W=>y($)(M.id),class:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200"},"Ã—",8,On)],2))),128))]),_:1})]))}}),Un=Re(Vn,[["__scopeId","data-v-d08f692a"]]),He=V(!1),Nn=()=>{if(typeof window>"u")return;const H=localStorage.getItem("theme"),g=window.matchMedia("(prefers-color-scheme: dark)").matches;H==="dark"||!H&&g?(He.value=!0,document.documentElement.classList.add("dark")):(He.value=!1,document.documentElement.classList.remove("dark"))};Nn();function Pn(){return{isDark:He,toggleDark:()=>{He.value=!He.value,He.value?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))}}}const Rn={class:"min-h-screen flex flex-col bg-slate-50 dark:bg-slate-900 font-sans text-slate-900 dark:text-slate-100 transition-colors duration-300"},Bn={class:"bg-slate-900 dark:bg-slate-950 text-white p-4 shadow-md z-50 sticky top-0 border-b border-slate-800"},zn={class:"max-w-[1600px] mx-auto flex flex-col md:flex-row items-center justify-between gap-4"},Fn={class:"flex items-center gap-4 w-full md:w-auto justify-between md:justify-start"},Ln={class:"flex bg-slate-800 dark:bg-slate-900 rounded-lg p-1 border border-slate-700 overflow-x-auto"},Hn={class:"flex items-center gap-3 w-full md:w-auto justify-end"},Wn={key:0,class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Gn={key:1,class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Qn={class:"flex-1 w-full max-w-[1600px] mx-auto p-4 lg:p-6"},Jn={key:"dashboard"},Xn={key:"gantt"},Yn={key:"squads",class:"max-w-6xl mx-auto animate-fade-in"},Kn={key:"config",class:"max-w-6xl mx-auto space-y-8 animate-fade-in"},Zn={key:"tutorial"},yt="gantt-ficator-tutorial-seen",ed=Te({__name:"App",setup(H){const{openCreateModal:g}=Pe(),{isDark:$,toggleDark:h}=Pn(),v=V("dashboard"),f=V(null);$t(()=>{localStorage.getItem(yt)||(v.value="tutorial"),window.addEventListener("beforeinstallprompt",w=>{w.preventDefault(),f.value=w})});const P=async()=>{if(f.value){f.value.prompt();const{outcome:W}=await f.value.userChoice;W==="accepted"&&(f.value=null)}},M=()=>{localStorage.setItem(yt,"true"),v.value="dashboard",window.scrollTo({top:0,behavior:"smooth"})};return(W,w)=>(o(),r("div",Rn,[Se(Un),e("header",Bn,[e("div",zn,[e("div",Fn,[w[12]||(w[12]=e("div",{class:"flex items-center gap-3"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 00-2-2h-2a2 2 0 00-2 2"})]),e("h1",{class:"text-xl font-bold tracking-tight hidden lg:block"},"Gantt-ficator")],-1)),e("nav",Ln,[e("button",{onClick:w[0]||(w[0]=x=>v.value="dashboard"),class:K(["px-3 py-1.5 rounded-md text-sm font-medium transition-all flex items-center gap-2 whitespace-nowrap",v.value==="dashboard"?"bg-slate-700 dark:bg-slate-800 text-white shadow":"text-slate-400 hover:text-white"]),title:"Dashboard"},[...w[7]||(w[7]=[e("span",{class:"text-lg"},"ðŸ“Š",-1),te(),e("span",{class:"hidden sm:inline"},"Dashboard",-1)])],2),e("button",{onClick:w[1]||(w[1]=x=>v.value="gantt"),class:K(["px-3 py-1.5 rounded-md text-sm font-medium transition-all flex items-center gap-2 whitespace-nowrap",v.value==="gantt"?"bg-slate-700 dark:bg-slate-800 text-white shadow":"text-slate-400 hover:text-white"]),title:"Cronograma"},[...w[8]||(w[8]=[e("span",{class:"text-lg"},"ðŸ“…",-1),te(),e("span",{class:"hidden sm:inline"},"Cronograma",-1)])],2),e("button",{onClick:w[2]||(w[2]=x=>v.value="squads"),class:K(["px-3 py-1.5 rounded-md text-sm font-medium transition-all flex items-center gap-2 whitespace-nowrap",v.value==="squads"?"bg-slate-700 dark:bg-slate-800 text-white shadow":"text-slate-400 hover:text-white"]),title:"Squads"},[...w[9]||(w[9]=[e("span",{class:"text-lg"},"ðŸ‘¥",-1),te(),e("span",{class:"hidden sm:inline"},"Squads",-1)])],2),e("button",{onClick:w[3]||(w[3]=x=>v.value="config"),class:K(["px-3 py-1.5 rounded-md text-sm font-medium transition-all flex items-center gap-2 whitespace-nowrap",v.value==="config"?"bg-slate-700 dark:bg-slate-800 text-white shadow":"text-slate-400 hover:text-white"]),title:"ConfiguraÃ§Ãµes"},[...w[10]||(w[10]=[e("span",{class:"text-lg"},"âš™ï¸",-1),te(),e("span",{class:"hidden sm:inline"},"ConfiguraÃ§Ãµes",-1)])],2),e("button",{onClick:w[4]||(w[4]=x=>v.value="tutorial"),class:K(["px-3 py-1.5 rounded-md text-sm font-medium transition-all flex items-center gap-2 whitespace-nowrap",v.value==="tutorial"?"bg-slate-700 dark:bg-slate-800 text-white shadow":"text-slate-400 hover:text-white"]),title:"Tutorial"},[...w[11]||(w[11]=[e("span",{class:"text-lg"},"ðŸŽ“",-1),te(),e("span",{class:"hidden sm:inline"},"Tutorial",-1)])],2)])]),e("div",Hn,[f.value?(o(),r("button",{key:0,onClick:P,class:"p-2 rounded-lg bg-slate-800 dark:bg-slate-700 text-emerald-400 hover:bg-slate-700 dark:hover:bg-slate-600 transition-colors border border-slate-700 animate-pulse",title:"Instalar Aplicativo"},[...w[13]||(w[13]=[e("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1)])])):R("",!0),e("button",{onClick:w[5]||(w[5]=(...x)=>y(h)&&y(h)(...x)),class:"p-2 rounded-lg bg-slate-800 dark:bg-slate-700 text-yellow-400 dark:text-slate-200 hover:bg-slate-700 dark:hover:bg-slate-600 transition-colors border border-slate-700"},[y($)?(o(),r("svg",Wn,[...w[14]||(w[14]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"},null,-1)])])):(o(),r("svg",Gn,[...w[15]||(w[15]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"},null,-1)])]))]),e("button",{onClick:w[6]||(w[6]=(...x)=>y(g)&&y(g)(...x)),class:"bg-blue-600 hover:bg-blue-500 text-white px-3 sm:px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 shadow-lg shadow-blue-900/50 transition-transform hover:scale-105 active:scale-95 whitespace-nowrap"},[...w[16]||(w[16]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),e("span",{class:"hidden sm:inline"},"Nova Tarefa",-1),e("span",{class:"sm:hidden"},"Nova",-1)])])])])]),e("main",Qn,[Se(Mt,{name:"fade",mode:"out-in"},{default:pt(()=>[v.value==="dashboard"?(o(),r("div",Jn,[Se(gr)])):v.value==="gantt"?(o(),r("div",Xn,[Se(po)])):v.value==="squads"?(o(),r("div",Yn,[Se(fn)])):v.value==="config"?(o(),r("div",Kn,[e("section",null,[w[17]||(w[17]=e("h2",{class:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4 px-1"},"Gerenciamento de Dados",-1)),Se(cl)]),Se(dl)])):v.value==="tutorial"?(o(),r("div",Zn,[Se(jn,{onComplete:M})])):R("",!0)]),_:1})]),Se(xa)]))}});function td(H={}){const{immediate:g=!1,onNeedRefresh:$,onOfflineReady:h,onRegistered:v,onRegisteredSW:f,onRegisterError:P}=H;let M,W;const w=async(S=!0)=>{await W};async function x(){if("serviceWorker"in navigator){if(M=await Bt(async()=>{const{Workbox:S}=await import("./vendor-Brm4ScKu.js").then(B=>B.a2);return{Workbox:S}},[]).then(({Workbox:S})=>new S("/Gantt/sw.js",{scope:"/Gantt/",type:"classic"})).catch(S=>{P==null||P(S)}),!M)return;M.addEventListener("activated",S=>{(S.isUpdate||S.isExternal)&&window.location.reload()}),M.addEventListener("installed",S=>{S.isUpdate||h==null||h()}),M.register({immediate:g}).then(S=>{f?f("/Gantt/sw.js",S):v==null||v(S)}).catch(S=>{P==null||P(S)})}}return W=x(),w}const sd=td({onNeedRefresh(){confirm("Nova versÃ£o disponÃ­vel. Recarregar?")&&sd(!0)},onOfflineReady(){console.log("App pronto para funcionar offline!")}});Nt(ed).mount("#app");
